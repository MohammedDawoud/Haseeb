<div class="service-prices">
  <app-navigator [title]="title"></app-navigator>

  <div class="row align-items-center">
    <div class="col-xxl-3 col-md-4 col-lg-3 mb-0 mb-md-3">
      <div class="form-group">
        <label class="col-form-label"> {{ "Project Type" | translate }}</label>
        <ng-select
          class="w-full p-0"
          placeholder="{{ 'Chose' | translate }}"
          ngModel
          name="Project Type" autocomplete="off"
          [(ngModel)]="ProjectTypeId"
          (change)="RefreshData();FillProjectSubTypesSelect(ProjectTypeId)"
        >
          <ng-option *ngFor="let user of ProjectTypeList" [value]="user.id">{{
            user.name
          }}</ng-option>
        </ng-select>
      </div>
    </div>

    <div class="col-xxl-3 col-md-4 col-lg-3 mb-0 mb-md-3">
      <div class="form-group">
        <label class="col-form-label">
          {{ "Subproject type" | translate }}</label
        >
        <ng-select
          class="w-full p-0"
          placeholder="{{ 'Chose' | translate }}"
          ngModel
          name="Subproject type" autocomplete="off"
          [(ngModel)]="SubprojecttypeId"
          (change)="RefreshData()"
        >
          <ng-option *ngFor="let user of SubprojecttypeList" [value]="user.id">{{
            user.name
          }}</ng-option>
        </ng-select>
      </div>
    </div>

    <div class="col-xxl-3 col-md-4 col-lg-3 mb-0 mb-md-3">
      <div class="form-group">
        <label class="col-form-label"> {{ "ServiceName" | translate }}</label>

        <input type="text " class="w-full p-2 inputType" name="ServiceName"
        [(ngModel)]="ServiceName"
        (keyup)="RefreshData()"/>
      </div>
    </div>

    <div class="col-xxl-3 col-md-4 col-lg-3 mb-0 mb-md-3">
      <div class="form-group">
        <label class="col-form-label"> {{ "search" | translate }}</label>

        <input type="text " class="w-full p-2 inputType" name="search" (keyup)="applyFilter($event)"/>
      </div>
    </div>
  </div>

  <div class="head flex gap-2 flex-wrap items-end justify-between">
    <div class="btns mb-3 w-100">
      <div class="row d-md-flex me-1">
        <button
          type="button"
          class="flex gap-1 btn btn-outline-secondary mb-3 col-md-2 ms-3"
          routerLink="/accounts/Sales_bill"
        >
          {{ "salesBill" | translate }}
        </button>

        <button
          type="button"
          class="flex gap-1 btn bg-base mb-3 col-md-2 text-white ms-3"
          (click)="open(addtotalSurfacesModal, null, 'addtotalSurfacesModal')"
        >
          {{ "totalSurfacesAllowed" | translate }}
        </button>

        <button
          type="button"
          class="flex gap-1 btn btn-success mb-3 col-md-2 text-white ms-3"
          (click)="open(addSerivceModal,null,'addSerivceModal')"
        >
          {{ "AddService" | translate }}
        </button>

        <button
          type="button"
          class="flex gap-1 btn bg-base mb-3 col-md-2 text-white ms-3"
          (click)="open(floortotalSurfacesModal,null, 'floortotalSurfacesModal')"
        >
          {{ "requiredRoles" | translate }}
        </button>
      </div>
    </div>
  </div>

  <!-- table -->
  <div class="overflow-auto mt-4">
    <table
      *ngIf="showTable"
      mat-table
      [dataSource]="projectsDataSource"
      matSort
      class="mat-elevation-z8 rounded-t-lg overflow-hidden w-max"
    >
      <ng-container matColumnDef="projectName">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          <span>{{ "Project Type" | translate }}</span>
        </th>
        <td mat-cell *matCellDef="let element">
          {{ element.projectName }}
        </td>
      </ng-container>

      <ng-container matColumnDef="projectSubTypeName">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          <span>{{ "Subproject type" | translate }}</span>
        </th>
        <td mat-cell *matCellDef="let element">
          {{ element.projectSubTypeName }}
        </td>
      </ng-container>

      <ng-container matColumnDef="serviceName_EN">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          <span>{{ "ServiceName" | translate }}</span>
        </th>
        <td mat-cell *matCellDef="let element">
          {{ element.name }}
        </td>
      </ng-container>

      <ng-container matColumnDef="amount">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          <span>{{ "price" | translate }}</span>
        </th>
        <td mat-cell *matCellDef="let element">
          {{ element.amount }}
        </td>
      </ng-container>

      <ng-container matColumnDef="operations">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          <span>{{ "operations" | translate }}</span>
        </th>
        <td mat-cell *matCellDef="let element">

              <div class="child-btns">
                <span class="dtr-data">
                  <!--تعديل  -->
                  <button
                    type="button"
                    id="68"
                    class="p-2 bg-orange-100 hover:bg-orange-500 rounded-lg duration-300 hover:text-white w-10 mx-1"
                    data-toggle="tooltip"
                    data-placement="top"
                    title=" تعديل "
                    data-original-title="تعديل "
                    (click)="open(addSerivceModal,element,'editSerivceModal')"
                  >
                    <i class="fa-regular fa-pen-to-square"></i>
                  </button>
                </span>

                <span class="dtr-data">
                  <!--حذف   -->

                  <button
                    type="button"
                    id="68"
                    class="p-2 bg-red-100 hover:bg-red-500 rounded-lg duration-300 hover:text-white w-10 mx-1"
                    data-toggle="tooltip"
                    data-placement="top"
                    title=" حذف "
                    data-original-title="حذف "
                    (click)="open(deleteSerivceModal,element,'deleteSerivceModal')"
                  >
                    <i class="fa-solid fa-trash-can"></i>
                  </button>
                </span>
                <span class="dtr-data">
                  <button
                    type="button"
                    id="68"
                    class="AddNewTaskbtn btn btn-outline-success btn-sm waves-effect mx-1"
                    data-toggle="tooltip"
                    data-placement="top"
                    title=" التفاصيل "
                    data-original-title="التفاصيل "
                    (click)="open(DetailsServiceModal,element,'DetailsServiceModal')"
                  >
                    <i class="fa-solid fa-circle-info"></i>
                  </button>
                </span>
              </div>

        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="projectDisplayedColumns"></tr>

      <tr mat-row *matRowDef="let row; columns: projectDisplayedColumns"></tr>
    </table>

    <div *ngIf="!showTable" class="text-center">No Data Available in Table</div>
  </div>

  <mat-paginator [pageSizeOptions]="[10, 25]"> </mat-paginator>
</div>
<!-- deleteSerivceModal -->
<ng-template #deleteSerivceModal let-modal>
  <div class="modal-body text-center">
    <p
      [translate]="'name'"
      [translateParams]="{
        ar: 'هل تريد حذف هذا العنصر ؟',
        en: 'Do you want to delete this item?'
      }"
    ></p>
    <div class="flex gap-2 justify-center">
      <button
        type="button"
        (click)="modal.dismiss()"
        mat-raised-button
        color="basic"
      >
        {{ "close" | translate }}
      </button>

      <button
        type="button"
        mat-raised-button
        color="warn"
        (click)="deleteSerivcelist(modal); "
      >
        {{ "confirem" | translate }}
      </button>
    </div>
  </div>
</ng-template>


<!-- EditCheckDetailsModal -->
<ng-template #EditCheckDetailsModal let-modal>
  <div
    style="background-color: var(--base-color)"
    class="modal-header text-white flex justify-between items-center"
  >
    <h4 class="m-0">
      <span class="text-2xl">{{ "Check_transferDetails" | translate }}</span>
    </h4>
    <button
      type="button"
      class="text-2xl text-white m-0"
      (click)="modal.dismiss()"
    >
      <i class="fa-solid fa-xmark"></i>
    </button>
  </div>
  <div class="max-h-100 overflow-x-scroll overflow-y-scroll p-4">
    <form class="" #smsForm="ngForm">
      <div class="row align-items-end mb-4 mx-3">
        <!-- 1 line -->

        <div class="col-sm-6 col-md-3 col-lg-4 mb-0 mb-sm-3">
          <div class="form-group">
            <label for="customerEn" class="text-right col-form-label block">
              {{ "Payment type" | translate }}
            </label>
            <input required class="form-control" type="text" disabled />
          </div>
        </div>

        <div class="col-sm-6 col-md-3 col-lg-4 mb-0 mb-sm-3">
          <div class="form-group">
            <label for="customerEn" class="text-right col-form-label block">
              {{ "dateCheck_transfer" | translate }}
            </label>
            <input
              placeholder="{{ 'Chose' | translate }}"
              name="dateCheck_transfer"
              type="text"
              class="form-control"
              disabled
            />
          </div>
        </div>

        <div class="col-sm-6 col-md-3 col-lg-4 mb-0 mb-sm-3">
          <div class="form-group">
            <label for="customerEn" class="text-right col-form-label block">
              {{ "Check_transferNumber" | translate }}
            </label>
            <input
              placeholder="{{ 'Check_transferNumber' | translate }}"
              required
              class="form-control"
              type="text"
              disabled
            />
          </div>
        </div>

        <div class="col-sm-6 col-md-3 col-lg-4 mb-0 mb-sm-3">
          <div class="form-group">
            <label for="customerEn" class="text-right col-form-label block">
              {{ "BankName" | translate }}
            </label>
            <ng-select
              class="w-full p-0"
              placeholder="{{ 'Chose' | translate }}"
              name="user"
            >
              <ng-option *ngFor="let user of users" [value]="user.id">{{
                user.Name
              }}</ng-option>
            </ng-select>
          </div>
        </div>

        <button type="button" class="flex gap-1 btn btn-success mb-3 col-md-2">
          {{ "add" | translate }}
          <i class="fa-solid fa-plus"></i>
        </button>
      </div>
    </form>
  </div>

  <div class="flex justify-end p-3">
    <button class="btn me-2 btn-secondary">
      {{ "close" | translate }}
    </button>

    <button
      (click)="modal?.dismiss()"
      class="btn text-white"
      style="background-color: var(--base-color)"
    >
      {{ "save" | translate }}
    </button>
  </div>
</ng-template>

<!-- deleteModal -->
<ng-template #deleteModal let-modal>
  <div class="modal-body text-center">
    <p
      [translate]="'name'"
      [translateParams]="{
        ar: 'هل تريد حذف هذا العنصر ؟',
        en: 'Do you want to delete this item?'
      }"
    ></p>
    <div class="flex gap-2 justify-center">
      <button
        type="button"
        (click)="modal.dismiss()"
        mat-raised-button
        color="basic"
      >
        {{ "close" | translate }}
      </button>

      <button
        type="button"
        mat-raised-button
        color="warn"
        (click)="confirm(); modal.dismiss()"
      >
        {{ "confirem" | translate }}
      </button>
    </div>
  </div>
</ng-template>

<!-- مدى إجمالي المسطحات المسموحة -->
<!-- addtotalSurfacesModal -->
<ng-template #addtotalSurfacesModal let-modal>
  <div
    style="background-color: var(--base-color)"
    class="modal-header text-white flex justify-between items-center"
  >
    <h4 class="m-0">
      <span >{{ "totalSurfacesAllowed" | translate }}</span>
    </h4>
    <button
      type="button"
      class="text-2xl text-white m-0"
      (click)="modal.dismiss()"
    >
      <i class="fa-solid fa-xmark"></i>
    </button>
  </div>
  <div class="max-h-100 overflow-x-scroll overflow-y-scroll p-4">
    <form class="" #smsForm="ngForm">
      <div class="row align-items-end mb-4 mx-3">
        <!-- 1 line -->

        <div class="col-sm-6 col-md-3 col-lg-6 mb-0 mb-sm-3">
          <div class="form-group">
            <label  class="text-right col-form-label block">
              {{ "rangeName" | translate }}
                <span class="text-danger">*</span>
            </label>

              <input required class="form-control" autocomplete="off"  [placeholder]="('Write' | translate) + ' ' + ('rangeName' | translate)"
              [(ngModel)]="rangeName"  type="text"[ngModelOptions]="{standalone: true}" />
          </div>
        </div>

        <div class="col-sm-6 col-md-3 col-lg-6 mb-0 mb-sm-3">
          <div class="form-group">
            <label  class="text-right col-form-label block">
              {{ "RangeValue" | translate }}
              <span class="text-danger">*</span>
            </label>

              <input required class="form-control" autocomplete="off"  [placeholder]="('Write' | translate) + ' ' + ('RangeValue' | translate)"
              [(ngModel)]="RangeValue"  type="number"[ngModelOptions]="{standalone: true}" />
              </div>

        </div>

        <div class="col-sm-6 col-md-3 col-lg-12 mb-0 mb-sm-3 text-center">
          <button [disabled]='RangeValue==null || rangeName==null'
            type="button"(click)="SaveTotalSpacesRange()"
            class="flex gap-1 btn text-white mb-3 col-md-2 me-3"
            style="background-color: var(--base-color)"
          >
            {{ "save" | translate }}
          </button>

          <button
            type="button"  (click)="modal.dismiss()"
            class="flex gap-1 btn btn-secondary mb-3 col-md-2"
          >
            {{ "close" | translate }}
          </button>
        </div>

        <div class="col-sm-6 col-md-3 col-lg-12 mb-0 mb-sm-3 text-center">
          <input
            name="dateCheck_transfer"   (keyup)="applyFilterTotalSpacesRange($event)"
            placeholder="{{ 'search' | translate }}"
            type="text"
            class="form-control"
          />
        </div>
      </div>

      <div class="editable shadow mb-4">
        <table
          class="table table-responsive table-striped table-bordered text-center"
          style="vertical-align: middle; font-size: 14px"
        >
          <thead
            class="bg-base text-white"
            style="line-height: 30px; font-size: 13px"
          >
            <tr>
              <th >{{ "rangeName" | translate }}</th>
              <th >{{ "RangeValue" | translate }}</th>
              <th>{{ "operations" | translate }}</th>
            </tr>
          </thead>
          <tbody>
            <tr
              *ngFor="let item of AllTotalSpacesRangelist; let i = index"
              style="line-height: 15px"
            >
              <td>{{ item.totalSpacesRengeName }}</td>
              <td>{{item.rangeValue}}</td>
              <td>
                <button (click)="updateTotalSpacesRange(item)"
                  class="p-2 bg-orange-100 hover:bg-orange-500 rounded-lg duration-300 hover:text-white w-10"
                >
                  <i class="fa-regular fa-pen-to-square"></i>
                </button>

                <button
                  class="p-2 bg-red-100 hover:bg-red-500 rounded-lg duration-300 hover:text-white w-10 me-3"

                  (click)="open(deleteTotalSpacesRange,item,'deleteTotalSpacesRange')"
                >
                  <i class="fa-solid fa-trash-can"></i>
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </form>
  </div>

  <!-- <div class="flex justify-end p-3">
    <button class="btn me-2 btn-secondary">
      {{ "close" | translate }}
    </button>

    <button
      (click)="modal?.dismiss()"
      class="btn text-white"
      style="background-color: var(--base-color)"
    >
      {{ "save" | translate }}
    </button>
  </div> -->
</ng-template>

<!-- deleteTotalSpacesRange -->
<ng-template #deleteTotalSpacesRange let-modal>
  <div class="modal-body text-center">
    <p
      [translate]="'name'"
      [translateParams]="{
        ar: 'هل تريد حذف هذا العنصر ؟',
        en: 'Do you want to delete this item?'
      }"
    ></p>
    <div class="flex gap-2 justify-center">
      <button
        type="button"
        (click)="modal.dismiss()"
        mat-raised-button
        color="basic"
      >
        {{ "close" | translate }}
      </button>

      <button
        type="button"
        mat-raised-button
        color="warn"
        (click)="deleteTotalSpaces(modal); "
      >
        {{ "confirem" | translate }}
      </button>
    </div>
  </div>
</ng-template>

<!-- floortotalSurfacesModal -->
<ng-template #floortotalSurfacesModal let-modal>
  <div
    style="background-color: var(--base-color)"
    class="modal-header text-white flex justify-between items-center"
  >
    <h4 class="m-0">
      <span >{{ "requiredRoles" | translate }}</span>
    </h4>
    <button
      type="button"
      class="text-2xl text-white m-0"
      (click)="modal.dismiss()"
    >
      <i class="fa-solid fa-xmark"></i>
    </button>
  </div>
  <div class="max-h-100 overflow-x-scroll overflow-y-scroll p-4">
    <form class="" #smsForm="ngForm">
      <div class="row align-items-end mb-4 mx-3">
        <!-- 1 line -->

        <div class="col-sm-6 col-md-3 col-lg-6 mb-0 mb-sm-3">
          <div class="form-group">
            <label  class="text-right col-form-label block">

              <span >{{ "RoleName" | translate }}</span>


            </label>  <input required class="form-control" autocomplete="off"  [placeholder]="('Write' | translate) + ' ' + ('RoleName' | translate)"
            [(ngModel)]="FloorName"  type="text"[ngModelOptions]="{standalone: true}" />

          </div>
        </div>

        <div class="col-sm-6 col-md-3 col-lg-6 mb-0 mb-sm-3">
          <div class="form-group">
            <label  class="text-right col-form-label block">
              <span >{{ "turnRatio" | translate }}</span>
            </label>
            <input required class="form-control" autocomplete="off"  [placeholder]="('Write' | translate) + ' ' + ('turnRatio' | translate)"
            [(ngModel)]="FloorRatio"  type="number"[ngModelOptions]="{standalone: true}" />

          </div>

        </div>

        <div class="col-sm-6 col-md-3 col-lg-12 mb-0 mb-sm-3 text-center">
          <button
            type="button"(click)="SaveFloor()"[disabled]='FloorRatio==null || FloorName==null'
            class="flex gap-1 btn text-white mb-3 col-md-2 me-3"
            style="background-color: var(--base-color)"
          >
            {{ "save" | translate }}
          </button>

          <button
            type="button"  (click)="modal.dismiss()"
            class="flex gap-1 btn btn-secondary mb-3 col-md-2"
          >
            {{ "close" | translate }}
          </button>
        </div>

        <div class="col-sm-6 col-md-3 col-lg-12 mb-0 mb-sm-3 text-center">
          <input
            name="dateCheck_transfer"    (keyup)="applyFilterFloor($event)"
            placeholder="{{ 'search' | translate }}"
            type="text"
            class="form-control"
          />
        </div>
      </div>

      <div class="editable shadow mb-4">
        <table
          class="table table-responsive table-striped table-bordered text-center"
          style="vertical-align: middle; font-size: 14px"
        >
          <thead
            class="bg-base text-white"
            style="line-height: 30px; font-size: 13px"
          >
            <tr>
              <th >{{ "RoleName" | translate }}</th>
              <th >{{ "turnRatio" | translate }}</th>
              <th>{{ "operations" | translate }}</th>
            </tr>
          </thead>
          <tbody>
            <tr
              *ngFor="let item of AllFloorslist; let i = index"
              style="line-height: 15px"
            >
              <td>{{ item.floorName }}</td>
              <td>{{ item.floorRatio }}</td>

              <td>
                <button (click)="updatefloor(item)"
                  class="p-2 bg-orange-100 hover:bg-orange-500 rounded-lg duration-300 hover:text-white w-10"
                >
                  <i class="fa-regular fa-pen-to-square"></i>
                </button>

                <button
                  class="p-2 bg-red-100 hover:bg-red-500 rounded-lg duration-300 hover:text-white w-10 me-3"
                  (click)="open(deletefloor,item,'deletefloor')"
                >
                  <i class="fa-solid fa-trash-can"></i>
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </form>
  </div>
<!--
  <div class="flex justify-end p-3">
    <button class="btn me-2 btn-secondary">
      {{ "close" | translate }}
    </button>

    <button
      (click)="modal?.dismiss()"
      class="btn text-white"
      style="background-color: var(--base-color)"
    >
      {{ "save" | translate }}
    </button>
  </div> -->
</ng-template>

<!-- deletefloor -->
<ng-template #deletefloor let-modal>
  <div class="modal-body text-center">
    <p
      [translate]="'name'"
      [translateParams]="{
        ar: 'هل تريد حذف هذا العنصر ؟',
        en: 'Do you want to delete this item?'
      }"
    ></p>
    <div class="flex gap-2 justify-center">
      <button
        type="button"
        (click)="modal.dismiss()"
        mat-raised-button
        color="basic"
      >
        {{ "close" | translate }}
      </button>

      <button
        type="button"
        mat-raised-button
        color="warn"
        (click)="DeleteFloor(modal); "
      >
        {{ "confirem" | translate }}
      </button>
    </div>
  </div>
</ng-template>

<!-- requiredRolesModal -->
<ng-template #requiredRolesModal let-modal>
  <div
    style="background-color: var(--base-color)"
    class="modal-header text-white flex justify-between items-center"
  >
    <h4 class="m-0">
      <span>{{ "requiredRoles" | translate }}</span>
    </h4>
    <button
      type="button"
      class="text-2xl text-white m-0"
      (click)="modal.dismiss()"
    >
      <i class="fa-solid fa-xmark"></i>
    </button>
  </div>
  <div class="max-h-100 overflow-x-scroll overflow-y-scroll p-4">
    <form class="" #smsForm="ngForm">
      <div class="row align-items-end mb-4 mx-3">
        <!-- 1 line -->

        <div class="col-sm-6 col-md-3 col-lg-6 mb-0 mb-sm-3">
          <div class="form-group">
            <label for="RoleName" class="text-right col-form-label block">
              <span>{{ "RoleName" | translate }}</span>
            </label>
            <input
              required
              class="form-control"
              type="text"
              placeholder="{{ 'RoleName' | translate }}"
            />
          </div>
        </div>

        <div class="col-sm-6 col-md-3 col-lg-6 mb-0 mb-sm-3">
          <div class="form-group">
            <label for="turnRatio" class="text-right col-form-label block">
              {{ "turnRatio" | translate }}
            </label>
            <input
              required
              class="form-control"
              type="text"
              name="turnRatio"
              placeholder=" {{ 'turnRatio' | translate }}"
            />
          </div>
        </div>

        <div class="col-sm-6 col-md-3 col-lg-12 mb-0 mb-sm-3 text-center">
          <button
            type="button"
            class="flex gap-1 btn text-white mb-3 col-md-2 me-3"
            style="background-color: var(--base-color)"
          >
            {{ "save" | translate }}
          </button>

          <button
            type="button"
            class="flex gap-1 btn btn-secondary mb-3 col-md-2"
          >
            {{ "close" | translate }}
          </button>
        </div>

        <div class="col-sm-6 col-md-3 col-lg-12 mb-0 mb-sm-3 text-center">
          <input
            name="dateCheck_transfer"
            placeholder="{{ 'search' | translate }}"
            type="text"
            class="form-control"
          />
        </div>
      </div>

      <div class="editable shadow mb-4">
        <table
          class="table table-responsive table-striped table-bordered text-center"
          style="vertical-align: middle; font-size: 14px"
        >
          <thead
            class="bg-base text-white"
            style="line-height: 30px; font-size: 13px"
          >
            <tr>
              <th>{{ "RoleName" | translate }}</th>
              <th>{{ "turnRatio" | translate }}</th>
              <th>{{ "operations" | translate }}</th>
            </tr>
          </thead>
          <tbody>
            <tr
              *ngFor="let item of users; let i = index"
              style="line-height: 15px"
            >
              <td>{{ item.id }}</td>
              <td>{{item.name}}
              </td>
              <td>
                <button
                  class="p-2 bg-orange-100 hover:bg-orange-500 rounded-lg duration-300 hover:text-white w-10"
                >
                  <i class="fa-regular fa-pen-to-square"></i>
                </button>

                <button
                  class="p-2 bg-red-100 hover:bg-red-500 rounded-lg duration-300 hover:text-white w-10 me-3"
                  (click)="open(deleteModal, null, 'delete')"
                >
                  <i class="fa-solid fa-trash-can"></i>
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </form>
  </div>

  <div class="flex justify-end p-3">
    <button class="btn me-2 btn-secondary">
      {{ "close" | translate }}
    </button>

    <button
      (click)="modal?.dismiss()"
      class="btn text-white"
      style="background-color: var(--base-color)"
    >
      {{ "save" | translate }}
    </button>
  </div>
</ng-template>

<!-- DetailsServiceModal -->
<ng-template #DetailsServiceModal let-modal>
  <div
    style="background-color: var(--base-color)"
    class="modal-header text-white flex justify-between items-center"
  >
    <h4 class="m-0">
      <span>{{ "DetailsProvidedService" | translate }}</span>
    </h4>
    <button
      type="button"
      class="text-2xl text-white m-0"
      (click)="modal.dismiss()"
    >
      <i class="fa-solid fa-xmark"></i>
    </button>
  </div>
  <div>
    <div class="header d-flex justify-content-center">
      <h2 class="text-center w-fit p-3 bg-blue-300 mt-3">{{DetailsService?.name}}</h2>
    </div>
    <div class="body w-fit me-3"style="height: 60px;" *ngFor="let item of DetailsServicelist">
      <i class="fa-solid fa-check" style="color: #10e090"></i>
      <span class="bg-blue-100 p-2 mx-2">{{item?.accountName}} </span>
      <span class="bg-blue-100 p-2 mx-2">{{item?.servicesName}} </span>
    </div>
  </div>

  <div class="flex justify-end p-3">
    <button class="btn me-2 bg-base text-white" (click)="modal?.dismiss()">
      {{ "close" | translate }}
    </button>
  </div>
</ng-template>

<!-- addSerivceModal / edit -->
<ng-template #addSerivceModal let-modal>
  <div
    style="background-color: var(--base-color)"
    class="modal-header text-white flex justify-between items-center"
  >
    <h4 class="m-0">
      <span class="text-2xl">
        {{ "AddNewService" | translate }}
      </span>
    </h4>
    <button
      type="button"
      class="text-2xl text-white m-0"
      (click)="modal.dismiss()"
    >
      <i class="fa-solid fa-xmark"></i>
    </button>
  </div>
  <!-- modal-body -->
  <div class="modal-body">
    <form [formGroup]="SerivceModalForm" >
      <div class="row items-center">
        <div class="col-sm-6 col-md-3 mb-3">
          <div class="form-group">
            <label class="col-form-label">
              {{ "Project Type" | translate }}</label
            >
            <span class="text-danger">*</span>
            <ng-select
              name="Project Type"
              class="w-full p-0"
              placeholder="{{ 'Chose' | translate }}" autocomplete="off"
              formControlName="ProjectType"
              (change)="FillProjectSubTypesSelect(this.SerivceModalForm.controls['ProjectType'].value)"
            >
              <ng-option *ngFor="let user of ProjectTypeList" [value]="user.id">{{
                user.name
              }}</ng-option>
            </ng-select>
            <div class="fieldrequired" *ngIf="
                      SerivceModalForm.controls['ProjectType']?.hasError('required') &&
                      SerivceModalForm.controls['ProjectType'].touched
                    ">
                    {{ "This field is required" | translate }}
                  </div>
          </div>
        </div>

        <div class="col-sm-6 col-md-3 mb-3">
          <button
            type="button"

            class="btn btn-success  mt-5 mb-2"
            (click)="open(NewProjectType , null , 'NewProjectType')"
            >
            {{ "AddNewProjectType" | translate }}
            <i class="fa-solid fa-plus"></i>
          </button>
        </div>

        <div class="col-sm-6 col-md-3 mb-3">
          <div class="form-group">
            <label class="col-form-label">
              {{ "Subproject type" | translate }}</label
            >
            <span class="text-danger">*</span>
            <ng-select
              name="Subproject type"
              class="w-full p-0"
              placeholder="{{ 'Chose' | translate }}"
              formControlName="SubprojectType" autocomplete="off"
            >

              <ng-option *ngFor="let user of SubprojecttypeList" [value]="user.id">{{
                user.name
              }}</ng-option>
            </ng-select>
            <div class="fieldrequired" *ngIf="
                      SerivceModalForm.controls['SubprojectType']?.hasError('required') &&
                      SerivceModalForm.controls['SubprojectType'].touched
                    ">
                    {{ "This field is required" | translate }}
                  </div>
          </div>
        </div>

        <div class="col-sm-6 col-md-3 mb-3">
          <button
            type="button"

            class="btn btn-success  mt-5 mb-2"
            (click)="open(SubprojectTypeModal , null , 'SubprojectTypeModal')"
            >
            {{ "AddNewSubgenre" | translate }}
            <i class="fa-solid fa-plus"></i>
          </button>
        </div>
        <div class="col-sm-6 col-md-3 mb-3"*ngIf="this.SerivceModalForm.controls['ProjectType'].value == 1">
          <div class="form-group">
            <label class="col-form-label">
              {{ "Packages" | translate }}</label
            >
            <ng-select
              name="Packages"
              class="w-full p-0"
              placeholder="{{ 'Chose' | translate }}"
              formControlName="PackageId" autocomplete="off"
            >

              <ng-option *ngFor="let user of packageList" [value]="user.id">{{
                user.name
              }}</ng-option>
            </ng-select>
            <!-- <div class="fieldrequired" *ngIf="
                      SerivceModalForm.controls['PackageId']?.hasError('required') &&
                      SerivceModalForm.controls['PackageId'].touched
                    ">
                    {{ "This field is required" | translate }}
                  </div> -->
          </div>
        </div>

        <div class="col-sm-6 col-md-3 mb-3">
          <button
            type="button"

            class="btn btn-success  mt-5 mb-2"
            (click)="open(PackagesModal , null , 'PackagesModal')"
            >
            {{ "AddNewPackages" | translate }}
            <i class="fa-solid fa-plus"></i>
          </button>
        </div>
        <!-- 2 -->
        <div class="col-sm-6 col-md-3 mb-3">
          <div class="form-group">
            <label class="col-form-label">
              {{ "ServiceName" | translate }}</label
            >
            <span class="text-danger">*</span>
            <input
              name="ServiceName"
              placeholder="{{ 'ServiceName' | translate }}"
              type="text"
              class="form-control"
              formControlName="ServiceName" autocomplete="off"
            />
            <div class="fieldrequired" *ngIf="
                      SerivceModalForm.controls['ServiceName']?.hasError('required') &&
                      SerivceModalForm.controls['ServiceName'].touched
                    ">
                    {{ "This field is required" | translate }}
                  </div>
          </div>
        </div>

        <div class="col-sm-6 col-md-3 mb-3">
          <div class="form-group">
            <label class="col-form-label">
              {{ "ServiceNameEN" | translate }}</label
            >
            <span class="text-danger">*</span>
            <input
              name="ServiceNameEN"
              placeholder="{{ 'ServiceNameEN' | translate }}"
              type="text"
              class="form-control"
              formControlName="ServiceNameEN" autocomplete="off"
            />
            <div class="fieldrequired" *ngIf="
                      SerivceModalForm.controls['ServiceNameEN']?.hasError('required') &&
                      SerivceModalForm.controls['ServiceNameEN'].touched
                    ">
                    {{ "This field is required" | translate }}
                  </div>
          </div>
        </div>

        <div class="col-sm-6 col-md-3 mb-3">
          <div class="form-group">
            <label class="col-form-label">
              {{ "ServiceType" | translate }}</label
            >
            <span class="text-danger">*</span>
            <ng-select
              name="ServiceType"
              class="w-full p-0"
              placeholder="{{ 'Chose' | translate }}" autocomplete="off"
              formControlName="ServiceType"
            >
              <ng-option *ngFor="let user of ServiceTypelist" [value]="user.id">{{
                user.name
              }}</ng-option>
            </ng-select>
            <div class="fieldrequired" *ngIf="
                      SerivceModalForm.controls['ServiceType']?.hasError('required') &&
                      SerivceModalForm.controls['ServiceType'].touched
                    ">
                    {{ "This field is required" | translate }}
                  </div>

          </div>
        </div>

        <div class="col-sm-6 col-md-3 mb-3" *ngIf="SerivceModalForm.controls['PackageId'].value ==  null">
          <div class="form-group">
            <label class="col-form-label"> {{ "price" | translate }}</label>
            <span class="text-danger">*</span>
            <div class="d-flex">
              <input
                name="price"
                placeholder="{{ 'price' | translate }}"
                type="text"
                class="form-control" autocomplete="off"
                formControlName="amount"
              />
              <SPAN class="me-1"> {{ "RS" | translate }}</SPAN>
            </div>
            <div class="fieldrequired" *ngIf="
                      SerivceModalForm.controls['amount']?.hasError('required') &&
                      SerivceModalForm.controls['amount'].touched
                    ">
                    {{ "This field is required" | translate }}
                  </div>
          </div>
        </div>

        <!-- 3 -->
        <div class="col-sm-6 col-md-3 mb-3">
          <div class="form-group">
            <label class="col-form-label">
              {{ "costCenter" | translate }}</label
            >
            <ng-select
              name="costCenter"
              class="w-full p-0"
              placeholder="{{ 'Chose' | translate }}"
              formControlName="costCenter" autocomplete="off"
            >
              <ng-option *ngFor="let user of CostCenterSelectlist" [value]="user.id">{{
                user.name
              }}</ng-option>
            </ng-select>
            <!-- <div class="fieldrequired" *ngIf="
                      SerivceModalForm.controls['costCenter']?.hasError('required') &&
                      SerivceModalForm.controls['costCenter'].touched
                    ">
                    {{ "This field is required" | translate }}
                  </div> -->
          </div>
        </div>
        <div class="col-sm-6 col-md-3 mb-3">
          <div class="form-group">
            <label class="col-form-label">
              {{ "ServiceRevenueAccount" | translate }}</label
            >
          <button
            type="button"

            class="btn btn-outline-success "
            (click)="open(costCenterModal ,null , 'costCenterModal')"
            >
            {{ "AddServiceDetails" | translate }}
            <i class="fa-solid fa-plus"></i>
          </button>
        </div>
      </div>

        <div class="col-sm-6 col-md-3 mb-3">
          <div class="form-group">
            <label class="col-form-label">
              {{ "ServiceRevenueAccount" | translate }}</label
            >
            <span class="text-danger">*</span>
            <ng-select
              name="ServiceRevenueAccount"
              class="w-full p-0"
              placeholder="{{ 'Chose' | translate }}" autocomplete="off"
              formControlName="ServiceRevenueAccount"
            >
              <ng-option *ngFor="let user of ServiceAccountlist" [value]="user.id">{{
                user.name
              }}</ng-option>
            </ng-select>
            <div class="fieldrequired" *ngIf="
                      SerivceModalForm.controls['ServiceRevenueAccount']?.hasError('required') &&
                      SerivceModalForm.controls['ServiceRevenueAccount'].touched
                    ">
                    {{ "This field is required" | translate }}
                  </div>
          </div>
        </div>
      </div>
    </form>
    <p class="w-fit bg-red-100 text-danger mx-auto my-3 p-1">
      {{ "AttentionAddService" | translate }}
    </p>
    <div
      class="flex gap-2 justify-end pt-3 border-t border-neutral-300 col-span-1 md:col-span-2 mt-2"
    >
      <button class="btn bg-base text-white" type="submit"(click)="SaveServicePriceWithDetails(modal)"   [disabled]='
      this.SerivceModalForm.controls["ProjectType"].value ==null||
      this.SerivceModalForm.controls["SubprojectType"].value ==null||
      this.SerivceModalForm.controls["ServiceName"].value ==null||
      this.SerivceModalForm.controls["ServiceNameEN"].value ==null||
      this.SerivceModalForm.controls["ServiceType"].value ==null||
      (this.SerivceModalForm.controls["amount"].value ==null&& this.SerivceModalForm.controls["PackageId"].value == null)||
      this.SerivceModalForm.controls["ServiceRevenueAccount"].value ==null'>
        {{ "Save" | translate }}
      </button>
      <button (click)="modal?.dismiss()" class="btn btn-secondary">
        {{ "close" | translate }}
      </button>
    </div>
  </div>
</ng-template>

<!-- NewProjectType -->
<ng-template #NewProjectType let-modal>
  <div
    style="background-color: var(--base-color)"
    class="modal-header text-white flex justify-between items-center"
  >
    <h4 class="m-0">
      <span class="text-2xl">
        <span>{{ "NewProjectType" | translate }}</span>
        <!-- <span *ngIf="modalDetails?.type == 'newSub'">{{ "NewSubprojectType" | translate }}</span>
        <span *ngIf="modalDetails?.type == 'ServiceDetails'">{{ "Add New Item" | translate }}</span> -->
      </span>
    </h4>
    <button
      type="button"
      class="text-2xl text-white m-0"
      (click)="modal.dismiss()"
    >
      <i class="fa-solid fa-xmark"></i>
    </button>
  </div>
  <div class="modal-body max-h-100 overflow-x-scroll overflow-y-scroll p-4">
    <form class="" #smsForm="ngForm">
      <div class="row align-items-end mb-4 mx-3">
        <!-- 1 line -->

        <div class="col-sm-6 col-md-3 col-lg-6 mb-0 mb-sm-3">
          <div class="form-group">
            <label for="nameAr" class="text-right col-form-label block">
              {{ "nameAr" | translate }}
              <span class="text-danger">*</span>
            </label>
            <input required class="form-control" autocomplete="off"  [placeholder]="('Write' | translate) + ' ' + ('nameAr' | translate)"
            [(ngModel)]="ProjectTypenameAr"  type="text"[ngModelOptions]="{standalone: true}" />
          </div>
        </div>
        <div class="col-sm-6 col-md-3 col-lg-6 mb-0 mb-sm-3">

        <div class="form-group">
          <label class="text-right col-form-label block">
            {{ "nameEn" | translate }}
            <span class="text-danger">*</span></label
          >
          <input
            class="form-control"
            [(ngModel)]="ProjectTypenameEn"autocomplete="off"
            type="text"[ngModelOptions]="{standalone: true}"
            [placeholder]="('Write' | translate) + ' ' + ('nameEn' | translate)"
          />
        </div>
      </div>


        <div class="col-sm-6 col-md-3 col-lg-12 mb-0 mb-sm-3 text-center">
          <button
            type="button"(click)="SaveProjectType()"[disabled]='ProjectTypenameEn==null || ProjectTypenameAr==null'
            class="flex gap-1 btn text-white mb-3 col-md-2 me-3"
            style="background-color: var(--base-color)"
          >
            {{ "save" | translate }}
          </button>

          <button
            type="button" (click)="modal.dismiss()"
            class="flex gap-1 btn btn-secondary mb-3 col-md-2"
          >
            {{ "close" | translate }}
          </button>
        </div>

        <div class="col-sm-6 col-md-3 col-lg-12 mb-0 mb-sm-3 text-center">
          <input
            name="dateCheck_transfer"(keyup)="applyFilterProjectType($event)"
            placeholder="{{ 'search' | translate }}"
            type="text"
            class="form-control"
          />
        </div>
      </div>

      <div class="editable shadow mb-4">
        <table
          class="table table-responsive table-striped table-bordered text-center"
          style="vertical-align: middle; font-size: 14px"
        >
          <thead
            class="bg-base text-white"
            style="line-height: 30px; font-size: 13px"
          >
            <tr>
              <th>{{ "nameAr" | translate }}</th>
              <th>{{ "nameEn" | translate }}</th>
              <th>{{ "operations" | translate }}</th>
              <!-- <th   *ngIf="modalDetails?.type == 'newSub'" >{{ "ApproximatePeriod" | translate }}</th> -->
            </tr>
          </thead>
          <tbody>
            <tr
              *ngFor="let item of AllProjectTypelist; let i = index"
              style="line-height: 15px"
            >
              <td>{{item.nameAr}}
              </td>
              <td>{{item.nameEn}}
              </td>
              <td>
                <button (click)="updateProjectType(item)"
                  class="p-2 bg-orange-100 hover:bg-orange-500 rounded-lg duration-300 hover:text-white w-10"
                >
                  <i class="fa-regular fa-pen-to-square"></i>
                </button>

                <button
                  class="p-2 bg-red-100 hover:bg-red-500 rounded-lg duration-300 hover:text-white w-10 me-3"
                  (click)="open(deleteProjectTypeModal,item,'deleteProjectTypeModal')"
                >
                  <i class="fa-solid fa-trash-can"></i>
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </form>
  </div>

  <!-- <div class="flex justify-end p-3">
    <button
      (click)="modal?.dismiss()"
      class="btn text-white"
      style="background-color: var(--base-color)"
    >
      {{ "save" | translate }}
    </button>

    <button class="btn me-2 btn-secondary">
      {{ "close" | translate }}
    </button>
  </div> -->
</ng-template>
<!-- deleteProjectTypeModal -->
<ng-template #deleteProjectTypeModal let-modal>
  <div class="modal-body text-center">
    <p
      [translate]="'name'"
      [translateParams]="{
        ar: 'هل تريد حذف هذا العنصر ؟',
        en: 'Do you want to delete this item?'
      }"
    ></p>
    <div class="flex gap-2 justify-center">
      <button
        type="button"
        (click)="modal.dismiss()"
        mat-raised-button
        color="basic"
      >
        {{ "close" | translate }}
      </button>

      <button
        type="button"
        mat-raised-button
        color="warn"
        (click)="DeleteProjectType(modal); "
      >
        {{ "confirem" | translate }}
      </button>
    </div>
  </div>
</ng-template>



<!-- SubprojectTypeModal -->
<ng-template #SubprojectTypeModal let-modal>
  <div
    style="background-color: var(--base-color)"
    class="modal-header text-white flex justify-between items-center"
  >
    <h4 class="m-0">
      <span class="text-2xl">
        <span >{{ "NewSubprojectType" | translate }}</span>
       <!--  <span *ngIf="modalDetails?.type == 'ServiceDetails'">{{ "Add New Item" | translate }}</span> -->
      </span>
    </h4>
    <button
      type="button"
      class="text-2xl text-white m-0"
      (click)="modal.dismiss()"
    >
      <i class="fa-solid fa-xmark"></i>
    </button>
  </div>
  <div class="modal-body max-h-100 overflow-x-scroll overflow-y-scroll p-4">
    <form class="" #smsForm="ngForm">
      <div class="row align-items-end mb-4 mx-3">
        <!-- 1 line -->

        <div class="col-sm-6 col-md-3 col-lg-6 mb-0 mb-sm-3">
          <div class="form-group">
            <label for="nameAr" class="text-right col-form-label block">
              {{ "nameAr" | translate }}
              <span class="text-danger">*</span>
            </label>
            <input required class="form-control" autocomplete="off"  [placeholder]="('Write' | translate) + ' ' + ('nameAr' | translate)"
            [(ngModel)]="SubprojectTypenameAr"  type="text"[ngModelOptions]="{standalone: true}" />
          </div>
        </div>

        <div class="col-sm-6 col-md-3 col-lg-6 mb-0 mb-sm-3">
        <div class="form-group">
          <label class="text-right col-form-label block">
            {{ "nameEn" | translate }}
            <span class="text-danger">*</span></label
          >
          <input
            class="form-control"
            [(ngModel)]="SubprojectTypenameEn"autocomplete="off"
            type="text"[ngModelOptions]="{standalone: true}"
            [placeholder]="('Write' | translate) + ' ' + ('nameEn' | translate)"
          />
        </div>
      </div>
      <div class="col-sm-6 col-md-3 col-lg-6 mb-0 mb-sm-3">
        <div class="form-group">
          <label class="text-right col-form-label block">
            {{ "TimePeriodStr" | translate }}</label
          >
          <input
            class="form-control"
            [(ngModel)]="TimePeriodStr"autocomplete="off"
            type="text"[ngModelOptions]="{standalone: true}"
            [placeholder]="('Write' | translate) + ' ' + ('TimePeriodStr' | translate)"
          />
        </div>
      </div>

        <div class="col-sm-6 col-md-3 col-lg-12 mb-0 mb-sm-3 text-center">
          <button
            type="button"(click)="SaveSubprojectType()"[disabled]='SubprojectTypenameAr==null || SubprojectTypenameEn==null'
            class="flex gap-1 btn text-white mb-3 col-md-2 me-3"
            style="background-color: var(--base-color)"
          >
            {{ "save" | translate }}
          </button>

          <button
            type="button" (click)="modal.dismiss()"
            class="flex gap-1 btn btn-secondary mb-3 col-md-2"
          >
            {{ "close" | translate }}
          </button>
        </div>

        <div class="col-sm-6 col-md-3 col-lg-12 mb-0 mb-sm-3 text-center">
          <input
            name="dateCheck_transfer"(keyup)="applyFilterSubsByProjectTypeId($event)"
            placeholder="{{ 'search' | translate }}"
            type="text"
            class="form-control"
          />
        </div>
      </div>

      <div class="editable shadow mb-4">
        <table
          class="table table-responsive table-striped table-bordered text-center"
          style="vertical-align: middle; font-size: 14px"
        >
          <thead
            class="bg-base text-white"
            style="line-height: 30px; font-size: 13px"
          >
            <tr>
              <th>{{ "nameAr" | translate }}</th>
              <th>{{ "nameEn" | translate }}</th>
              <th>{{ "TimePeriodStr" | translate }}</th>
              <th>{{ "operations" | translate }}</th>
              <!-- <th   *ngIf="modalDetails?.type == 'newSub'" >{{ "ApproximatePeriod" | translate }}</th> -->
            </tr>
          </thead>
          <tbody>
            <tr
              *ngFor="let item of AllProjectSubsByProjectTypelist; let i = index"
              style="line-height: 15px"
            >
              <td>{{item.nameAr}}
              </td>
              <td>{{item.nameEn}}
              </td>
              <td>
                {{item.timePeriodStr}}
              </td>
              <td>
                <button (click)="updateSubprojectType(item)"
                  class="p-2 bg-orange-100 hover:bg-orange-500 rounded-lg duration-300 hover:text-white w-10"
                >
                  <i class="fa-regular fa-pen-to-square"></i>
                </button>

                <button
                  class="p-2 bg-red-100 hover:bg-red-500 rounded-lg duration-300 hover:text-white w-10 me-3"
                  (click)="open(deleteSubprojectTypeModal,item,'deleteSubprojectTypeModal')"
                >
                  <i class="fa-solid fa-trash-can"></i>
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </form>
  </div>

  <!-- <div class="flex justify-end p-3">
    <button
      (click)="modal?.dismiss()"
      class="btn text-white"
      style="background-color: var(--base-color)"
    >
      {{ "save" | translate }}
    </button>

    <button class="btn me-2 btn-secondary">
      {{ "close" | translate }}
    </button>
  </div> -->
</ng-template>
<!-- deleteSubprojectTypeModal -->
<ng-template #deleteSubprojectTypeModal let-modal>
  <div class="modal-body text-center">
    <p
      [translate]="'name'"
      [translateParams]="{
        ar: 'هل تريد حذف هذا العنصر ؟',
        en: 'Do you want to delete this item?'
      }"
    ></p>
    <div class="flex gap-2 justify-center">
      <button
        type="button"
        (click)="modal.dismiss()"
        mat-raised-button
        color="basic"
      >
        {{ "close" | translate }}
      </button>

      <button
        type="button"
        mat-raised-button
        color="warn"
        (click)="DeleteProjectSubTypes(modal); "
      >
        {{ "confirem" | translate }}
      </button>
    </div>
  </div>
</ng-template>


<!-- PackagesModal -->
<ng-template #PackagesModal let-modal>
  <div
    style="background-color: var(--base-color)"
    class="modal-header text-white flex justify-between items-center"
  >
    <h4 class="m-0">
      <span class="text-2xl">
        <span >{{ "Packages" | translate }}</span>
      </span>
    </h4>
    <button
      type="button"
      class="text-2xl text-white m-0"
      (click)="modal.dismiss()"
    >
      <i class="fa-solid fa-xmark"></i>
    </button>
  </div>
  <div class="modal-body max-h-100 overflow-x-scroll overflow-y-scroll p-4">
    <form class="" #smsForm="ngForm">
      <div class="row align-items-end mb-4 mx-3">
        <!-- 1 line -->

        <div class="col-sm-6 col-md-3 col-lg-6 mb-0 mb-sm-3">
          <div class="form-group">
            <label for="nameAr" class="text-right col-form-label block">
              {{ "PackageName" | translate }}
              <span class="text-danger">*</span>
            </label>
            <input required class="form-control" autocomplete="off"  [placeholder]="('Write' | translate) + ' ' + ('PackageName' | translate)"
            [(ngModel)]="PackageName"  type="text"[ngModelOptions]="{standalone: true}" />
          </div>
        </div>

        <div class="col-sm-6 col-md-3 col-lg-6 mb-0 mb-sm-3">
        <div class="form-group">
          <label class="text-right col-form-label block">
            {{ "MeterPrice1" | translate }}
            <span class="text-danger">*</span></label
          >
          <input
            class="form-control"
            [(ngModel)]="MeterPrice1"autocomplete="off"
            type="text"[ngModelOptions]="{standalone: true}"
            [placeholder]="('Write' | translate) + ' ' + ('MeterPrice1' | translate)"
          />
        </div>
      </div>
      <div class="col-sm-6 col-md-3 col-lg-6 mb-0 mb-sm-3">
        <div class="form-group">
          <label class="text-right col-form-label block">
            {{ "MeterPrice2" | translate }}</label
          >
          <input
            class="form-control"
            [(ngModel)]="MeterPrice2"autocomplete="off"
            type="text"[ngModelOptions]="{standalone: true}"
            [placeholder]="('Write' | translate) + ' ' + ('MeterPrice2' | translate)"
          />
        </div>
      </div>
      <div class="col-sm-6 col-md-3 col-lg-6 mb-0 mb-sm-3">
        <div class="form-group">
          <label class="text-right col-form-label block">
            {{ "MeterPrice3" | translate }}</label
          >
          <input
            class="form-control"
            [(ngModel)]="MeterPrice3"autocomplete="off"
            type="text"[ngModelOptions]="{standalone: true}"
            [placeholder]="('Write' | translate) + ' ' + ('MeterPrice3' | translate)"
          />
        </div>
      </div>
      <div class="col-sm-6 col-md-3 col-lg-6 mb-0 mb-sm-3">
        <div class="form-group">
          <label class="text-right col-form-label block">
            {{ "PackageRatio1" | translate }}</label
          >
          <input
            class="form-control"
            [(ngModel)]="PackageRatio1"autocomplete="off"
            type="text"[ngModelOptions]="{standalone: true}"
            [placeholder]="('Write' | translate) + ' ' + ('PackageRatio1' | translate)"
          />
        </div>
      </div>
      <div class="col-sm-6 col-md-3 col-lg-6 mb-0 mb-sm-3">
        <div class="form-group">
          <label class="text-right col-form-label block">
            {{ "PackageRatio2" | translate }}</label
          >
          <input
            class="form-control"
            [(ngModel)]="PackageRatio2"autocomplete="off"
            type="text"[ngModelOptions]="{standalone: true}"
            [placeholder]="('Write' | translate) + ' ' + ('PackageRatio2' | translate)"
          />
        </div>
      </div>
      <div class="col-sm-6 col-md-3 col-lg-6 mb-0 mb-sm-3">
        <div class="form-group">
          <label class="text-right col-form-label block">
            {{ "PackageRatio3" | translate }}</label
          >
          <input
            class="form-control"
            [(ngModel)]="PackageRatio3"autocomplete="off"
            type="text"[ngModelOptions]="{standalone: true}"
            [placeholder]="('Write' | translate) + ' ' + ('PackageRatio3' | translate)"
          />
        </div>
      </div>
        <div class="col-sm-6 col-md-3 col-lg-12 mb-0 mb-sm-3 text-center">
          <button
            type="button"(click)="SavePackages()"[disabled]='PackageRatio3==null || PackageRatio2==null|| PackageRatio1==null|| MeterPrice3==null|| MeterPrice2==null
            || MeterPrice1==null|| PackageName==null'
            class="flex gap-1 btn text-white mb-3 col-md-2 me-3"
            style="background-color: var(--base-color)"
          >
            {{ "save" | translate }}
          </button>

          <button
            type="button" (click)="modal.dismiss()"
            class="flex gap-1 btn btn-secondary mb-3 col-md-2"
          >
            {{ "close" | translate }}
          </button>
        </div>

        <div class="col-sm-6 col-md-3 col-lg-12 mb-0 mb-sm-3 text-center">
          <input
            name="dateCheck_transfer"(keyup)="applyFilterPackages($event)"
            placeholder="{{ 'search' | translate }}"
            type="text"
            class="form-control"
          />
        </div>
      </div>

      <div class="editable shadow mb-4">
        <table
          class="table table-responsive table-striped table-bordered text-center"
          style="vertical-align: middle; font-size: 14px"
        >
          <thead
            class="bg-base text-white"
            style="line-height: 30px; font-size: 13px"
          >
            <tr>
              <th>{{ "PackageName" | translate }}</th>
              <th>{{ "operations" | translate }}</th>
              <!-- <th   *ngIf="modalDetails?.type == 'newSub'" >{{ "ApproximatePeriod" | translate }}</th> -->
            </tr>
          </thead>
          <tbody>
            <tr
              *ngFor="let item of AllPackageslist; let i = index"
              style="line-height: 15px"
            >
              <td>{{item.packageName}}
              </td>
              <td>
                <button (click)="updatePackages(item)"
                  class="p-2 bg-orange-100 hover:bg-orange-500 rounded-lg duration-300 hover:text-white w-10"
                >
                  <i class="fa-regular fa-pen-to-square"></i>
                </button>

                <button
                  class="p-2 bg-red-100 hover:bg-red-500 rounded-lg duration-300 hover:text-white w-10 me-3"
                  (click)="open(deletePackagesModal,item,'deletePackagesModal')"
                >
                  <i class="fa-solid fa-trash-can"></i>
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </form>
  </div>

  <!-- <div class="flex justify-end p-3">
    <button
      (click)="modal?.dismiss()"
      class="btn text-white"
      style="background-color: var(--base-color)"
    >
      {{ "save" | translate }}
    </button>

    <button class="btn me-2 btn-secondary">
      {{ "close" | translate }}
    </button>
  </div> -->
</ng-template>
<!-- deletePackagesModal -->
<ng-template #deletePackagesModal let-modal>
  <div class="modal-body text-center">
    <p
      [translate]="'name'"
      [translateParams]="{
        ar: 'هل تريد حذف هذا العنصر ؟',
        en: 'Do you want to delete this item?'
      }"
    ></p>
    <div class="flex gap-2 justify-center">
      <button
        type="button"
        (click)="modal.dismiss()"
        mat-raised-button
        color="basic"
      >
        {{ "close" | translate }}
      </button>

      <button
        type="button"
        mat-raised-button
        color="warn"
        (click)="DeletePackages(modal); "
      >
        {{ "confirem" | translate }}
      </button>
    </div>
  </div>
</ng-template>


<!-- costCenterModal -->
<ng-template #costCenterModal let-modal>
  <div
    style="background-color: var(--base-color)"
    class="modal-header text-white flex justify-between items-center"
  >
    <h4 class="m-0">
      <span class="text-2xl">
        <span>{{ "AddServiceDetails" | translate }}</span>
      </span>
    </h4>
    <button
      type="button"
      class="text-2xl text-white m-0"
      (click)="modal.dismiss()"
    >
      <i class="fa-solid fa-xmark"></i>
    </button>
  </div>
  <div class="modal-body max-h-100 overflow-x-scroll overflow-y-scroll p-4">
    <form class="" #smsForm="ngForm">
      <div class="row align-items-end mb-4 mx-3">
        <!-- 1 line -->

        <div class="col-sm-6 col-md-3 col-lg-6 mb-0 mb-sm-3">
          <div class="form-group">
            <label for="nameAr" class="text-right col-form-label block">
              {{ "nameAr" | translate }}
              <span class="text-danger">*</span>
            </label>
            <input required class="form-control" autocomplete="off"  [placeholder]="('Write' | translate) + ' ' + ('nameAr' | translate)"
            [(ngModel)]="servicesName"  type="text"[ngModelOptions]="{standalone: true}" />
          </div>
        </div>
        <div class="col-sm-6 col-md-3 col-lg-6 mb-0 mb-sm-3">

        <div class="form-group">
          <label class="text-right col-form-label block">
            {{ "nameEn" | translate }}
            <span class="text-danger">*</span></label
          >
          <input
            class="form-control"
            [(ngModel)]="accountName"autocomplete="off"
            type="text"[ngModelOptions]="{standalone: true}"
            [placeholder]="('Write' | translate) + ' ' + ('nameEn' | translate)"
          />
        </div>
      </div>


        <div class="col-sm-6 col-md-3 col-lg-12 mb-0 mb-sm-3 text-center">
          <button
            type="button"(click)="SavecostCenter()"[disabled]='accountName==null || servicesName==null'
            class="flex gap-1 btn text-white mb-3 col-md-2 me-3"
            style="background-color: var(--base-color)"
          >
            {{ "add" | translate }}
          </button>

          <button
            type="button" (click)="modal.dismiss()"
            class="flex gap-1 btn btn-secondary mb-3 col-md-2"
          >
            {{ "close" | translate }}
          </button>
        </div>

        <!-- <div class="col-sm-6 col-md-3 col-lg-12 mb-0 mb-sm-3 text-center">
          <input
            name="dateCheck_transfer"(keyup)="applyFiltercostCenter($event)"
            placeholder="{{ 'search' | translate }}"
            type="text"
            class="form-control"
          />
        </div> -->
      </div>

      <div class="editable shadow mb-4">
        <table
          class="table table-responsive table-striped table-bordered text-center"
          style="vertical-align: middle; font-size: 14px"
        >
          <thead
            class="bg-base text-white"
            style="line-height: 30px; font-size: 13px"
          >
            <tr>
              <th>{{ "nameAr" | translate }}</th>
              <th>{{ "nameEn" | translate }}</th>
              <th>{{ "operations" | translate }}</th>
              <!-- <th   *ngIf="modalDetails?.type == 'newSub'" >{{ "ApproximatePeriod" | translate }}</th> -->
            </tr>
          </thead>
          <tbody>
            <tr
              *ngFor="let item of AllcostCenterlist; let i = index"
              style="line-height: 15px"
            >
              <td>{{item.servicesName}}
              </td>
              <td>{{item.accountName}}
              </td>
              <td>
                <button (click)="updatecostCenter(item)"
                  class="p-2 bg-orange-100 hover:bg-orange-500 rounded-lg duration-300 hover:text-white w-10"
                >
                  <i class="fa-regular fa-pen-to-square"></i>
                </button>

                <button
                  class="p-2 bg-red-100 hover:bg-red-500 rounded-lg duration-300 hover:text-white w-10 me-3"
                  (click)="open(deletecostCenterModal,item,'deletecostCenterModal',i)"
                >
                  <i class="fa-solid fa-trash-can"></i>
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </form>
  </div>

  <!-- <div class="flex justify-end p-3">
    <button
      (click)="modal?.dismiss()"
      class="btn text-white"
      style="background-color: var(--base-color)"
    >
      {{ "save" | translate }}
    </button>

    <button class="btn me-2 btn-secondary">
      {{ "close" | translate }}
    </button>
  </div> -->
</ng-template>
<!-- deletecostCenterModal -->
<ng-template #deletecostCenterModal let-modal>
  <div class="modal-body text-center">
    <p
      [translate]="'name'"
      [translateParams]="{
        ar: 'هل تريد حذف هذا العنصر ؟',
        en: 'Do you want to delete this item?'
      }"
    ></p>
    <div class="flex gap-2 justify-center">
      <button
        type="button"
        (click)="modal.dismiss()"
        mat-raised-button
        color="basic"
      >
        {{ "close" | translate }}
      </button>

      <button
        type="button"
        mat-raised-button
        color="warn"
        (click)="DeleteService(modal); "
      >
        {{ "confirem" | translate }}
      </button>
    </div>
  </div>
</ng-template>

