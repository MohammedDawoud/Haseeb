<div class="add-search pb-4">
  <app-navigator [title]="title"></app-navigator>

  <div class="tables-data mt-3 overflow-hidden">
    <div class="btn-group gap-2 flex-wrap">
      <label
        class="btn btn-primary"
        [(ngModel)]="data.type"
        (click)="setCustomersType(0)"
        btnRadio="0"
        tabindex="0"
        role="button"
        ><i class="fa-solid fa-users"></i>
        <span
          class="text-sm"
          [translate]="'name'"
          [translateParams]="{
            ar: 'كل العملاء ',
            en: 'All Customer Badge'
          }"
        ></span>
        <span class="text-xs">{{ allCount }}</span></label
      >

      <label
        class="btn btn-primary"
        value=""
        id="allCustomers"
        [(ngModel)]="data.type"
        (click)="setCustomersType(1)"
        btnRadio="1"
        tabindex="0"
        role="button"
        (change)="checkValue(data2.filter.isChecked ? 'A' : 'B')"
      >
        <i class="fa fa-user-group text-sm"></i>

        <span
          class="text-sm"
          [translate]="'name'"
          [translateParams]="{
            ar: 'المواطنون',
            en: 'Citizens'
          }"
        ></span>
        <span class="text-xs">{{ CitizensCount }}</span></label
      >
      <label
        class="btn btn-primary"
        [(ngModel)]="data.type"
        (click)="setCustomersType(2)"
        btnRadio="2"
        tabindex="0"
        role="button"
      >
        <i class="fa fa-building text-sm"></i>
        <span
          class="text-sm"
          [translate]="'name'"
          [translateParams]="{
            ar: ' مستثمرون وشركات',
            en: ' Investor Company Badge  '
          }"
        ></span>
        <span class="text-xs">{{ InvestorCompanyCount }}</span></label
      >
      <label
        class="btn btn-primary"
        [(ngModel)]="data.type"
        (click)="setCustomersType(3)"
        btnRadio="3"
        tabindex="0"
        role="button"
      >
        <i class="fa fa-city"></i>
        <span
          class="text-sm"
          [translate]="'name'"
          [translateParams]="{
            ar: 'جهة حكومية',
            en: 'Government Badge'
          }"
        ></span>
        <span class="text-xs">{{ governmentCount }}</span></label
      >
    </div>

    <!-- buttons -->
    <div class="flex justify-between gap-2 items-center my-3 flex-wrap">
      <div class="w-fit">
        <input
          class="form-control"
          (keyup)="applyFilter($event)"
          placeholder="{{ 'search' | translate }}"
          #input
        />
      </div>

      <!---------------------------------------------------------------------------->
      <button
        class="min-w-max p-2 bg-green-100 hover:bg-green-500 rounded-lg duration-300 hover:text-white aspect-square w-10"
        (click)="uploadedFiles = []"
        (click)="openModal(sendMessage, null, 'sendEmails')"
        [disabled]="OrganizationData?.sendCustomerMail != true"
      >
        <i
          class="fa-solid fa-at"
          [title]="
            OrganizationData?.sendCustomerMail != true
              ? 'ايميل المنشأة غير مفعل'
              : 'ارسال ميل'
          "
        ></i>
      </button>
      <span
        *ngIf="OrganizationData?.sendCustomerMail != true"
        style="color: red; margin-right: -60px"
        >ايميل المنشأة غير مفعل</span
      >
      <span
        *ngIf="OrganizationData?.sendCustomerMail == true"
        style="color: green; margin-right: -60px"
        >ايميل المنشأة جاهز للارسال</span
      >
      <button
        class="min-w-max p-2 bg-blue-100 hover:bg-blue-500 rounded-lg duration-300 hover:text-white aspect-square w-10"
        (click)="openModal(sendMessage, null, 'sendSmss')"
        [disabled]="OrganizationData?.sendCustomerSMS != true"
      >
        <i
          class="fa-solid fa-comment-sms"
          [title]="
            OrganizationData?.sendCustomerSMS != true
              ? 'خدمة لرسال غير مفعل'
              : 'ارسال رساله'
          "
        ></i>
      </button>
      <span
        *ngIf="OrganizationData?.sendCustomerSMS != true"
        style="color: red; margin-right: -60px"
      >
        خدمة الرسائل غير مفعل / او لا يوجد رصيد</span
      >
      <span
        *ngIf="OrganizationData?.sendCustomerSMS == true"
        style="color: green; margin-right: -60px"
        >خدمة الرسائل جاهز للارسال</span
      >
      <div class="flex gap-2 controler">
        <button
          *ngIf="userG?.userPrivileges.includes(121001)"
          class="flex gap-1 btn btn-primary"
          (click)="openModal(dataModal, null, 'addClient')"
        >
          <span
            class="hidden md:block"
            [translate]="'name'"
            [translateParams]="{
              ar: 'عميل جديد ',
              en: 'New Customer '
            }"
          ></span>
          <i class="fa-solid fa-user-plus"></i>
        </button>
        <button
          *ngIf="userG?.userPrivileges.includes(121004)"
          class="flex gap-1 btn btn-secondary"
          id="Searchbtn"
          (click)="searchBox.open = !searchBox.open; resetandRefresh()"
        >
          <span
            class="hidden md:block"
            [translate]="'name'"
            [translateParams]="{
              ar: 'بحث',
              en: 'Search'
            }"
          >
          </span>
          <i class="fa-solid fa-user-tag"></i>
        </button>
        <button
          *ngIf="userG?.userPrivileges.includes(121009)"
          class="flex gap-1 btn btn-warning"
          (click)="exportData()"
        >
          <span
            class="hidden md:block"
            [translate]="'name'"
            [translateParams]="{
              ar: 'تصدير ملف إكسل',
              en: 'Export To Excel'
            }"
          ></span>
          <i class="fa-solid fa-file-export"></i>
        </button>
      </div>
    </div>

    <!-- search box -->

    <form
      class="flex flex-wrap gap-2 items-end my-3"
      #searchForm="ngForm"
      *ngIf="searchBox.open"
    >
      <div class="flex-grow">
        <label
          [translate]="'name'"
          [translateParams]="{
            ar: 'نوع البحث',
            en: 'Search Type'
          }"
        >
        </label>
        <ng-select
          class="w-full p-0 mt-2.5"
          (change)="onChange($event)"
          placeholder="{{ 'Chose' | translate }}"
        >
          <ng-option [value]="1">
            {{ "Customer Name" | translate }}
          </ng-option>

          <!-- <ng-option [value]="2">
            {{ "Email" | translate }}
          </ng-option> -->

          <ng-option [value]="3">
            {{ "Mobile Number" | translate }}
          </ng-option>
        </ng-select>
      </div>

      <div class="max-w-xs" *ngIf="searchBox.searchType == 1">
        <label class="col-form-label"> {{ "Customer Name" | translate }}</label>

        <ng-select
          #CustomerName
          [items]="load_CustomerName"
          bindLabel="name"
          bindValue="id"
          [clearable]="true"
          class="w-full p-0"
          [(ngModel)]="data2.filter.search_CustomerName"
          placeholder="{{ 'Chose' | translate }}"
          (change)="RefreshData()"
          [ngModelOptions]="{ standalone: true }"
        >
        </ng-select>
      </div>

      <!-- <div class="max-w-xs" *ngIf="searchBox.searchType == 2">
        <label class="col-form-label"> {{ "Email" | translate }}</label>

        <ng-select #ProjectType [items]="load_CustomerMail" bindLabel="customerMail" bindValue="customerMail" [clearable]="true"
          class="w-full p-0" [(ngModel)]="data2.filter.search_customerEmail" [ngModelOptions]="{ standalone: true }"
          (change)="RefreshData()" placeholder="{{ 'Chose' | translate }}" >
        </ng-select>
      </div> -->

      <div class="max-w-xs" *ngIf="searchBox.searchType == 3">
        <label class="col-form-label"> {{ "Mobile Number" | translate }}</label>

        <ng-select
          #ProjectManeger
          [items]="load_CustomerMobile"
          bindLabel="customerMobile"
          bindValue="customerMobile"
          [clearable]="true"
          class="w-full p-0"
          [(ngModel)]="data2.filter.search_customerMobile"
          [ngModelOptions]="{ standalone: true }"
          (change)="RefreshData()"
          placeholder="{{ 'Chose' | translate }}"
        >
        </ng-select>
      </div>

      <!-- <button class="flex gap-1 btn btn-secondary" style="display: flex" id="SearchRefresh" (click)="RefreshData()">
        <span class="hidden md:block" [translate]="'name'" [translateParams]="{
            ar: 'بحث',
            en: 'Search'
          }">
        </span>
        <i class="fa-solid fa-user-tag"></i>
      </button> -->
    </form>

    <!-- table -->
    <div class="overflow-auto">
      <table
        mat-table
        [dataSource]="dataSource"
        matSort
        class="mat-elevation-z8 rounded-t-lg overflow-hidden w-max"
      >
        <!-- name Column -->
        <ng-container matColumnDef="name">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span
              [translate]="'name'"
              [translateParams]="{
                ar: 'اسم العميل',
                en: 'Client'
              }"
            ></span>
          </th>
          <td mat-cell *matCellDef="let element">
            {{ element.customerName }}
          </td>
        </ng-container>

        <!-- nationalId Column -->
        <ng-container matColumnDef="nationalId">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span
              [translate]="'name'"
              [translateParams]="{
                ar: 'رقم الهوية',
                en: 'National Number'
              }"
            ></span>
          </th>
          <td mat-cell *matCellDef="let element">
            {{ element.customerNationalId }}
          </td>
        </ng-container>

        <!-- customerType Column -->
        <ng-container matColumnDef="customerType">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span
              [translate]="'name'"
              [translateParams]="{
                ar: 'نوع العميل',
                en: 'CustomerType'
              }"
            ></span>
          </th>
          <td mat-cell *matCellDef="let element">
            {{ element.customerTypeName }}
          </td>
        </ng-container>
        <!-- email Column -->
        <ng-container matColumnDef="email">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span
              [translate]="'name'"
              [translateParams]="{
                ar: 'البريد الالكتروني',
                en: 'Email'
              }"
            ></span>
          </th>
          <td mat-cell *matCellDef="let element">
            {{ element.customerEmail }}
          </td>
        </ng-container>
        <!-- phone Column -->
        <ng-container matColumnDef="phone">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span
              [translate]="'name'"
              [translateParams]="{
                ar: 'رقم الهاتف',
                en: 'Phone Number'
              }"
            ></span>
          </th>
          <td mat-cell *matCellDef="let element">
            {{ element.customerPhone }}
          </td>
        </ng-container>
        <!-- mobile Column -->
        <ng-container matColumnDef="mobile">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span
              [translate]="'name'"
              [translateParams]="{
                ar: 'رقم الجوال',
                en: 'Mobile Number'
              }"
            ></span>
          </th>
          <td mat-cell *matCellDef="let element">
            {{ element.customerMobile }}
          </td>
        </ng-container>
        <!-- operations Column -->
        <ng-container matColumnDef="operations">
          <th
            mat-header-cell
            *matHeaderCellDef
            [translate]="'name'"
            [translateParams]="{
              ar: 'خيارات',
              en: 'Operations'
            }"
          ></th>
          <td mat-cell *matCellDef="let element">
            <div class="flex gap-1 justify-center py-2">
              <button
                *ngIf="userG?.userPrivileges.includes(121003)"
                class="min-w-max p-2 bg-orange-100 hover:bg-orange-500 rounded-lg duration-300 hover:text-white aspect-square w-10"
                (click)="openModal(dataModal, element, 'editClient')"
              >
                <i class="fa-regular fa-pen-to-square"></i>
              </button>
              <button
                *ngIf="userG?.userPrivileges.includes(121002)"
                class="min-w-max p-2 bg-red-100 hover:bg-red-500 rounded-lg duration-300 hover:text-white aspect-square w-10"
                (click)="openModal(deleteModal, element, 'delete')"
              >
                <i class="fa-solid fa-trash-can"></i>
              </button>
              <button
                *ngIf="
                  element.customerEmail &&
                  userG?.userPrivileges.includes(121006)
                "
                class="min-w-max p-2 bg-green-100 hover:bg-green-500 rounded-lg duration-300 hover:text-white aspect-square w-10"
                (click)="
                  setCustomerid_P(element.customerId);
                  open(sendEmail, element, 'sendEmail');
                  uploadedFiles = []
                "
                [disabled]="OrganizationData?.sendCustomerMail != true"
              >
                <i
                  class="fa-solid fa-at"
                  [title]="
                    OrganizationData?.sendCustomerMail != true
                      ? 'ايميل المنشأة غير مفعل'
                      : 'ارسال ميل'
                  "
                ></i>
              </button>
              <button
                *ngIf="
                  element.customerMobile &&
                  userG?.userPrivileges.includes(121007)
                "
                class="min-w-max p-2 bg-blue-100 hover:bg-blue-500 rounded-lg duration-300 hover:text-white aspect-square w-10"
                (click)="
                  setCustomerid_P(element.customerId);
                  open(sendSms, element, 'sendSms')
                "
                [disabled]="OrganizationData?.sendCustomerSMS != true"
              >
                <i
                  class="fa-solid fa-comment-sms"
                  [title]="
                    OrganizationData?.sendCustomerSMS != true
                      ? 'خدمة لرسال غير مفعل'
                      : 'ارسال رساله'
                  "
                ></i>
              </button>
              <button
                class="min-w-max p-2 bg-sky-100 hover:bg-sky-500 rounded-lg duration-300 hover:text-white aspect-square w-10"
                (click)="
                  control.clear();
                  setCustomerid_P(element.customerId);
                  open(addFile, element, 'addFile')
                "
              >
                <i class="fa-solid fa-upload"></i>
              </button>
            </div>
          </td>
        </ng-container>

        <!-- Symbol Column -->

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>

        <tr
          mat-row
          *matRowDef="let row; columns: displayedColumns"
          class="duration-300 hover:bg-slate-100"
        ></tr>
        <!-- Row shown when there is no matching data. -->
        <tr class="mat-row" *matNoDataRow>
          <td class="mat-cell" colspan="4">
            {{ "No result found for " }} "{{ input.value }}"
          </td>
        </tr>
      </table>
    </div>
    <mat-paginator [pageSizeOptions]="[10, 25, 100, dataSource.data.length]">
    </mat-paginator>
  </div>

  <!-- modals  -->
  <ng-template #dataModal>
    <div
      style="background-color: var(--base-color)"
      class="modal-header text-white flex justify-between items-center"
    >
      <h4 class="m-0">
        <span class="text-2xl">{{ modalDetails.type | translate }}</span>
      </h4>
      <button
        type="button"
        class="text-2xl text-white m-0"
        (click)="modal?.hide()"
      >
        <i class="fa-solid fa-xmark"></i>
      </button>
    </div>
    <div class="modal-body">
      <ng-container>
        <form class="modal-form" addForm="ngForm">
          <div class="mb-3" *ngIf="!(modalDetails.customerId > 0)">
            <div class="form-inline d-flex align-items-center col-span-4">
              <div
                class="btn-group gap-2 flex-wrap"
                [ngModelOptions]="{ standalone: true }"
                btnRadioGroup
                [(ngModel)]="modalDetails.customerTypeId"
                (click)="TablClick()"
              >
                <label class="btn bg-base text-white mb-0" btnRadio="1">
                  <i class="fa fa-user-group text-sm"></i>
                  <span
                    class="text-sm"
                    [translate]="'name'"
                    [translateParams]="{
                      ar: 'مواطن',
                      en: 'Citizen'
                    }"
                  ></span>
                </label>
                <label class="btn bg-base text-white mb-0" btnRadio="2">
                  <i class="fa fa-building text-sm"></i>
                  <span
                    class="text-sm"
                    [translate]="'name'"
                    [translateParams]="{
                      ar: ' مستثمرون وشركات',
                      en: ' Investor Company Badge  '
                    }"
                  ></span>
                </label>
                <label class="btn bg-base text-white mb-0" btnRadio="3">
                  <i class="fa fa-city"></i>
                  <span
                    class="text-sm"
                    [translate]="'name'"
                    [translateParams]="{
                      ar: 'جهة حكومية',
                      en: 'Government Badge'
                    }"
                  ></span>
                </label>
              </div>
            </div>
          </div>
          <div>
            <!-- name -->
            <div class="form-group">
              <label for="CustomerNameArtxt3" class="col-form-label">
                <ng-container *ngIf="modalDetails.customerTypeId == 1">
                  {{ "Client Name (Arabic)" | translate }}
                </ng-container>
                <ng-container *ngIf="modalDetails.customerTypeId == 2">
                  {{ "Company Name (Arabic)" | translate }}
                </ng-container>
                <ng-container *ngIf="modalDetails.customerTypeId == 3">
                  {{ "Entity Name (Arabic)" | translate }}
                </ng-container>
              </label>
              <input
                type="text"
                class="form-control"
                id="customerNameAr"
                autocomplete="off"
                #customerNameAr="ngModel"
                required
                class="form-control {{
                  customerNameAr.invalid && !customerNameAr.touched
                    ? 'errorInput'
                    : ''
                }}"
                name="customerNameAr"
                [placeholder]="
                  ('Write' | translate) +
                  ' ' +
                  ((modalDetails.customerTypeId == 1
                    ? 'Client Name (Arabic)'
                    : modalDetails.customerTypeId == 2
                    ? 'Company Name (Arabic)'
                    : 'Entity Name (Arabic)'
                  ) | translate)
                "
                [(ngModel)]="modalDetails.customerNameAr"
              />
            </div>

            <div class="form-group">
              <label for="CustomerNameEntxt3" class="col-form-label">
                <ng-container *ngIf="modalDetails.customerTypeId == 1">
                  {{ "Client Name (English)" | translate }}
                </ng-container>
                <ng-container *ngIf="modalDetails.customerTypeId == 2">
                  {{ "Company Name (English)" | translate }}
                </ng-container>
                <ng-container *ngIf="modalDetails.customerTypeId == 3">
                  {{ "Entity Name (English)" | translate }}
                </ng-container>
              </label>
              <div style="display: inline-flex; width: 100%">
                <input
                  type="text"
                  class="form-control"
                  id="customerNameEn"
                  autocomplete="off"
                  #customerNameEn="ngModel"
                  #CustomerNameEnValue
                  required
                  class="form-control {{
                    customerNameEn.invalid && !customerNameEn.touched
                      ? 'errorInput'
                      : ''
                  }}"
                  name="customerNameEn"
                  [placeholder]="
                    ('Write' | translate) +
                    ' ' +
                    ((modalDetails.customerTypeId == 1
                      ? 'Client Name (Arabic)'
                      : modalDetails.customerTypeId == 2
                      ? 'Company Name (Arabic)'
                      : 'Entity Name (Arabic)'
                    ) | translate)
                  "
                  [(ngModel)]="modalDetails.customerNameEn"
                />

                <a
                  class="btn"
                  id="CopyCustomerName2"
                  (click)="
                    modalDetails.customerNameEn = modalDetails.customerNameAr
                  "
                  ><i class="fa fa-copy"></i
                ></a>
              </div>
            </div>

            <!-- governate only -->
            <div class="form-group" *ngIf="modalDetails.customerTypeId == 3">
              <label for="ResponsiblePersontxt" class="col-form-label">{{
                "Responsible Person" | translate
              }}</label>
              <input
                type="text"
                class="form-control"
                id="responsiblePerson"
                autocomplete="off"
                #responsiblePerson="ngModel"
                required
                class="form-control {{
                  responsiblePerson.invalid && !responsiblePerson.touched
                    ? 'errorInput'
                    : ''
                }}"
                name="responsiblePerson"
                placeholder="{{ 'Write' | translate }} {{
                  'Responsible Person' | translate
                }} "
                [(ngModel)]="modalDetails.responsiblePerson"
              />
            </div>
            <!-- copmpany  only -->

            <ng-container *ngIf="modalDetails.customerTypeId == 2">
              <div class="form-group">
                <label for="GeneralManager" class="col-form-label">{{
                  "General Manager" | translate
                }}</label>
                <input
                  type="text"
                  class="form-control"
                  id="generalManager"
                  autocomplete="off"
                  #generalManager="ngModel"
                  required
                  class="form-control {{
                    generalManager.invalid && !generalManager.touched
                      ? 'errorInput'
                      : ''
                  }}"
                  name="generalManager"
                  placeholder="{{ 'Write' | translate }} {{
                    'General Manager' | translate
                  }} "
                  [(ngModel)]="modalDetails.generalManager"
                />
              </div>
              <div class="form-group">
                <label for="CommercialActivitytxt" class="col-form-label">
                  {{ "Commercial Activity" | translate }}</label
                >

                <input
                  type="text"
                  class="form-control"
                  id="commercialActivity"
                  autocomplete="off"
                  #commercialActivity="ngModel"
                  required
                  class="form-control {{
                    commercialActivity.invalid && !commercialActivity.touched
                      ? 'errorInput'
                      : ''
                  }}"
                  name="commercialActivity"
                  placeholder="{{ 'Write' | translate }} {{
                    'Commercial Activity' | translate
                  }} "
                  [(ngModel)]="modalDetails.commercialActivity"
                />
              </div>
              <div class="form-group">
                <label for="CommercialRegistertxt" class="col-form-label">{{
                  "Commercial Register" | translate
                }}</label>

                <input
                  type="text"
                  class="form-control"
                  id="commercialRegister"
                  autocomplete="off"
                  #commercialRegister="ngModel"
                  required
                  class="form-control {{
                    commercialRegister.invalid && !commercialRegister.touched
                      ? 'errorInput'
                      : ''
                  }}"
                  name="commercialRegister"
                  placeholder="{{ 'Write' | translate }} {{
                    'Commercial Register' | translate
                  }} "
                  [(ngModel)]="modalDetails.commercialRegister"
                />
              </div>
            </ng-container>

            <!-- citizens only  -->
            <ng-container *ngIf="modalDetails.customerTypeId == 1">
              <div class="form-group">
                <label for="CustomerNationalIdtxt" class="col-form-label">{{
                  "NationalId" | translate
                }}</label>
                <!-- (blur)="modalDetails.customerNationalId != null?CustomerNationalIdIsRequired=false:CustomerNationalIdIsRequired=true" -->
                <input
                  type="text"
                  class="form-control"
                  id="customerNationalId"
                  autocomplete="off"
                  #customerNationalId="ngModel"
                  maxlength="10"
                  required
                  class="form-control {{
                    CustomerNationalIdIsRequired == true &&
                    modalDetails.customerNationalId == null
                      ? 'errorInput'
                      : ''
                  }}"
                  name="customerNationalId"
                  placeholder="{{ 'Write' | translate }} {{
                    'NationalId' | translate
                  }} "
                  [(ngModel)]="modalDetails.customerNationalId"
                />
              </div>
              <div class="inline-flex gap-1 w-full items-end">
                <div class="flex-grow">
                  <label class="col-form-label">
                    {{ "Issuer" | translate }}</label
                  >
                  <ng-select
                    class="w-full p-0"
                    placeholder="{{ 'Issuer' | translate }}"
                    [(ngModel)]="modalDetails.nationalIdSource"
                    [ngModelOptions]="{ standalone: true }"
                  >
                    <ng-option
                      *ngFor="let city of City_Cus"
                      [value]="city.id"
                      >{{ city.name }}</ng-option
                    >
                  </ng-select>
                </div>
                <button
                  class="btn bg-base text-white"
                  (click)="open(CityTypeModal_Cus)"
                >
                  <i class="fa fa-plus"></i>
                </button>
              </div>
            </ng-container>
            <!-- Branch  -->
            <div>
              <label class="col-form-label">
                {{ "Customer Branch" | translate }}</label
              >

              <ng-select
                style="min-width: max-content"
                id="branchId"
                #branchId="ngModel"
                required
                class="w-full p-0 {{
                  branchId.invalid && branchId.touched ? 'errorInput' : ''
                }}"
                [disabled]="load_BranchUserId?.length == 1"
                (change)="getBranchAccount(modalDetails.branchId)"
                [clearable]="false"
                name="branchId"
                placeholder=" {{ 'Customer Branch' | translate }}"
                [(ngModel)]="modalDetails.branchId"
                [ngModelOptions]="{ standalone: true }"
              >
                <ng-option
                  *ngFor="let branch of load_BranchUserId"
                  [value]="branch.id"
                  >{{ branch.name }}</ng-option
                >
              </ng-select>
            </div>
            <div class="form-group">
              <label for="example-text-input" class="col-form-label"
                >{{ "Branch Account" | translate }}
                <!-- <span class="text-danger">*</span> -->
              </label>
              <!-- <input class="form-control" disabled
                 type="text"name="name" readonly autocomplete="off"
                placeholder="{{ 'Branch Account' | translate }}"  [(ngModel)]="modalDetails.accountName"
                id="accountName"
                #accountName="ngModel"
                class="w-full p-0 {{
                  accountName.invalid && !accountName.touched
                    ? 'errorInput'
                    : ''
                }}"
                /> -->
              <input
                type="text"
                class="form-control"
                id="accountName"
                autocomplete="off"
                #accountName="ngModel"
                disabled
                readonly
                required
                class="form-control {{
                  accountName.invalid && !accountName.touched
                    ? 'errorInput'
                    : ''
                }}"
                name="accountName"
                placeholder="{{ 'Branch Account' | translate }} "
                [(ngModel)]="modalDetails.accountName"
              />
            </div>

            <!-- contact  -->
            <div class="form-group">
              <label for="CustomerPhonetxt3" class="col-form-label">
                {{ "Phone Number" | translate }}
              </label>
              <input
                type="text"
                autocomplete="off"
                class="form-control"
                maxlength="10"
                id="CustomerPhonetxt3"
                name="CustomerPhonetxt3"
                placeholder="{{ 'Phone Number' | translate }} "
                [(ngModel)]="modalDetails.customerPhone"
              />
            </div>
            <div class="form-group">
              <label for="CustomerMobiletxt3" class="col-form-label">
                {{ "Mobile Number" | translate }}
              </label>
              <!-- customerMobile.invalid && !customerMobile.touched -->
              <!-- (blur)="modalDetails.customerMobile != null?CustomerphoneIsRequired=false:CustomerphoneIsRequired=true" -->
              <input
                type="text"
                class="form-control"
                id="customerMobile"
                autocomplete="off"
                #customerMobile="ngModel"
                maxlength="10"
                required
                class="form-control {{
                  CustomerphoneIsRequired == true &&
                  modalDetails.customerMobile == null
                    ? 'errorInput'
                    : ''
                }}"
                name="customerMobile"
                placeholder="{{ 'Write' | translate }} {{
                  'Mobile Number' | translate
                }} "
                [(ngModel)]="modalDetails.customerMobile"
              />
            </div>
            <div class="form-group">
              <label for="CustomerExternalTelephonetxt3" class="col-form-label">
                {{ "Additional Phone" | translate }}
              </label>
              <input
                type="text"
                autocomplete="off"
                class="form-control"
                id="CustomerExternalTelephonetxt3"
                name="CustomerExternalTelephonetxt3"
                placeholder=" {{ 'Additional Phone' | translate }}"
                [(ngModel)]="modalDetails.externalPhone"
              />
            </div>
            <div class="form-group">
              <label for="CustomerEmailtxt3" class="col-form-label">
                {{ "Email" | translate }}
              </label>
              <!-- customerEmail.invalid && !customerEmail.touched -->
              <!-- (blur)="modalDetails.customerEmail != null?CustomerMailIsRequired=false:CustomerMailIsRequired=true" -->
              <input
                type="email"
                class="form-control"
                id="customerEmail"
                autocomplete="off"
                #customerEmail="ngModel"
                required
                class="form-control {{
                  CustomerMailIsRequired == true &&
                  modalDetails.customerEmail == null
                    ? 'errorInput'
                    : ''
                }}"
                name="customerEmail"
                placeholder=" {{ 'Email' | translate }}"
                [(ngModel)]="modalDetails.customerEmail"
              />
            </div>

            <div class="form-group" *ngIf="!(modalDetails.customerTypeId == 2)">
              <label
                for="CustomerCommertialRegistrytxt3"
                class="col-form-label"
              >
                {{ "Commerial Registration" | translate }}</label
              >
              <input
                class="form-control"
                type="text"
                id="CustomerCommertialRegistrytxt3"
                name="CustomerCommertialRegistrytxt3"
                autocomplete="off"
                placeholder="{{ 'Commerial Registration' | translate }}"
                [(ngModel)]="modalDetails.commercialRegister"
              />
            </div>

            <div class="form-group">
              <label for="CustomerPostalCodetxt3" class="col-form-label">
                {{ "Postal Code" | translate }}
              </label>
              <input
                class="form-control"
                type="text"
                id="CustomerPostalCodetxt3"
                name="CustomerPostalCodetxt3"
                autocomplete="off"
                placeholder="{{ 'Postal Code' | translate }}"
                [(ngModel)]="modalDetails.postalCodeFinal"
                placeholder="Postal Code"
              />
            </div>

            <div class="form-group">
              <label for="CustomerCountrytxt3" class="col-form-label">
                {{ "Country" | translate }}
              </label>
              <input
                class="form-control"
                type="text"
                id="CustomerCountrytxt3"
                name="CustomerCountrytxt3"
                autocomplete="off"
                placeholder="{{ 'Country' | translate }}"
                [(ngModel)]="modalDetails.country"
              />
            </div>

            <div class="form-group">
              <label for="CustomerNeighborhoodtxt3" class="col-form-label">
                {{ "Neighborhood" | translate }}
              </label>
              <input
                class="form-control"
                type="text"
                id="CustomerNeighborhoodtxt3"
                name="CustomerNeighborhoodtxt3"
                autocomplete="off"
                placeholder="{{ 'Neighborhood' | translate }}"
                [(ngModel)]="modalDetails.neighborhood"
              />
            </div>

            <div class="form-group">
              <label for="CustomerStreetNametxt3" class="col-form-label">
                {{ "Street Name" | translate }}
              </label>
              <input
                class="form-control"
                type="text"
                id="CustomerStreetNametxt3"
                name="CustomerStreetNametxt3"
                autocomplete="off"
                placeholder="{{ 'Street Name' | translate }}"
                [(ngModel)]="modalDetails.streetName"
              />
            </div>

            <div class="form-group">
              <label for="CustomerBuildingNumbertxt3" class="col-form-label">
                {{ "BuildingNumber" | translate }}
              </label>
              <input
                class="form-control"
                type="text"
                id="CustomerBuildingNumbertxt3"
                name="CustomerBuildingNumbertxt3"
                autocomplete="off"
                placeholder="{{ 'BuildingNumber' | translate }}"
                [(ngModel)]="modalDetails.buildingNumber"
              />
            </div>

            <div class="form-group" *ngIf="!(modalDetails.customerTypeId == 2)">
              <label for="CustomerAddresstxt3" class="col-form-label">
                {{ "Address" | translate }}
              </label>
              <input
                type="text"
                class="form-control"
                id="CustomerAddresstxt3"
                autocomplete="off"
                autocomplete="off"
                name="CustomerAddresstxt3"
                placeholder="{{ 'Address' | translate }}"
                [(ngModel)]="modalDetails.customerAddress"
              />
            </div>
            <div class="form-group" *ngIf="modalDetails.customerTypeId == 2">
              <label for="CompAddresstxt" class="col-form-label">
                {{ "Address" | translate }}
              </label>
              <input
                type="text"
                class="form-control"
                id="CompAddresstxt"
                autocomplete="off"
                autocomplete="off"
                name="CompAddresstxt"
                placeholder="{{ 'Address' | translate }}"
                [(ngModel)]="modalDetails.compAddress"
              />
            </div>
            <div class="form-group" *ngIf="modalDetails.customerTypeId == 2">
              <label for="CustomerAddresstxt3" class="col-form-label">
                {{ "Commerial Registration" | translate }}
              </label>
              <input
                type="text"
                class="form-control"
                id="CustomerAddresstxt3"
                autocomplete="off"
                autocomplete="off"
                name="CustomerAddresstxt3"
                placeholder="{{ 'Commerial Registration' | translate }}"
                [(ngModel)]="modalDetails.customerAddress"
              />
            </div>

            <div>
              <label class="col-form-label">
                {{ "Area" | translate }}
              </label>
              <ng-select
                class="w-full p-0"
                placeholder="{{ 'Area' | translate }}"
                [(ngModel)]="modalDetails.cityId"
                [ngModelOptions]="{ standalone: true }"
              >
                <ng-option *ngFor="let city of City_Cus" [value]="city.id">{{
                  city.name
                }}</ng-option>
              </ng-select>
            </div>
          </div>
          <div>
            <div class="form-group col-span-4">
              <label for="example-text-input" class="col-form-label">{{
                "Notes" | translate
              }}</label>
              <textarea
                class="form-control autosizeme"
                style="
                  border: 1px solid #b0b1b2;
                  border-radius: 6px !important;
                  padding: 5px 6px;
                "
                cols="30"
                rows="4"
                id="Notestxt3"
                autocomplete="off"
                name="Notestxt3"
                placeholder="Notes"
                [(ngModel)]="modalDetails.notes"
              ></textarea>
            </div>
          </div>
          <div>
            <div class="col-span-4 w-fit form-check my-3">
              <label class="form-check-label" for="AgencData">{{
                "Agency Data" | translate
              }}</label>
              <input
                [(ngModel)]="modalDetails.agencData"
                [ngModelOptions]="{ standalone: true }"
                [checked]="modalDetails.AgencData || modalDetails.AgentName"
                type="checkbox"
                class="form-check-input"
                id="AgencData"
              />
            </div>
          </div>
          <ng-container
            *ngIf="modalDetails.agencData || modalDetails.agentName"
          >
            <div [@fade]>
              <div class="form-group">
                <label for="AgentNametxt1" class="col-form-label">
                  {{ "Agent Name" | translate }}
                  <span class="text-danger">*</span>
                </label>
                <input
                  type="text"
                  class="form-control"
                  id="AgentNametxt1"
                  [(ngModel)]="modalDetails.agentName"
                  autocomplete="off"
                  name="AgentNametxt1"
                  placeholder="{{ 'Agent Name' | translate }}"
                />
              </div>
              <div>
                <label class="col-form-label">
                  {{ "Agent Type" | translate }}
                </label>
                <ng-select
                  class="w-full p-0"
                  placeholder="{{ 'Agent Type' | translate }}"
                  [(ngModel)]="modalDetails.agentType"
                  [ngModelOptions]="{ standalone: true }"
                >
                  <ng-option
                    [value]="1"
                    [translate]="'name'"
                    [translateParams]="{
                      ar: 'مندوب',
                      en: 'Delegate'
                    }"
                  ></ng-option>
                  <ng-option
                    [value]="2"
                    [translate]="'name'"
                    [translateParams]="{
                      ar: 'وكيل',
                      en: 'Agent'
                    }"
                  ></ng-option>
                </ng-select>
              </div>
              <div
                class="form-group"
                [@fade]
                *ngIf="modalDetails.agentType == 2"
              >
                <label for="AgentNumbertxt" class="col-form-label">{{
                  "Agent Number" | translate
                }}</label>
                <input
                  type="text"
                  class="form-control"
                  autocomplete="off"
                  id="AgentNumbertxt"
                  name="AgentNumbertxt"
                  placeholder="{{ 'Agent Number' | translate }}"
                  maxlength="10"
                  [(ngModel)]="modalDetails.agentNumber"
                />
              </div>
            </div>
            <div class="upload">
              <file-upload [control]="control">
                <ng-template
                  let-isFileDragDropAvailable="isFileDragDropAvailable"
                  #placeholder
                >
                  <div *ngIf="control.size === 0">
                    <div class="icon">
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        height="1em"
                        viewBox="0 0 640 512"
                      >
                        <path
                          d="M144 480C64.5 480 0 415.5 0 336c0-62.8 40.2-116.2 96.2-135.9c-.1-2.7-.2-5.4-.2-8.1c0-88.4 71.6-160 160-160c59.3 0 111 32.2 138.7 80.2C409.9 102 428.3 96 448 96c53 0 96 43 96 96c0 12.2-2.3 23.8-6.4 34.6C596 238.4 640 290.1 640 352c0 70.7-57.3 128-128 128H144zm79-217c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0l39-39V392c0 13.3 10.7 24 24 24s24-10.7 24-24V257.9l39 39c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-80-80c-9.4-9.4-24.6-9.4-33.9 0l-80 80z"
                        />
                      </svg>
                    </div>

                    <div class="upload-text">
                      {{ "Add Image" | translate }}
                    </div>
                  </div>
                </ng-template>

                <ng-template
                  let-i="index"
                  let-file="file"
                  let-control="control"
                  #item
                >
                  <div class="overlay">
                    <span
                      class="delete-button"
                      (click)="control.removeFile(file)"
                    >
                      <svg viewBox="0 0 448 512">
                        <path
                          d="M32 464a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V128H32zm272-256a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zM432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16z"
                        ></path>
                      </svg>
                    </span>
                    <img *ngIf="control.valid" [src]="uploadedFile | async" />
                  </div>
                </ng-template>
              </file-upload>
            </div>
            <!-- <div>
              <img *ngIf="modalDetails?.attachmentUrl" [src]="modalDetails?.attachmentUrl" />
            </div> -->
            <div>
              <button
                type="button"
                class="btn bg-base text-white mb-3"
                (click)="ShowAgentFile(modalDetails?.attachmentUrl)"
              >
                {{ "show" | translate }}
              </button>
            </div>
            <!-- <div>
              <iframe width="100%" height="300" [src]="cleanURL(modalDetails?.attachmentUrl)"></iframe>
            </div> -->
          </ng-container>
        </form>
        <div
          class="flex flex-wrap items-end border-t justify-between pt-2 border-neutral-300"
        >
          <div
            *ngIf="modalDetails.addUser != null && modalDetails.addUser != ''"
            class="flex gap-2 items-center"
          >
            <img
              class="w-20 aspect-square rounded-full object-cover"
              *ngIf="modalDetails?.addedcustomerImg"
              [src]="ShowImg(modalDetails?.addedcustomerImg)"
              alt=""
            />
            <div class="flex flex-col gap-2">
              <span>{{ "Data Entry" | translate }}</span>
              <div class="flex flex-col">
                <span>{{ modalDetails?.addUser }}</span>
                <span>{{
                  modalDetails?.addDate | date : " hh:mm yyyy-MM-dd"
                }}</span>
              </div>
            </div>
          </div>
          <div>
            <span class="text-red-500">{{
              "required inputs" | translate
            }}</span>
            <div
              class="flex gap-2 items-center mt-2"
              *ngIf="phoneIsRequired == true"
            >
              <i class="fa-solid fa-mobile-screen text-base w-10"></i>
              <span>{{ "Phone Number" | translate }}</span>
            </div>
            <div class="flex gap-2" *ngIf="MailIsRequired == true">
              <i class="fa-solid fa-at text-base w-10"></i>
              <span>{{ "Email" | translate }}</span>
            </div>
            <div class="flex gap-2" *ngIf="NationalIdIsRequired == true">
              <i class="fa-solid fa-id-card w-10 text-base"></i>
              <span>{{ "NationalId" | translate }}</span>
            </div>
          </div>
          <div class="flex gap-2">
            <button
              class="btn bg-base text-white"
              (click)="addCustomer()"
              [disabled]="disableButtonSave_Customer"
            >
              {{ "save" | translate }}
            </button>
            <button (click)="modal?.hide()" class="btn btn-secondary">
              {{ "Back" | translate }}
            </button>
          </div>
        </div>
      </ng-container>
    </div>
  </ng-template>

  <!-- confirm delete -->
  <ng-template #deleteModal>
    <div class="modal-body text-center">
      <p
        [translate]="'name'"
        [translateParams]="{
          ar: 'هل تريد بالتأكيد حذف هذا الصف',
          en: 'Are you sure to delete this row ?'
        }"
      ></p>
      <div class="flex gap-2 justify-center">
        <button
          type="button"
          mat-raised-button
          color="warn"
          (click)="confirm()"
        >
          {{ "Yes" | translate }}
        </button>
        <button
          type="button"
          (click)="decline()"
          mat-raised-button
          color="basic"
        >
          {{ "No" | translate }}
        </button>
      </div>
    </div>
  </ng-template>

  <ng-template #issuerModal>
    <div
      style="background-color: var(--base-color)"
      class="modal-header text-white flex justify-between items-center"
    >
      <h4 class="m-0">
        <span class="text-2xl"
          >{{ "Add" | translate }} {{ "Issuer" | translate }}
        </span>
      </h4>
      <button
        type="button"
        class="text-2xl text-white m-0"
        (click)="modal?.hide(); openModal(dataModal)"
      >
        <i class="fa-solid fa-xmark"></i>
      </button>
    </div>
    <div class="modal-body text-center">
      <form #addIssuer="ngForm" class="grid grid-cols-1 md:grid-cols-2 gap-2">
        <div class="form-group">
          <label
            for="CustomerNameArtxt3"
            class="text-right col-form-label block"
          >
            {{ "nameAr" | translate }}
            <span class="text-danger">*</span></label
          >
          <input
            required
            #CustomerNameAr="ngModel"
            [(ngModel)]="nameAr"
            class="form-control"
            type="text"
            id="nameAr"
            name="CustomerNameArtxt3"
            autocomplete="off"
            [placeholder]="('Write' | translate) + ' ' + ('nameAr' | translate)"
          />
        </div>
        <div class="form-group">
          <label
            for="CustomerNameEntxt3"
            class="text-right col-form-label block"
          >
            {{ "nameEn" | translate }}
            <span class="text-danger">*</span></label
          >
          <div style="display: inline-flex; width: 100%">
            <input
              required
              #CustomerNameEnValue
              #CustomerNameEn="ngModel"
              [(ngModel)]="nameEn"
              class="form-control"
              type="text"
              id="nameEn"
              name="CustomerNameEntxt3"
              autocomplete="off"
              [placeholder]="
                ('Write' | translate) + ' ' + ('nameEn' | translate)
              "
            />
            <a class="btn" id="CopyCustomerName2" (click)="nameEn = nameAr"
              ><i class="fa fa-copy"></i
            ></a>
          </div>
        </div>
      </form>
      <div class="flex gap-2 mt-3">
        <button
          class="btn bg-base text-white"
          type="submit"
          [disabled]="addIssuer.invalid"
          (click)="
            addNewIssuer(nameAr, nameEn);
            modal?.hide();
            openModal(dataModal, modalDetails)
          "
        >
          {{ "save" | translate }}
        </button>
        <button
          (click)="modal?.hide(); openModal(dataModal, modalDetails)"
          class="btn btn-secondary"
        >
          {{ "Back" | translate }}
        </button>
      </div>
    </div>
  </ng-template>

  <ng-template #CityTypeModal_Cus let-modal>
    <div class="modal-header bg-base text-white">
      <h4
        class="modal-title mb-0"
        id="modal-basic-title"
        [translate]="'name'"
        [translateParams]="{ ar: 'اضافة جديدة', en: 'Add New' }"
      ></h4>
      <button
        type="button"
        class="text-2xl text-white m-0"
        (click)="modal.dismiss('Cross click')"
      >
        <i class="fa-solid fa-xmark"></i>
      </button>
    </div>
    <div class="modal-body text-center">
      <form #addCityType="ngForm" class="grid grid-cols-1 md:grid-cols-2 gap-2">
        <div class="form-group">
          <label for="CityNameArtxt" class="text-right col-form-label block">
            {{ "nameAr" | translate }}
            <span class="text-danger">*</span></label
          >
          <input
            required
            #CityNameAr="ngModel"
            ngModel
            [(ngModel)]="dataAddCustomer.citytype.nameAr"
            class="form-control"
            type="text"
            id="CityNameArtxt"
            name="CityNameArtxt"
            autocomplete="off"
            [placeholder]="('Write' | translate) + ' ' + ('nameAr' | translate)"
          />
        </div>
        <div class="form-group">
          <label for="CityNameEntxt" class="text-right col-form-label block">
            {{ "nameEn" | translate }}
            <span class="text-danger">*</span></label
          >
          <div style="display: inline-flex; width: 100%">
            <input
              required
              #CityNameEnValue
              #CityNameEn="ngModel"
              [(ngModel)]="dataAddCustomer.citytype.nameEn"
              ngModel
              class="form-control"
              type="text"
              id="CityNameEntxt"
              name="CityNameEntxt"
              autocomplete="off"
              [placeholder]="
                ('Write' | translate) + ' ' + ('nameEn' | translate)
              "
            />
            <a
              class="btn"
              id="CopyCityName2"
              (click)="
                dataAddCustomer.citytype.nameEn =
                  dataAddCustomer.citytype.nameAr
              "
              ><i class="fa fa-copy"></i
            ></a>
          </div>
        </div>
      </form>
      <div class="max-h-80 overflow-auto px-2">
        <table class="table table-hover">
          <thead>
            <tr>
              <th>{{ "nameAr" | translate }}</th>
              <th>{{ "nameEn" | translate }}</th>
              <th
                [translate]="'name'"
                [translateParams]="{
                  ar: 'خيارات',
                  en: 'Operations'
                }"
              ></th>
            </tr>
          </thead>
          <tbody>
            <tr
              *ngFor="let type of CityTypesPopup_Cus"
              (dblclick)="
                setcityTypeInSelect_Cus(type, CityTypeModal_Cus);
                modal.dismiss('Cross click')
              "
            >
              <td>{{ type.name }}</td>
              <td>{{ type.nameEn }}</td>
              <td class="flex gap-2 justify-center">
                <button
                  class="p-2 bg-orange-100 hover:bg-orange-500 rounded-lg duration-300 hover:text-white aspect-square w-10"
                  (click)="
                    dataAddCustomer.citytype.nameAr = type.name;
                    dataAddCustomer.citytype.nameEn = type.nameEn;
                    dataAddCustomer.citytype.id = type.id
                  "
                >
                  <i class="fa-regular fa-pen-to-square"></i>
                </button>
                <button
                  (click)="getcitytypeRow_Cus(type); open(deleteCityType)"
                  class="p-2 bg-red-100 hover:bg-red-500 rounded-lg duration-300 hover:text-white aspect-square w-10"
                >
                  <i class="fa-solid fa-trash-can"></i>
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="flex gap-2 mt-3 pt-3 border-t border-neutral-300">
        <button
          class="btn bg-base text-white"
          type="submit"
          [disabled]="addCityType.invalid"
          (click)="savecityType_Cus()"
        >
          {{ "Save" | translate }}
        </button>
        <button
          (click)="modal.dismiss('Cross click')"
          class="btn btn-secondary"
        >
          {{ "Back" | translate }}
        </button>
        <button (click)="resetcityType_Cus()" class="btn bg-base text-white">
          {{ "جديد" | translate }}
        </button>
      </div>
    </div>
  </ng-template>

  <ng-template #deleteCityType let-modal>
    <div class="modal-body text-center">
      <p
        [translate]="'name'"
        [translateParams]="{
          ar: 'هل تريد بالتأكيد حذف هذا الصف',
          en: 'Are you sure to delete this row ?'
        }"
      ></p>
      <div class="flex gap-2 justify-center mt-3">
        <button
          type="button"
          mat-raised-button
          color="warn"
          (click)="confirmcitytypeDelete_Cus(); modal.dismiss()"
        >
          {{ "Yes" | translate }}
        </button>
        <button
          type="button"
          (click)="modal.dismiss()"
          mat-raised-button
          color="basic"
        >
          {{ "No" | translate }}
        </button>
      </div>
    </div>
  </ng-template>

  <ng-template #fileTypeModal let-modal>
    <div
      style="background-color: var(--base-color)"
      class="modal-header text-white flex justify-between items-center"
    >
      <h4 class="m-0">
        <span class="text-2xl"> {{ "Add File Type" | translate }} </span>
      </h4>
      <button
        type="button"
        class="text-2xl text-white m-0"
        (click)="modal?.dismiss()"
      >
        <i class="fa-solid fa-xmark"></i>
      </button>
    </div>
    <div class="modal-body text-center">
      <form #addFileType="ngForm" class="grid grid-cols-1 md:grid-cols-2 gap-2">
        <div class="form-group">
          <label
            for="CustomerNameArtxt3"
            class="text-right col-form-label block"
          >
            {{ "nameAr" | translate }}
            <span class="text-danger">*</span></label
          >
          <input
            required
            #CustomerNameAr="ngModel"
            [ngModelOptions]="{ standalone: true }"
            [(ngModel)]="data.fileType.nameAr"
            class="form-control"
            type="text"
            id="CustomerNameArtxt3"
            name="CustomerNameArtxt3"
            autocomplete="off"
            [placeholder]="('Write' | translate) + ' ' + ('nameAr' | translate)"
          />
        </div>
        <div class="form-group">
          <label
            for="CustomerNameEntxt3"
            class="text-right col-form-label block"
          >
            {{ "nameEn" | translate }}
            <span class="text-danger">*</span></label
          >
          <div style="display: inline-flex; width: 100%">
            <input
              required
              #CustomerNameEnValue
              #CustomerNameEn="ngModel"
              [ngModelOptions]="{ standalone: true }"
              [(ngModel)]="data.fileType.nameEn"
              ngModel
              class="form-control"
              type="text"
              id="CustomerNameEntxt3"
              name="CustomerNameEntxt3"
              autocomplete="off"
              [placeholder]="
                ('Write' | translate) + ' ' + ('nameEn' | translate)
              "
            />
            <a
              class="btn"
              id="CopyCustomerName2"
              (click)="data.fileType.nameEn = data.fileType.nameAr"
              ><i class="fa fa-copy"></i
            ></a>
          </div>
        </div>
      </form>
      <div class="max-h-80 overflow-auto">
        <table class="table table-hover mt-2">
          <thead>
            <tr>
              <th>{{ "nameAr" | translate }}</th>
              <th>{{ "nameEn" | translate }}</th>
              <th
                [translate]="'name'"
                [translateParams]="{
                  ar: 'خيارات',
                  en: 'Operations'
                }"
              ></th>
            </tr>
          </thead>
          <tbody>
            <tr
              *ngFor="let type of load_filesTypes"
              (dblclick)="
                setFileTypeInSelect(type, modal); modal.dismiss('Cross click')
              "
            >
              <td>{{ type.nameAr }}</td>
              <td>{{ type.nameEn }}</td>
              <td class="flex gap-2 justify-center">
                <button
                  class="p-2 bg-orange-100 hover:bg-orange-500 rounded-lg duration-300 hover:text-white aspect-square w-10"
                  (click)="
                    data.fileType.nameAr = type.nameAr;
                    data.fileType.nameEn = type.nameEn;
                    data.fileType.id = type.fileTypeId
                  "
                >
                  <i class="fa-regular fa-pen-to-square"></i>
                </button>
                <button
                  (click)="getFileTypeRow(type); open(deleteFileTypes)"
                  class="p-2 bg-red-100 hover:bg-red-500 rounded-lg duration-300 hover:text-white aspect-square w-10"
                >
                  <i class="fa-solid fa-trash-can"></i>
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="flex gap-2 mt-3 pt-3 border-t border-neutral-300">
        <button
          class="btn bg-base text-white"
          type="submit"
          [disabled]="addFileType.invalid"
          (click)="addNewFileType()"
        >
          {{ "Save" | translate }}
        </button>
        <button (click)="modal?.dismiss()" class="btn btn-secondary">
          {{ "Back" | translate }}
        </button>
      </div>
    </div>
  </ng-template>

  <ng-template #addFile let-modal>
    <div
      style="background-color: var(--base-color)"
      class="modal-header text-white flex justify-between items-center"
    >
      <h4 class="m-0">
        <span class="text-2xl">{{ "addFile" | translate }}</span>
      </h4>
      <button
        type="button"
        class="text-2xl text-white m-0"
        (click)="modal?.dismiss()"
      >
        <i class="fa-solid fa-xmark"></i>
      </button>
    </div>
    <div class="modal-body">
      <ng-container>
        <form class="grid grid-cols-1 md:grid-cols-2" #addFileForm="ngForm">
          <div>
            <div class="form-group">
              <label
                for="FileDescription"
                class="text-right col-form-label block"
              >
                {{ "File Description" | translate }}
                <span class="text-danger">*</span></label
              >
              <input
                required
                #FileDescription="ngModel"
                [ngModelOptions]="{ standalone: true }"
                [(ngModel)]="filedata.desc"
                class="form-control"
                type="text"
                id="FileDescription"
                name="FileDescription"
                autocomplete="off"
                [placeholder]="
                  ('Write' | translate) + ' ' + ('File Description' | translate)
                "
              />
            </div>
            <div class="flex gap-2 items-end">
              <div class="flex-grow">
                <label class="col-form-label">
                  {{ "File Type" | translate }}</label
                >
                <ng-select
                  class="w-full p-0"
                  [required]="true"
                  [ngModelOptions]="{ standalone: true }"
                  #FileType="ngModel"
                  [(ngModel)]="filedata.filetype"
                  placeholder="{{ 'File Type' | translate }}"
                  name="FileType"
                >
                  <ng-option
                    *ngFor="let type of load_FileType"
                    [value]="type"
                    >{{ type.name }}</ng-option
                  >
                </ng-select>
              </div>
              <button
                class="btn bg-base text-white mt-3"
                type="type"
                (click)="open(fileTypeModal)"
              >
                <i class="fa fa-plus"></i>
              </button>
            </div>
          </div>

          <div class="upload row-span-2">
            <file-upload class="h-full" [control]="control">
              <ng-template
                let-isFileDragDropAvailable="isFileDragDropAvailable"
                #placeholder
              >
                <div *ngIf="control.size === 0">
                  <div class="icon">
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      height="1em"
                      viewBox="0 0 640 512"
                    >
                      <path
                        d="M144 480C64.5 480 0 415.5 0 336c0-62.8 40.2-116.2 96.2-135.9c-.1-2.7-.2-5.4-.2-8.1c0-88.4 71.6-160 160-160c59.3 0 111 32.2 138.7 80.2C409.9 102 428.3 96 448 96c53 0 96 43 96 96c0 12.2-2.3 23.8-6.4 34.6C596 238.4 640 290.1 640 352c0 70.7-57.3 128-128 128H144zm79-217c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0l39-39V392c0 13.3 10.7 24 24 24s24-10.7 24-24V257.9l39 39c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-80-80c-9.4-9.4-24.6-9.4-33.9 0l-80 80z"
                      />
                    </svg>
                  </div>

                  <div class="upload-text">
                    {{ "addFile" | translate }}
                  </div>
                </div>
              </ng-template>

              <ng-template
                let-i="index"
                let-file="file"
                let-control="control"
                #item
              >
                <div class="overlay">
                  <span
                    class="delete-button"
                    (click)="control.removeFile(file)"
                  >
                    <svg viewBox="0 0 448 512">
                      <path
                        d="M32 464a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V128H32zm272-256a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zM432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16z"
                      ></path>
                    </svg>
                  </span>
                  <img
                    class="max-h-44"
                    *ngIf="control.valid"
                    [src]="uploadedFile | async"
                  />
                </div>
              </ng-template>
            </file-upload>
          </div>
          <button
            class="btn bg-base text-white mt-3"
            type="type"
            [disabled]="addFileForm.invalid"
            (click)="addNewFile(addFileForm)"
          >
            {{ "Add" | translate }}
          </button>
          <div class="max-h-80 overflow-auto col-span-1 md:col-span-2">
            <table
              *ngIf="data.documents?.length"
              class="table table-hover mt-2"
            >
              <thead>
                <tr class="text-center" style="text-align: center !important">
                  <th>{{ "File Description" | translate }}</th>
                  <th>{{ "File Type" | translate }}</th>
                  <th>{{ "File Name" | translate }}</th>
                  <th
                    [translate]="'name'"
                    [translateParams]="{
                      ar: 'خيارات',
                      en: 'Operations'
                    }"
                  ></th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let file of data.documents; let i = index">
                  <td>{{ file.description }}</td>
                  <td>{{ file.fileTypeName }}</td>
                  <td>{{ file.fileName }}</td>
                  <td class="flex gap-2 justify-center">
                    <button
                      (click)="data.documents.splice(i, 1)"
                      class="p-2 bg-red-100 hover:bg-red-500 rounded-lg duration-300 hover:text-white aspect-square w-10"
                    >
                      <i class="fa-solid fa-trash-can"></i>
                    </button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
          <div
            class="flex gap-2 pt-3 border-t border-neutral-300 col-span-1 md:col-span-2 mt-2"
          >
            <button
              class="btn bg-base text-white"
              type="submit"
              (click)="addFilePost(modal)"
            >
              {{ "Save" | translate }}
            </button>
            <button (click)="modal?.dismiss()" class="btn btn-secondary">
              {{ "Back" | translate }}
            </button>
          </div>
        </form>
      </ng-container>
    </div>
  </ng-template>

  <ng-template #sendSms let-modal>
    <div
      style="background-color: var(--base-color)"
      class="modal-header text-white flex justify-between items-center"
    >
      <h4 class="m-0">
        <span class="text-2xl">{{ "sendSms" | translate }}</span>
      </h4>
      <button
        type="button"
        class="text-2xl text-white m-0"
        (click)="modal?.dismiss()"
      >
        <i class="fa-solid fa-xmark"></i>
      </button>
    </div>
    <div class="modal-body py-0">
      <ng-container>
        <form class="grid gap-3 grid-cols-1 md:grid-cols-2" #smsForm="ngForm">
          <div class="form-group">
            <label for="clientName" class="text-right col-form-label block">
              {{ "Customer Name" | translate }}
            </label>
            <input
              required
              #clientName="ngModel"
              [(ngModel)]="modalDetails.customerName"
              ngModel
              class="form-control"
              type="text"
              id="clientName"
              name="clientName"
              readonly
            />
          </div>

          <div class="form-group">
            <label for="mobileNumber" class="text-right col-form-label block">
              {{ "Mobile Number" | translate }}
            </label>
            <input
              required
              #mobileNumber="ngModel"
              [(ngModel)]="modalDetails.customerMobile"
              ngModel
              class="form-control"
              type="text"
              id="mobileNumber"
              name="mobileNumber"
              readonly
            />
          </div>

          <div class="form-group col-span-1 md:col-span-2">
            <label for="Text32" class="text-right col-form-label block">
              {{ "Text" | translate }}
            </label>
            <textarea
              required
              #Text32="ngModel"
              ngModel
              class="form-control"
              type="text"
              id="Text32"
              name="Text32"
              [(ngModel)]="modalSMSDetails.sMSText"
            ></textarea>
          </div>

          <div
            class="flex gap-2 pt-3 border-t border-neutral-300 col-span-1 md:col-span-2 mt-2"
          >
            <button
              class="btn bg-base text-white"
              [disabled]="smsForm.invalid"
              type="submit"
              (click)="sendSMS(modal)"
            >
              {{ "Send" | translate }}
            </button>
            <button (click)="modal?.dismiss()" class="btn btn-secondary">
              {{ "Back" | translate }}
            </button>
          </div>
        </form>
      </ng-container>
    </div>
  </ng-template>

  <ng-template #sendEmail let-modal>
    <div
      style="background-color: var(--base-color)"
      class="modal-header text-white flex justify-between items-center"
    >
      <h4 class="m-0">
        <span class="text-2xl">{{ "sendEmail" | translate }}</span>
      </h4>
      <button
        type="button"
        class="text-2xl text-white m-0"
        (click)="modal?.dismiss()"
      >
        <i class="fa-solid fa-xmark"></i>
      </button>
    </div>
    <div class="modal-body">
      <ng-container>
        <form class="grid gap-3 grid-cols-1 md:grid-cols-2" #emailForm="ngForm">
          <div class="form-group">
            <label for="from" class="text-right col-form-label block">
              {{ "From" | translate }}
            </label>
            <input
              required
              #from="ngModel"
              id="OrginzationEmail"
              name="OrginzationEmail"
              class="form-control"
              type="text"
              [(ngModel)]="getEmailOrgnize"
              id="from"
              name="from"
              [ngModelOptions]="{ standalone: true }"
              readonly
            />
          </div>

          <div class="form-group">
            <label for="to234" class="text-right col-form-label block">
              {{ "To" | translate }}
            </label>
            <input
              required
              #to234="ngModel"
              [(ngModel)]="modalDetails.customerEmail"
              ngModel
              class="form-control"
              type="text"
              id="to234"
              name="to234"
              readonly
            />
          </div>
          <div class="form-group col-span-1 md:col-span-2">
            <label for="Subject" class="text-right col-form-label block">
              {{ "subject" | translate }}
            </label>
            <input
              required
              #Subject="ngModel"
              [(ngModel)]="emailModalDetils.mailSubject"
              class="form-control"
              type="mailSubject"
              id="mailSubject"
              name="mailSubject"
              autocomplete="off"
            />
          </div>

          <div class="form-group col-span-1 md:col-span-2">
            <label for="Text32" class="text-right col-form-label block">
              {{ "Text" | translate }}
            </label>
            <textarea
              required
              #Text32="ngModel"
              [(ngModel)]="emailModalDetils.mailText"
              class="form-control"
              type="mailText"
              id="mailText"
              name="text"
              autocomplete="off"
            ></textarea>
          </div>

          <div class="upload col-span-1 md:col-span-2">
            <label for="">{{ "Add Attachments" | translate }}</label>

            <!-- <file-upload [(ngModel)]="emailModalDetils.fileUrl" class="h-full" [control]="control" id="fileUrl"
              name="fileUrl">
            </file-upload> -->
            <input
              class="form-control"
              [ngModelOptions]="{ standalone: true }"
              (change)="selectFile($event)"
              [(ngModel)]="emailModalDetils.fileUrl"
              type="file"
              id="fileUrl"
              name="fileUrl"
            />
          </div>

          <div
            class="flex gap-2 pt-3 border-t border-neutral-300 col-span-1 md:col-span-2 mt-2"
          >
            <button
              class="btn bg-base text-white"
              type="submit"
              (click)="sendEMAIL(modal)"
            >
              {{ "Send" | translate }}
            </button>
            <button (click)="modal?.dismiss()" class="btn btn-secondary">
              {{ "Back" | translate }}
            </button>
          </div>
        </form>
      </ng-container>
    </div>
  </ng-template>
</div>

<!-- optionsModal -->
<ng-template let-modal #optionsModal>
  <div class="modal-body py-3 relative">
    <button
      type="button"
      style="inset-inline-end: 25px"
      class="text-2xl m-0 absolute top-[20px]"
      (click)="modal.dismiss()"
    >
      <i class="fa-solid fa-xmark"></i>
    </button>
    <div
      class="flex items-start gap-16 p-3 border-neutral-300 mb-3"
      style="border: 2px solid #666; border-radius: 8px"
    >
      <div>
        <h2 class="text-base">
          {{ "instructions and actions" | translate }}
        </h2>
        <p class="mb-0">
          <span>{{ "created account with number" | translate }} :</span>
          <span> {{ PopupAfterSaveObj_Customer.AccountNo }} </span>
        </p>
        <p class="mb-0">
          <span>{{ "main account name" | translate }} :</span>
          <span> : {{ PopupAfterSaveObj_Customer.MainAccountName }}</span>
        </p>
        <p class="mb-0">
          <span>{{ "main account number" | translate }} :</span>
          <span> : {{ PopupAfterSaveObj_Customer.MainAccountNo }} </span>
        </p>
      </div>

      <div class="text-center">
        <h2
          class="text-base"
          [translate]="'name'"
          [translateParams]="{
            ar: 'تمت إضافة العميل بنجاح',
            en: 'Customer added successfully'
          }"
        ></h2>
        <p>
          <span>{{ "Client Name" | translate }} : </span>
          <span>{{ PopupAfterSaveObj_Customer.CustomerName }}</span>
        </p>
        <p>
          <span>{{ "Branch" | translate }} : </span>
          <span>{{ PopupAfterSaveObj_Customer.BranchName }}</span>
        </p>
      </div>
    </div>

    <div class="flex items-center gap-3 justify-center flex-wrap mt-4">
      <button
        type="button"
        class="btn bg-base text-white"
        (click)="open(NewInvoiceModal, null, 'addInvoicewithoutProject')"
      >
        {{
          "Issuing an invoice to the customer (without a project)" | translate
        }}
      </button>
      <button
        type="button"
        class="btn bg-base text-white"
        (click)="open(addOfferPrice, null, 'addOfferPrice')"
      >
        {{ "Create a quote for the customer" | translate }}
      </button>
      <!-- <button
        type="button"
        class="btn bg-base text-white"
        (click)="open(addProjectModal, null, 'addproject')"
      >
        {{ "Create a project for the client" | translate }}
      </button> -->

      <button
        type="button"
        class="btn bg-base text-white"
        (click)="control.clear(); open(addFile, null, 'addFile')"
      >
        {{ "upload files and documents for client" | translate }}
      </button>
    </div>

    <div class="flex items-center gap-3 justify-center flex-wrap mt-4">
      <div class="mt-4 text-center">
        <div class="mb-2 endNotice w-auto">
          <mat-checkbox
            name="checkedEmail"
            [(ngModel)]="clientAddedCheckedEmail"
            [disabled]="OrganizationData?.sendCustomerMail != true"
          >
          </mat-checkbox>
          <button
            [title]="'Send notice via e-mail' | translate"
            class="min-w-max p-2 bg-green-100 hover:bg-green-500 rounded-lg duration-300 hover:text-white aspect-square w-10 mx-3"
          >
            <i
              class="fa-solid fa-at"
              [title]="
                OrganizationData?.sendCustomerMail != true
                  ? 'ايميل المنشأة غير مفعل'
                  : 'ارسال ميل'
              "
            ></i>
          </button>
          <span *ngIf="clientAddedCheckedEmail">{{
            PopupAfterSaveObj_Customer?.EmailValue_Customer
          }}</span>

          <button
            *ngIf="clientAddedCheckedEmail"
            type="button"
            class="btn text-base"
            style="border-color: var(--base-color); font-size: 13px"
            (click)="
              open(sendEmail, null, 'sendEmail_AfterSave'); uploadedFiles = []
            "
          >
            {{ "send" | translate }}
          </button>
        </div>

        <div class="endNotice w-auto">
          <mat-checkbox
            name="checkedPhone"
            [(ngModel)]="clientAddedCheckedPhone"
            [disabled]="OrganizationData?.sendCustomerSMS != true"
          >
          </mat-checkbox>
          <button
            [title]="'Sending notice via mobile number' | translate"
            class="min-w-max p-2 bg-blue-100 hover:bg-blue-500 rounded-lg duration-300 hover:text-white aspect-square w-10 mx-3"
          >
            <i
              class="fa-solid fa-comment-sms"
              [title]="
                OrganizationData?.sendCustomerSMS != true
                  ? 'خدمة لرسال غير مفعل'
                  : 'ارسال رساله'
              "
            ></i>
          </button>
          <span *ngIf="clientAddedCheckedPhone">{{
            PopupAfterSaveObj_Customer?.PhoneValue_Customer
          }}</span>

          <button
            *ngIf="clientAddedCheckedPhone"
            type="button"
            class="btn text-base"
            style="border-color: var(--base-color); font-size: 13px"
            (click)="open(sendSms, null, 'sendSms_AfterSave')"
          >
            {{ "send" | translate }}
          </button>
        </div>
      </div>
    </div>

    <div class="flex items-center gap-6 justify-between flex-wrap mt-4">
      <p class="p-1 rounded-lg bg-red-200 w-max">
        {{ "addclientNote" | translate }}
      </p>
      <button
        type="button"
        mat-raised-button
        color="warn"
        (click)="modal.dismiss('Cross click')"
      >
        {{ "No thanks, close" | translate }}
      </button>
    </div>
  </div>
</ng-template>

<!-- NewInvoiceModal  -->
<ng-template #NewInvoiceModal let-modal>
  <div
    style="background-color: var(--base-color)"
    class="modal-header text-white flex justify-between items-center"
  >
    <h4 class="m-0">
      <span *ngIf="invoicepop == 2" class="text-2xl">{{
        "NewsSalesInvoice" | translate
      }}</span>
      <span *ngIf="invoicepop == 1" class="text-2xl">{{
        "NewInvoice" | translate
      }}</span>
    </h4>
    <button
      type="button"
      class="text-2xl text-white m-0"
      (click)="modal?.dismiss()"
    >
      <i class="fa-solid fa-xmark"></i>
    </button>
  </div>

  <div class="modal-body">
    <ng-container>
      <div class="row align-items-end mb-2 mx-3">
        <div class="col-sm-6 col-md-3 col-lg-2 mb-0">
          <div class="form-group">
            <label for="date" class="text-right col-form-label block">
              {{ "date" | translate }}
            </label>
            <input
              placeholder="{{ 'Chose' | translate }}"
              name="date"
              type="text"
              class="form-control"
              bsDatepicker
              #dpr="bsDatepicker"
              autocomplete="off"
              [bsConfig]="{ dateInputFormat: 'DD/MM/YYYY' }"
              (ngModelChange)="ChangeInvoiceGre($event)"
              [(ngModel)]="modalInvoice.Date"
              [ngModelOptions]="{ standalone: true }"
              [disabled]="modalInvoice.AddOrView != 1"
            />
          </div>
        </div>

        <div class="col-sm-6 col-md-3 col-lg-2 mb-0">
          <div class="form-group">
            <label for="customerEn" class="text-right col-form-label block">
              {{ "invoice number" | translate }}
            </label>
            <input
              required
              placeholder="{{ 'invoice number' | translate }}"
              class="form-control"
              type="text"
              disabled
              autocomplete="off"
              [(ngModel)]="modalInvoice.InvoiceNumber"
              [ngModelOptions]="{ standalone: true }"
            />
          </div>
        </div>

        <div class="col-sm-6 col-md-3 col-lg-2 mb-0" style="display: none;">
          <div class="form-group">
            <input
              required
              placeholder="{{ 'SR' | translate }}"
              class="form-control"
              type="text"
              disabled
              autocomplete="off"
              [(ngModel)]="modalInvoice.Currency"
              [ngModelOptions]="{ standalone: true }"
            />
          </div>
        </div>

        <div class="col-sm-6 col-md-3 col-lg-2 mb-0">
          <div class="form-group">
            <input
              required
              placeholder="{{ 'Registration number' | translate }}"
              class="form-control"
              type="text"
              disabled
              autocomplete="off"
              [(ngModel)]="modalInvoice.JournalNumber"
              [ngModelOptions]="{ standalone: true }"
            />
          </div>
        </div>

        <div class="col-sm-6 col-md-3 col-lg-2 mb-0">
          <div class="form-group">
            <input
              placeholder="{{ '' | translate }}"
              required
              class="form-control"
              type="text"
              disabled
              autocomplete="off"
              [(ngModel)]="modalInvoice.OrganizationsAddress"
              [ngModelOptions]="{ standalone: true }"
            />
          </div>
        </div>

        <div class="col-sm-10 col-md-6 col-lg-4 mb-0">
          <div class="form-group">
            <ng-select
              class="w-full p-0"
              style="min-width: max-content; display: inline"
              placeholder="{{ 'Chose' | translate }}"
              [(ngModel)]="modalInvoice.CostCenterId"
              [ngModelOptions]="{ standalone: true }"
              name="CostCenterId"
              [disabled]="modalInvoice.AddOrView != 1"
            >
              <ng-option
                *ngFor="let user of load_CostCenter"
                [value]="user.id"
                >{{ user.name }}</ng-option
              >
            </ng-select>
          </div>
        </div>
        <!-- 2 line-->

        <div class="col-sm-6 col-md-3 col-lg-2 mb-0">
          <div class="form-group hijri-gregorianReciept">
            <label for="Corresponding" class="text-right col-form-label block">
              {{ "Corresponding" | translate }}
            </label>
            <hijri-gregorian-datepicker
              [(selectedDate)]="modalInvoice.HijriDate"
              [hijriLabel]="'Hijri'"
              [selectedDateType]="selectedDateType"
              [dir]="'dir' | translate"
              autocomplete="off"
              [disabled]="modalInvoice.AddOrView != 1"
              (selectedDateChange)="ChangeInvoiceDateHijri($event)"
            >
            </hijri-gregorian-datepicker>
          </div>
        </div>

        <div class="col-sm-6 col-md-3 col-lg-2 mb-0">
          <div class="form-group">
            <label for="Paytype" class="text-right col-form-label block">
              {{ "Type" | translate }}
            </label>
            <ng-select
              class="w-full p-0"
              style="min-width: max-content; display: inline"
              placeholder="{{ 'Chose' | translate }}"
              name="Paytype"
              [clearable]="false"
              (change)="PayTypeChange()"
              [(ngModel)]="modalInvoice.PayType"
              [ngModelOptions]="{ standalone: true }"
              [disabled]="modalInvoice.AddOrView != 1"
            >
              <ng-option
                *ngFor="let type of Paytype"
                [value]="type.id"
                [translate]="'name'"
                [translateParams]="{ ar: type.name?.ar, en: type.name?.en }"
              >
              </ng-option>
            </ng-select>
          </div>
        </div>

        <div class="col-sm-8 col-md-6 col-lg-6 mb-0">
          <div class="form-group">
            <ng-select
              class="w-full p-0"
              placeholder="{{ 'Chose' | translate }}"
              [(ngModel)]="modalInvoice.ToAccountId"
              [ngModelOptions]="{ standalone: true }"
              name="ToAccountId"
              [disabled]="modalInvoice.AddOrView != 1"
            >
              <ng-option *ngFor="let user of load_Accounts" [value]="user.id">{{
                user.name
              }}</ng-option>
            </ng-select>
          </div>
        </div>

        <div class="col-sm-6 col-md-3 col-lg-2 mb-0">
          <div class="form-group">
            <input
              placeholder="{{ 'thePhone' | translate }}"
              required
              class="form-control"
              type="text"
              [(ngModel)]="modalInvoice.OrganizationsMobile"
              [ngModelOptions]="{ standalone: true }"
              disabled
            />
          </div>
        </div>


        <!-- 3 line -->

        <div class="col-sm-6 col-md-3 col-lg-3 mb-0">
          <div class="form-group">
            <label for="customerId" class="text-right col-form-label block">
              {{ "Client" | translate }}
            </label>
            <ng-select
              class="w-full p-0"
              placeholder="{{ 'Chose' | translate }}"
              id="customerId"
              disabled
              name="customerId"
              (change)="customerIdChange()"
              [(ngModel)]="modalInvoice.customerId"
              [ngModelOptions]="{ standalone: true }"
            >
              <ng-option *ngFor="let user of load_Customer" [value]="user.id">{{
                user.name
              }}</ng-option>
            </ng-select>
          </div>
        </div>

        <div
          class="col-sm-6 col-md-3 col-lg-2 mb-0"
          *ngIf="modalInvoice.popuptype != 2 && invoicepop != 2"
        >
          <div class="form-group">
            <label for="ProjectId" class="text-right col-form-label block">
              {{ "Project" | translate }}
            </label>
            <ng-select
              class="w-full p-0"
              placeholder="{{ 'Chose' | translate }}"
              id="ProjectId"
              name="ProjectId"
              (change)="ProjectIdChange()"
              [(ngModel)]="modalInvoice.ProjectId"
              [ngModelOptions]="{ standalone: true }"
              [disabled]="modalInvoice.AddOrView != 1"
            >
              <ng-option *ngFor="let user of load_Projects" [value]="user.id">{{
                user.name
              }}</ng-option>
            </ng-select>
          </div>
        </div>

        <div class="col-sm-6 col-md-3 col-lg-2 mb-0" *ngIf="invoicepop == 2">
          <div class="form-group">
            <input
              placeholder="{{ 'Project' | translate }}"
              required
              class="form-control"
              type="text"
              [(ngModel)]="modalDetailsProject.projectNo"
              [ngModelOptions]="{ standalone: true }"
              disabled
            />
          </div>
        </div>

        <div
          class="col-sm-6 col-md-3 col-lg-2 mb-0"
          *ngIf="modalInvoice.popuptype == 2 && invoicepop != 2"
        >
          <div class="d-flex">
            <input
              type="checkbox"
              name="AllCustomer"
              id="AllCustomer"
              id="AllCustomerCheck"
              disabled
              name="AllCustomerCheck"
              [(ngModel)]="modalInvoice.AllCustomerCheck"
              [ngModelOptions]="{ standalone: true }"
              (change)="AllCustomerCheckChange()"
            />
            <label for="AllCustomerCheck" class="mx-2">{{
              "AllCustomer" | translate
            }}</label>
          </div>
        </div>

        <div class="col-sm-6 col-md-3 col-lg-3 mb-0">
          <div class="form-group">
            <label for="CustomerTax" class="text-right col-form-label block">
              {{ "Tax Number" | translate }}
            </label>
            <input
              required
              placeholder="{{ '' | translate }}"
              class="form-control"
              type="text"
              id="CustomerTax"
              name="CustomerTax"
              disabled
              [(ngModel)]="modalInvoice.CustomerTax"
              [ngModelOptions]="{ standalone: true }"
            />
          </div>
        </div>
        <div class="col-sm-6 col-md-3 col-lg-3 mb-0" style="display: none">
          <div class="form-group">
            <label
              for="CustomerAddress"
              class="text-right col-form-label block"
            >
              {{ "Address" | translate }}
            </label>
            <input
              required
              placeholder="{{ '' | translate }}"
              class="form-control"
              id="CustomerAddress"
              name="CustomerAddress"
              type="text"
              disabled
              [(ngModel)]="modalInvoice.CustomerAddress"
              [ngModelOptions]="{ standalone: true }"
            />
          </div>
        </div>

        <div class="col-sm-8 col-md-4 col-lg-3 mb-0 text-end">
          <div class="form-check form-switch position-relative">
            <label
              class="form-check-label priceOffer"
              for="flexSwitchCheckDefault"
              style="width: max-content"
            >
              {{ "OfferPriceActiveNew" | translate }}
            </label>
            <input
              style="inset-inline-start: 0"
              class="form-check-input px-3 priceOfferInput position-absolute left-100"
              (change)="showPrice = !showPrice; offerpriceChange()"
              type="checkbox"
              role="switch"
              id="flexSwitchCheckDefault"
              [(ngModel)]="modalInvoice.OfferPriceNoCheck"
              [ngModelOptions]="{ standalone: true }"
              [disabled]="modalInvoice.AddOrView != 1"
            />
          </div>
        </div>

        <div
          class="col-sm-4 col-md-2 col-lg-1 mb-0"
          style="padding: 0 !important"
          *ngIf="showPrice && load_OfferPrices.length > 0"
        >
          <div class="form-group">
            <label for="OfferPriceNo" class="text-right col-form-label block">
              {{ "OfferPrice" | translate }}
            </label>
            <ng-select
              style="min-width: 79px !important"
              class="w-full p-0"
              style="min-width: max-content"
              id="OfferPriceNo"
              name="OfferPriceNo"
              placeholder="{{ 'Chose' | translate }}"
              (change)="offerpriceChange()"
              [(ngModel)]="modalInvoice.OfferPriceNo"
              [ngModelOptions]="{ standalone: true }"
              [disabled]="modalInvoice.AddOrView != 1"
            >
              <ng-option
                *ngFor="let user of load_OfferPrices"
                [value]="user.id"
                >{{ user.name }}</ng-option
              >
            </ng-select>
          </div>
        </div>
        <div class="col-sm-4 col-md-2 col-lg-1 mb-3" *ngIf="!showPrice">
          <span style="color: red"> {{ "shifta" | translate }}</span>
        </div>
        <div class="col-sm-6 col-md-3 col-lg-3 mb-0">
          <div class="form-group">
            <label for="StorehouseId" class="text-right col-form-label block">
              {{ "Storehouse" | translate }}</label
            >
            <div class="flex">
              <ng-select
              class="w-full p-0"
              placeholder="{{ 'Chose' | translate }}"
              [(ngModel)]="modalInvoice.storehouseId"
              [ngModelOptions]="{ standalone: true }"
              [disabled]="modalInvoice.AddOrView != 1"
              name="storehouseId"
              >
                <ng-option *ngFor="let user of Storehouse" [value]="user.id">{{
                  user.name
                }}</ng-option>
              </ng-select>
              <button
                type="button"
                [disabled]="modalInvoice.AddOrView != 1"
                class="btn bg-base text-white"
                style="padding: 5px 10px"
                (click)="open(StorehouseModal)"
              >
                <i class="fa fa-plus"></i>
              </button>
            </div>
          </div>
        </div>
      </div>

      <div class="row mb-3">
        <h3
          class="flex items-center justify-start fw-bold"
          style="display: none"
        >
          {{ "services" | translate }}
          <button
            *ngIf="modalInvoice.AddOrView == 1"
            type="button "
            class="add-btn mx-2"
            (click)="addInvoiceRow()"
          >
            <i class="fa fa-plus"></i>
          </button>
        </h3>
        <div
          class="editable shadow mb-2 block customTable"
          style="overflow: auto"
        >
          <table
            class="table table-responsive table-striped table-bordered text-center"
            style="
              vertical-align: middle;
              font-size: 14px;
              min-width: max-content;
            "
          >
            <thead
              class="bg-base text-white"
              style="line-height: 30px; font-size: 13px"
            >
              <tr>
                <th>{{ "ServiceNo" | translate }}</th>
                <th style="width: 30% !important">
                  {{ "ServiceName" | translate }}
                </th>
                <th>{{ "Unit" | translate }}</th>
                <th>{{ "Quantity" | translate }}</th>
                <th>{{ "price" | translate }}</th>
                <th>{{ "Discount" | translate }}</th>
                <th>{{ "discountPercentage" | translate }}</th>
                <th>{{ "totalBeforeTax" | translate }}</th>
                <th>{{ "VATTax" | translate }}</th>
                <th>{{ "Net_taxes" | translate }}</th>
                <th>{{ "delete" | translate }}</th>
              </tr>
            </thead>
            <tbody>
              <tr
                *ngFor="let item of InvoiceDetailsRows; let i = index"
                style="line-height: 5px"
              >
                <td>{{ item.idRow }}</td>
                <td
                  (click)="
                    modalInvoice.AddOrView == 1 &&
                      open(servicesListModal, null, 'servicesList', item.idRow)
                  "
                >
                  <input
                    type="text"
                    name="os-name{{ item.idRow }}"
                    [(ngModel)]="item.accountJournaltxt"
                    readonly
                  />
                </td>
                <td>
                  <input
                    type="text"
                    name="os-Unit{{ item.idRow }}"
                    [(ngModel)]="item.UnitConst"
                    disabled
                  />
                </td>
                <td>
                  <input
                    type="number"
                    min="0"
                    name="os-Qty{{ item.idRow }}"
                    [(ngModel)]="item.QtyConst"
                    [disabled]="modalInvoice.AddOrView != 1"
                    (keyup)="CalculateTotal2(1)"
                  />
                </td>
                <td>
                  <input
                    type="number"
                    min="0"
                    name="os-Amount{{ item.idRow }}"
                    [(ngModel)]="item.Amounttxt"
                    [disabled]="modalInvoice.AddOrView != 1"
                    (keyup)="CalculateTotal2(1)"
                  />
                </td>
                <td>
                  <input
                    type="number"
                    min="0"
                    name="os-DiscountValue{{ item.idRow }}"
                    [(ngModel)]="item.DiscountValueConst"
                    [disabled]="modalInvoice.AddOrView != 1"
                    (keyup)="CalculateTotal2(1)"
                  />
                </td>
                <td>
                  <input
                    type="number"
                    min="0"
                    name="os-DiscountPercentage{{ item.idRow }}"
                    [(ngModel)]="item.DiscountPercentageConst"
                    [disabled]="modalInvoice.AddOrView != 1"
                    (keyup)="CalculateTotal2(2)"
                  />
                </td>
                <td>
                  <input
                    type="text"
                    name="os-AmountBefore{{ item.idRow }}"
                    [(ngModel)]="item.AmountBeforeTaxtxt"
                    [disabled]="modalInvoice.AddOrView != 1"
                    readonly
                  />
                </td>
                <td>
                  <input
                    type="text"
                    name="os-taxAmount{{ item.idRow }}"
                    [(ngModel)]="item.taxAmounttxt"
                    [disabled]="modalInvoice.AddOrView != 1"
                    readonly
                  />
                </td>
                <td>
                  <input
                    type="text"
                    name="os-TotalAmount{{ item.idRow }}"
                    [(ngModel)]="item.TotalAmounttxt"
                    [disabled]="modalInvoice.AddOrView != 1"
                    readonly
                  />
                </td>

                <td class="flex">
                  <button
                    title=""
                    class="p-2 bg-orange-100 hover:bg-orange-500 rounded-lg duration-300 hover:text-white w-10"
                    style="margin-inline-end: 6px"
                    (click)="
                      open(
                        serviceDetailsModal_Invoice,
                        item,
                        'serviceDetails_Invoice'
                      )
                    "
                  >
                    <i class="fa-solid fa-info"></i>
                  </button>
                  <button
                    *ngIf="modalInvoice.AddOrView == 1"
                    (click)="
                      RemoveServicesparent_invoice(item);
                      deleteInvoiceRow(item.idRow)
                    "
                    class="p-2 bg-red-100 hover:bg-red-500 rounded-lg duration-300 hover:text-white w-10"
                  >
                    <i class="fa-solid fa-trash-can"></i>
                  </button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="row">
          <div class="col-md-6">
            <div class="box w-100 p-3">
              <div>
                <label for="include_tax">{{ "tax type" | translate }}</label>
                <ng-select
                  class="w-100"
                  placeholder="{{ 'Chose' | translate }}"
                  name="include_tax"
                  [(ngModel)]="modalInvoice.taxtype"
                  [ngModelOptions]="{ standalone: true }"
                  [disabled]="modalInvoice.AddOrView != 1"
                  [clearable]="false"
                  (change)="taxtypeChange()"
                >
                  <ng-option [value]="2">{{
                    "Excluding tax" | translate
                  }}</ng-option>
                  <ng-option [value]="3">{{
                    "Taxes included" | translate
                  }}</ng-option>
                </ng-select>
              </div>

              <div>
                <label for="paid" class="text-right col-form-label block">
                  {{ "paid" | translate }}
                </label>
                <input
                  id="paid"
                  required
                  class="form-control bg-green"
                  type="text"
                  [(ngModel)]="modalInvoice.PaidValue"
                  [ngModelOptions]="{ standalone: true }"
                  [disabled]="modalInvoice.AddOrView != 1"
                  [readOnly]="modalInvoice.PayType == 8"
                  (keyup)="checkRemainder()"
                />
              </div>

              <div>
                <label for="remaining">{{ "remaining" | translate }}</label>
                <input
                  type="text"
                  id="remaining"
                  name="remaining"
                  class="form-control bg-red"
                  [(ngModel)]="modalInvoice.remainder"
                  [ngModelOptions]="{ standalone: true }"
                  disabled
                />
              </div>
            </div>

            <div class="d-flex me-3">
              <input
                type="checkbox"
                name="printBankAccount"
                id="printBankAccount"
                [(ngModel)]="modalInvoice.printBankAccount"
                [ngModelOptions]="{ standalone: true }"
                [disabled]="modalInvoice.AddOrView != 1"
              />
              <label for="date" class="mx-2">{{
                "hideAccount" | translate
              }}</label>
            </div>

            <div class="form-group row me-3">
              <label for="Statement" class="col-sm-2 col-form-label">{{
                "Statement" | translate
              }}</label>
              <div class="col-sm-10">
                <input
                  [disabled]="modalInvoice.AddOrView != 1"
                  type="text"
                  id="Statement"
                  name="Statement"
                  class="form-control"
                  placeholder="{{ 'Statement' | translate }}"
                  [(ngModel)]="modalInvoice.InvoiceNotes"
                  [ngModelOptions]="{ standalone: true }"
                  autocomplete="off"
                />
              </div>
            </div>

            <div class="form-group row me-3">
              <label for="theNotes" class="col-sm-2 col-form-label">{{
                "theNotes" | translate
              }}</label>
              <div class="col-sm-10">
                <input
                  [disabled]="modalInvoice.AddOrView != 1"
                  type="text"
                  id="theNotes"
                  name="theNotes"
                  class="form-control"
                  placeholder="{{ 'theNotes' | translate }}"
                  [(ngModel)]="modalInvoice.Notes"
                  [ngModelOptions]="{ standalone: true }"
                  autocomplete="off"
                />
              </div>
            </div>
            <div class="form-group row me-3">
              <label for="attachments" class="col-sm-2 col-form-label">{{
                "attachments" | translate
              }}</label>
              <div class="col-sm-10">
                <file-upload
                  class="w-full"
                  style="min-height: 40px"
                  [(ngModel)]="uploadedFiles"
                  name="files"
                ></file-upload>
              </div>
            </div>
          </div>
          <div class="col-md-6">
            <div class="box w-100 px-2 py-2 mx-3">
              <div>
                <label
                  for="totalAmount"
                  class="text-right col-form-label block"
                >
                  {{ "totalAmount" | translate }}
                </label>
                <input
                  id="totalAmount"
                  required
                  class="form-control"
                  type="text"
                  [(ngModel)]="modalInvoice.totalAmount"
                  [ngModelOptions]="{ standalone: true }"
                  disabled
                />
              </div>
              <div>
                <label
                  for="TotalDiscount"
                  class="text-right col-form-label block"
                >
                  {{ "TotalDiscount" | translate }}
                </label>
                <input
                  id="TotalDiscount"
                  required
                  class="form-control"
                  type="text"
                  [(ngModel)]="modalInvoice.discounMoneytVal"
                  [ngModelOptions]="{ standalone: true }"
                  disabled
                />
              </div>

              <div>
                <label for="netAmount" class="text-right col-form-label block">
                  {{ "netAmount" | translate }}
                </label>
                <input
                  id="netAmount"
                  required
                  class="form-control"
                  type="text"
                  [(ngModel)]="modalInvoice.totalWithDiscount"
                  [ngModelOptions]="{ standalone: true }"
                  disabled
                />
              </div>

              <div>
                <label for="AllTotal" class="text-right col-form-label block">
                  {{ "AllTotal" | translate }}
                </label>
                <input
                  id="AllTotal"
                  required
                  class="form-control"
                  type="text"
                  [(ngModel)]="modalInvoice.total_"
                  [ngModelOptions]="{ standalone: true }"
                  disabled
                />
              </div>

              <div>
                <label for="netBill">{{ "netBill" | translate }}</label>
                <input
                  type="text"
                  id="netBill"
                  name="netBill"
                  class="form-control"
                  [(ngModel)]="modalInvoice.VoucherValue"
                  [ngModelOptions]="{ standalone: true }"
                  disabled
                />
              </div>

              <div>
                <label for="TotalTaxes" class="text-right col-form-label block">
                  {{ "TotalTaxes" | translate }}
                </label>
                <input
                  id="TotalTaxes"
                  required
                  class="form-control bg-yellow"
                  type="text"
                  [(ngModel)]="modalInvoice.taxAmountLbl"
                  [ngModelOptions]="{ standalone: true }"
                  disabled
                />
              </div>

              <div>
                <label for="CreditNoteTotal">{{
                  "CreditNoteTotal" | translate
                }}</label>
                <input
                  type="text"
                  id="CreditNoteTotal"
                  name="CreditNoteTotal"
                  class="form-control"
                  [(ngModel)]="modalInvoice.CreditNotiLbl"
                  [ngModelOptions]="{ standalone: true }"
                  disabled
                />
              </div>

              <div style="display: none">
                <label for="TotalDebtorNotice">{{
                  "TotalDebtorNotice" | translate
                }}</label>
                <input
                  type="text"
                  id="TotalDebtorNotice"
                  name="TotalDebtorNotice"
                  class="form-control"
                  [(ngModel)]="modalInvoice.DepitNotiLbl"
                  [ngModelOptions]="{ standalone: true }"
                  disabled
                />
              </div>

              <div>
                <label for="Net_taxes" class="text-right col-form-label block">
                  {{ "Net_taxes" | translate }}
                </label>
                <input
                  id="Net_taxes"
                  required
                  class="form-control bg-black"
                  type="text"
                  [(ngModel)]="modalInvoice.TotalVoucherValueLbl"
                  [ngModelOptions]="{ standalone: true }"
                  disabled
                />
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- footer -->
    </ng-container>

    <div class="d-flex justify-content-end" *ngIf="modalInvoice.AddOrView == 1">
      <div class="pt-1 m-1" *ngIf="invoicepop != 2">
        <button
          [disabled]="disableButtonSave_Invoice"
          (click)="
            modalInvoice.WhichClick = 2;
            open(
              SaveInvoiceConfirmModal,
              null,
              'SaveInvoiceConfirmModal',
              null,
              modal
            )
          "
          class="btn text-white"
          style="background-color: var(--base-color)"
        >
          {{ "Save_CarryOver" | translate }}
        </button>
      </div>

      <div class="pt-1 m-1">
        <button (click)="modal?.dismiss()" class="btn btn-secondary">
          {{ "close" | translate }}
        </button>
      </div>
      <div class="pt-1 m-1" *ngIf="invoicepop == 2">
        <button (click)="modal?.dismiss()" class="btn btn-secondary">
          {{ "continuou" | translate }}
        </button>
      </div>

      <div class="pt-1 m-1" *ngIf="invoicepop != 2">
        <button
          [disabled]="disableButtonSave_Invoice"
          (click)="
            modalInvoice.WhichClick = 1;
            open(
              SaveInvoiceConfirmModal,
              null,
              'SaveInvoiceConfirmModal',
              null,
              modal
            )
          "
          class="btn text-white"
          style="background-color: var(--base-color)"
        >
          {{ "save" | translate }}
        </button>
      </div>
    </div>
  </div>
</ng-template>

<!-- addOfferPrice / edit -->
<ng-template #addOfferPrice let-modal>
  <div
    style="background-color: var(--base-color)"
    class="modal-header text-white flex justify-between items-center"
  >
    <h4 class="modal-title mb-0" id="modal-basic-title">
      <span *ngIf="modalDetailsOffer?.id">{{
        "editNewOffer" | translate
      }}</span>

      <span *ngIf="!modalDetailsOffer?.id">{{
        "addNewOffer" | translate
      }}</span>
    </h4>
    <button
      type="button"
      class="text-white m-0"
      aria-label="Close"
      (click)="modal.dismiss('Cross click')"
    >
      <i class="fa fa-close"></i>
    </button>
  </div>

  <div class="modal-body">
    <form #offerPriceForm="ngForm">
      <div class="row align-items-end mb-4">
        <div class="col-sm-6 col-md-3 col-lg-2 mb-0 mb-sm-3">
          <div class="form-group">
            <label for="customer" class="text-right col-form-label block">
              {{ "Customer Name" | translate }}
            </label>
            <input
              required
              #customer="ngModel"
              [(ngModel)]="modalDetailsOffer.customer"
              ngModel
              class="form-control"
              type="text"
              id="customer"
              name="customer"
              [disabled]="existValue"
              autocomplete="off"
            />
          </div>
        </div>

        <div class="col-sm-6 col-md-3 col-lg-2 mb-0 mb-sm-3">
          <div class="form-group">
            <label for="customerEn" class="text-right col-form-label block">
              {{ "Client Name (English)" | translate }}
            </label>
            <input
              required
              #customerEn="ngModel"
              [(ngModel)]="modalDetailsOffer.customerEn"
              ngModel
              class="form-control"
              type="text"
              id="customerEn"
              name="customerEn"
              [disabled]="existValue"
              autocomplete="off"
            />
          </div>
        </div>

        <div class="col-sm-6 col-md-3 col-lg-2 mb-0 mb-sm-3">
          <div class="form-group">
            <label for="customerEmail" class="text-right col-form-label block">
              {{ "Email" | translate }}
            </label>
            <input
              required
              #customerEmail="ngModel"
              [(ngModel)]="modalDetailsOffer.customerEmail"
              ngModel
              class="form-control"
              type="text"
              id="customerEmail"
              name="customerEmail"
              [disabled]="existValue"
              email
              autocomplete="off"
            />
          </div>
        </div>

        <div class="col-sm-6 col-md-3 col-lg-2 mb-0 mb-sm-3">
          <div class="form-group">
            <label for="customerPhone" class="text-right col-form-label block">
              {{ "Mobile Number" | translate }}
            </label>
            <input
              required
              #customerPhone="ngModel"
              [(ngModel)]="modalDetailsOffer.customerPhone"
              ngModel
              class="form-control"
              type="tel"
              id="customerPhone"
              name="customerPhone"
              [disabled]="existValue"
              autocomplete="off"
            />
          </div>
        </div>

        <div class="col-sm-6 col-md-3 col-lg-2 mb-0 mb-sm-3">
          <div class="form-group">
            <label class="text-right col-form-label block">
              {{ "Chose Date" | translate }}
            </label>
            <div class="form-group timeInput">
              <input
                [(ngModel)]="modalDetailsOffer.date"
                name="date"
                type="text"
                class="form-control"
                bsDatepicker
                autocomplete="off"
              />
            </div>
          </div>
        </div>

        <div class="col-sm-6 col-md-3 col-lg-2 mb-0 mb-sm-3">
          <div class="form-group">
            <input
              disabled
              #exist="ngModel"
              ngModel
              type="checkbox"
              [(ngModel)]="existValue"
              id="exist"
              name="exist"
              (change)="resetCustomer()"
            />
            <label for="exist" class="text-right col-form-label mx-2">
              {{ "existUser" | translate }}
            </label>
          </div>
        </div>

        <div class="col-sm-6 col-md-3 col-lg-2 mb-0 mb-sm-3">
          <div class="form-group">
            <label class="col-form-label"> {{ "Customer" | translate }}</label>
            <ng-select
              disabled
              class="w-full p-0"
              style="min-width: max-content"
              placeholder="{{ 'Chose' | translate }}"
              [(ngModel)]="modalDetailsOffer.user"
              [ngModelOptions]="{ standalone: true }"
              [readonly]="!existValue"
              name="user"
            >
              <ng-option
                *ngFor="let user of load_CustomerM"
                [value]="user.id"
                >{{ user.name }}</ng-option
              >
            </ng-select>
          </div>
        </div>

        <div class="col-sm-6 col-md-3 col-lg-2 mb-0 mb-sm-3">
          <div class="form-group">
            <label class="col-form-label"> {{ "Title" | translate }}</label>
            <ng-select
              class="w-full p-0"
              style="min-width: max-content"
              placeholder="{{ 'Chose' | translate }}"
              [(ngModel)]="modalDetailsOffer.title"
              [ngModelOptions]="{ standalone: true }"
              name="title"
            >
              <ng-option
                *ngFor="let user of NickNameList"
                [value]="user.id"
                [translate]="'name'"
                [translateParams]="{ ar: user?.name?.ar, en: user?.name?.en }"
              ></ng-option>
            </ng-select>
          </div>
        </div>

        <div class="col-sm-6 col-md-3 col-lg-2 mb-0 mb-sm-3">
          <div class="form-group">
            <label class="col-form-label">
              {{ "description" | translate }}</label
            >
            <ng-select
              class="w-full p-0"
              style="min-width: max-content"
              placeholder="{{ 'Chose' | translate }}"
              [(ngModel)]="modalDetailsOffer.description"
              [ngModelOptions]="{ standalone: true }"
              name="description"
            >
              <ng-option
                *ngFor="let user of DescriptionList"
                [value]="user.id"
                [translate]="'name'"
                [translateParams]="{ ar: user?.name?.ar, en: user?.name?.en }"
              ></ng-option>
            </ng-select>
          </div>
        </div>

        <div class="col-sm-6 col-md-3 col-lg-2 mb-0 mb-sm-3">
          <div class="form-group">
            <label class="col-form-label">
              {{ "sales Engineer" | translate }}</label
            >
            <ng-select
              class="w-full p-0"
              style="min-width: max-content"
              placeholder="{{ 'Chose' | translate }}"
              [(ngModel)]="modalDetailsOffer.salesEngineer"
              [ngModelOptions]="{ standalone: true }"
              (change)="GetUserInfo()"
              name="salesEngineer"
            >
              <ng-option *ngFor="let user of load_EngM" [value]="user.id">{{
                user.name
              }}</ng-option>
            </ng-select>
          </div>
        </div>

        <div class="col-sm-6 col-md-3 col-lg-2 mb-0 mb-sm-3">
          <div class="form-group">
            <label for="department" class="text-right col-form-label block">
              {{ "department" | translate }}
            </label>
            <input
              required
              #department="ngModel"
              [(ngModel)]="modalDetailsOffer.department"
              ngModel
              class="form-control"
              type="text"
              id="department"
              name="department"
              autocomplete="off"
              disabled
            />
          </div>
        </div>

        <div class="col-sm-6 col-md-3 col-lg-2 mb-0 mb-sm-3">
          <div class="form-group">
            <label for="offer_no" class="text-right col-form-label block">
              {{ "Offer Number" | translate }}
            </label>
            <div class="flex items-start">
              <input
                required
                #offer_no="ngModel"
                [(ngModel)]="modalDetailsOffer.offer_no"
                ngModel
                class="form-control"
                type="text"
                id="offer_no"
                name="offer_no"
                (change)="OfferNoTxtChenged()"
                [disabled]="!showOfferValue"
              />
              <input
                #showOffer="ngModel"
                [(ngModel)]="showOfferValue"
                class="form-check-input"
                type="checkbox"
                name="showOffer"
                style="height: 38px; width: 38px; margin: 0"
              />
            </div>
          </div>
        </div>

        <div class="col-sm-6 col-md-6 mb-0 mb-sm-3">
          <div class="form-group">
            <label for=" offer_intro" class="text-right col-form-label block">
              {{ "Presentation" | translate }}
            </label>
            <input
              required
              #offer_intro="ngModel"
              [(ngModel)]="modalDetailsOffer.offer_intro"
              ngModel
              class="form-control"
              type="text"
              id="offer_intro"
              name="offer_intro"
              autocomplete="off"
            />
          </div>
        </div>

        <div class="col-sm-6 col-md-3 mb-0 mb-sm-3 flex justify-center">
          <div class="form-group">
            <input
              #default="ngModel"
              ngModel
              type="checkbox"
              id="default"
              name="default"
              [(ngModel)]="modalDetailsOffer.default"
            />
            <label for="default" class="text-right col-form-label mx-2">
              {{ "default" | translate }}
            </label>
          </div>
        </div>

        <div class="col-sm-6 col-md-3 mb-0 mb-sm-3">
          <div class="form-group" *ngIf="!modalDetailsOffer?.id">
            <button
              type="button"
              class="btn bg-base text-white area-btn"
              (click)="open(LandArea, null, 'LandArea')"
            >
              <i class="fa fa-user mx-2"></i>
              <span>{{ "Land area and required floors" | translate }}</span>
            </button>
          </div>
        </div>
      </div>

      <div class="row mb-3">
        <h3 class="flex items-center justify-start fw-bold">
          {{ "services" | translate }}
          <button type="button " class="add-btn mx-2" (click)="addService()">
            <i class="fa fa-plus"></i>
          </button>
        </h3>

        <div class="editable shadow mb-4" style="overflow-x: auto">
          <table
            class="table table-responsive table-striped table-bordered text-center"
            style="vertical-align: middle; font-size: 14px"
          >
            <thead
              class="bg-base text-white"
              style="line-height: 30px; font-size: 13px"
            >
              <tr>
                <th>{{ "ServiceNo" | translate }}</th>
                <th style="width: 30% !important">
                  {{ "ServiceName" | translate }}
                </th>
                <th>{{ "Unit" | translate }}</th>
                <th>{{ "Quantity" | translate }}</th>
                <th>{{ "price" | translate }}</th>
                <th>{{ "totalBeforeTax" | translate }}</th>
                <th>{{ "VATTax" | translate }}</th>
                <th>{{ "netTax" | translate }}</th>
                <th>{{ "action" | translate }}</th>
              </tr>
            </thead>
            <tbody>
              <tr
                *ngFor="let item of offerServices; let i = index"
                style="line-height: 5px"
              >
                <td>{{ item.idRow }}</td>
                <td
                  (click)="
                    open(
                      servicesListModal_Offer,
                      null,
                      'servicesList',
                      item.idRow
                    )
                  "
                >
                  <input
                    type="text"
                    name="os-name{{ item.idRow }}"
                    [(ngModel)]="item.accountJournaltxt"
                    ngModel
                    readonly
                  />
                </td>
                <td>
                  <input
                    type="text"
                    name="os-unit{{ item.idRow }}"
                    [(ngModel)]="item.UnitConst"
                    readonly
                  />
                </td>

                <td>
                  <input
                    type="text"
                    name="os-amount{{ item.idRow }}"
                    [(ngModel)]="item.QtyConst"
                    (keyup)="CalculateTotal_Offer()"
                  />
                </td>

                <td>
                  <input
                    type="number"
                    name="os-price{{ item.idRow }}"
                    [(ngModel)]="item.Amounttxt"
                    (keyup)="CalculateTotal_Offer()"
                  />
                </td>

                <td>
                  <div class="flex">
                  <input
                    type="text"
                    name="os-AmountBefore{{ item.idRow }}"
                    [(ngModel)]="item.AmountBeforeTaxtxt"
                    readonly
                  />
                 </div>
                </td>

                <td>
                  <input
                    type="number"
                    name="os-vatTax{{ item.idRow }}"
                    [(ngModel)]="item.taxAmounttxt"
                    readonly
                  />
                </td>
                <td>
                  <input
                    type="number"
                    name="os-taxes{{ item.idRow }}"
                    [(ngModel)]="item.TotalAmounttxt"
                    readonly
                  />
                </td>
                <td class="flex">
                  <button
                    title=""
                    class="p-2 bg-orange-100 hover:bg-orange-500 rounded-lg duration-300 hover:text-white w-10"
                    style="margin-inline-end: 6px"
                    (click)="open(serviceDetailsModal, item, 'serviceDetails')"
                  >
                    <i class="fa-solid fa-info"></i>
                  </button>
                  <button
                    class="p-2 bg-red-100 hover:bg-red-500 rounded-lg duration-300 hover:text-white w-10"
                    (click)="deleteService(item.idRow)"
                  >
                    <i class="fa-solid fa-trash-can"></i>
                  </button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="box-info">
          <div>
            <label for="include_tax">{{ "tax type" | translate }}</label>
            <ng-select
              class="p-0"
              placeholder="{{ 'Chose' | translate }}"
              name="include_tax"
              [(ngModel)]="modalDetailsOffer.taxtype"
              (change)="CalculateTotal_Offer()"
              [clearable]="false"
            >
              <ng-option [value]="2">{{
                "Excluding tax" | translate
              }}</ng-option>
              <ng-option [value]="3">{{
                "Taxes included" | translate
              }}</ng-option>
            </ng-select>
          </div>

          <div>
            <label for="total_amount">{{ "Total amount" | translate }}</label>
            <input
              type="number"
              id="total_amount"
              name="total_amount"
              class="form-control"
              [(ngModel)]="modalDetailsOffer.total_amount"
              readonly
            />
          </div>

          <div>
            <label for="total_amount_text">{{
              "total in writing" | translate
            }}</label>
            <input
              type="text"
              id="total_amount_text"
              name="total_amount_text"
              class="form-control"
              [(ngModel)]="modalDetailsOffer.total_amount_text"
              readonly
            />
          </div>
        </div>
      </div>

      <div class="row mb-3">
        <h3 class="flex items-center justify-start fw-bold">
          {{ "payments" | translate }}
          <button type="button " class="add-btn mx-2" (click)="addPayments()">
            <i class="fa fa-plus"></i>
          </button>
        </h3>

        <div class="table editable shadow">
          <table
            class="table table-responsive table-striped table-bordered text-center"
            style="vertical-align: middle; font-size: 14px"
          >
            <thead
              class="bg-base text-white"
              style="line-height: 30px; font-size: 13px"
            >
              <tr>
                <th>{{ "Statement" | translate }}</th>
                <th>{{ "English statement" | translate }}</th>
                <th>{{ "Ratio" | translate }}</th>
                <th>{{ "amount" | translate }}</th>
                <th>{{ "action" | translate }}</th>
                <th>{{ "Installing" | translate }}</th>
              </tr>
            </thead>
            <tbody>
              <tr
                *ngFor="let item of offerPayments; let i = index"
                style="line-height: 5px"
              >
                <td>
                  <input
                    type="text"
                    name="op-statement{{ item.idRow }}"
                    [(ngModel)]="item.statement"
                    ngModel
                  />
                </td>
                <td>
                  <input
                    type="text"
                    name="op-statementEn{{ item.idRow }}"
                    [(ngModel)]="item.statementEn"
                  />
                </td>
                <td class="relative">
                  <input
                    type="number"
                    name="op-ratio{{ item.idRow }}"
                    [(ngModel)]="item.ratio"
                    (keyup)="CalcOfferDet(1)"
                  />
                  <span class="absolute percent">%</span>
                </td>
                <td>
                  <input
                    type="number"
                    name="op-amount{{ item.idRow }}"
                    [(ngModel)]="item.amount"
                    (keyup)="CalcOfferDet(2)"
                  />
                </td>
                <td>
                  <button
                    class="p-2 bg-red-100 hover:bg-red-500 rounded-lg duration-300 hover:text-white w-10"
                    (click)="deletePayments(item.idRow)"
                  >
                    <i class="fa-solid fa-trash-can"></i>
                  </button>
                </td>
                <td>
                  <input
                    type="checkbox"
                    [(ngModel)]="item.status"
                    name="op-status{{ item.idRow }}"
                  />
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <div class="row">
        <h3 class="flex items-center justify-start fw-bold">
          {{ "Terms" | translate }}
          <button type="button " class="add-btn mx-2" (click)="addTerm()">
            <i class="fa fa-plus"></i>
          </button>
        </h3>

        <div class="table editable shadow">
          <table
            class="table table-responsive table-striped table-bordered text-center"
            style="vertical-align: middle; font-size: 14px"
          >
            <thead
              class="bg-base text-white"
              style="line-height: 30px; font-size: 13px"
            >
              <tr>
                <th>{{ "Statement" | translate }}</th>
                <th>{{ "English statement" | translate }}</th>
                <th>{{ "action" | translate }}</th>
                <th>{{ "Installing" | translate }}</th>
              </tr>
            </thead>
            <tbody>
              <tr
                *ngFor="let item of offerTerms; let i = index"
                style="line-height: 5px"
              >
                <td>
                  <input
                    type="text"
                    name="ot-statement{{ item.idRow }}"
                    [(ngModel)]="item.statement"
                    ngModel
                  />
                </td>
                <td>
                  <input
                    type="text"
                    name="ot-statementEn{{ item.idRow }}"
                    [(ngModel)]="item.statementEn"
                  />
                </td>
                <td>
                  <button
                    class="p-2 bg-red-100 hover:bg-red-500 rounded-lg duration-300 hover:text-white w-10"
                    (click)="deleteTerm(item.idRow)"
                  >
                    <i class="fa-solid fa-trash-can"></i>
                  </button>
                </td>
                <td>
                  <input
                    type="checkbox"
                    [(ngModel)]="item.status"
                    name="ot-status{{ item.idRow }}"
                  />
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <hr class="my-3" />

      <div class="row">
        <div class="col-sm-6 col-md-4 col-lg-3 mb-0 mb-sm-3">
          <div class="form-group">
            <input
              #remeberMe="ngModel"
              ngModel
              type="checkbox"
              id="remeberMe"
              name="remeberMe"
              [(ngModel)]="modalDetailsOffer.remeberMe"
            />
            <label for="remeberMe" class="text-right col-form-label mx-2">
              {{ "remeberMe" | translate }}
            </label>
          </div>
        </div>
        <div class="col-sm-6 col-md-4 col-lg-3 mb-0 mb-sm-3">
          <div class="form-group">
            <div class="form-group timeInput">
              <input
                placeholder="{{ 'Chose Date' | translate }}"
                [(ngModel)]="modalDetailsOffer.followDate"
                name="followDate"
                type="text"
                class="form-control"
                autocomplete="off"
                [disabled]="!modalDetailsOffer.remeberMe"
                bsDatepicker
              />
            </div>
          </div>
        </div>
        <div class="col-sm-6 col-md-4 col-lg-3 mb-0 mb-sm-3">
          <div class="form-group">
            <input
              #showNotification="ngModel"
              ngModel
              type="checkbox"
              id="showNotification"
              name="showNotification"
              [(ngModel)]="modalDetailsOffer.showNotification"
            />
            <label
              for="showNotification"
              class="text-right col-form-label mx-2"
            >
              {{ "showNotification" | translate }}
            </label>
          </div>
        </div>
        <div class="col-sm-6 col-md-4 col-lg-3 mb-0 mb-sm-3">
          <div class="form-group">
            <input
              #showSignatures="ngModel"
              ngModel
              type="checkbox"
              id="showSignatures"
              name="showSignatures"
              [(ngModel)]="modalDetailsOffer.showSignatures"
            />
            <label for="showSignatures" class="text-right col-form-label mx-2">
              {{ "showMarks" | translate }}
            </label>
          </div>
        </div>
        <div class="col-sm-6 col-md-4 col-lg-3 mb-0 mb-sm-3">
          <div class="form-group">
            <input
              #showAccount="ngModel"
              ngModel
              type="checkbox"
              id="showAccount"
              name="showAccount"
              [(ngModel)]="modalDetailsOffer.showAccount"
            />
            <label
              for="showAccount"
              class="text-right col-form-label area-btn mx-2"
            >
              {{ "showAccount" | translate }}
            </label>
          </div>
        </div>
        <div class="col-sm-6 col-md-4 col-lg-3 mb-0 mb-sm-3">
          <div class="form-group">
            <input
              #PrintEn="ngModel"
              ngModel
              type="checkbox"
              id="PrintEn"
              name="PrintEn"
              [(ngModel)]="modalDetailsOffer.PrintEn"
            />
            <label for="PrintEn" class="text-right col-form-label mx-2">
              {{ "printEn" | translate }}
            </label>
          </div>
        </div>
        <div class="col-sm-7 col-md-5 col-lg-4 mb-0 mb-sm-3">
          <div class="form-group">
            <input
              #PrintEn="ngModel"
              ngModel
              type="checkbox"
              id="NotDisCustPrint"
              name="NotDisCustPrint"
              [(ngModel)]="modalDetailsOffer.NotDisCustPrint"
            />
            <label for="NotDisCustPrint" class="text-right col-form-label mx-2">
              {{ "Not displaying customer data in print" | translate }}
            </label>
          </div>
        </div>
      </div>
    </form>
  </div>

  <div class="modal-footer">
    <button
      type="button"
      class="btn bg-base text-white"
      (click)="AddOfferPrice(modal)"
    >
      {{ modalDetailsOffer?.id ? ("edit" | translate) : ("add" | translate) }}
    </button>

    <button (click)="modal?.dismiss()" class="btn btn-secondary">
      {{ "Back" | translate }}
    </button>
  </div>
</ng-template>

<!-- servicesListModal -->
<ng-template #servicesListModal let-modal>
  <div
    style="background-color: var(--base-color)"
    class="modal-header text-white flex justify-between items-center"
  >
    <h4 class="m-0">
      <span class="text-2xl">{{ "servicesList" | translate }}</span>
    </h4>
    <button
      type="button"
      class="text-2xl text-white m-0"
      (click)="modal.dismiss()"
    >
      <i class="fa-solid fa-xmark"></i>
    </button>
  </div>
  <div class="modal-body" style="overflow-y: scroll; max-height: 600px">
    <mat-form-field class="w-full">
      <mat-label>{{ "search" | translate }}</mat-label>
      <input matInput (keyup)="applyFilterServiceList($event)" #input />
    </mat-form-field>

    <div class="table">
      <table
        mat-table
        [dataSource]="serviceListDataSource"
        class="mat-elevation-z8 table table-responsive table-striped table-bordered text-center"
        style="vertical-align: middle; font-size: 14px"
      >
        <!-- Name Column -->
        <ng-container matColumnDef="name">
          <th mat-header-cell *matHeaderCellDef>
            {{ "ServiceName" | translate }}
          </th>
          <td mat-cell *matCellDef="let element">{{ element.servicesName }}</td>
        </ng-container>

        <!-- price Column -->
        <ng-container matColumnDef="price">
          <th mat-header-cell *matHeaderCellDef>{{ "price" | translate }}</th>
          <td mat-cell *matCellDef="let element">{{ element.amount }}</td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="servicesListdisplayedColumns"></tr>
        <tr
          mat-row
          *matRowDef="
            let row;
            let i = index;
            columns: servicesListdisplayedColumns
          "
          (dblclick)="setServiceRowValue(row); modal.dismiss()"
        ></tr>

        <!-- Row shown when there is no matching data. -->
        <tr class="mat-row" *matNoDataRow>
          <td class="mat-cell" colspan="4">
            {{ "noResult" | translate }} "{{ input.value }}"
          </td>
        </tr>
      </table>
      <mat-paginator
        #paginatorServices
        [pageSizeOptions]="[10, 25, 100, serviceListDataSource.data.length]"
      >
      </mat-paginator>
    </div>

    <div class="text-end mt-2">
      <button (click)="modal?.dismiss()" class="btn btn-secondary">
        {{ "Back" | translate }}
      </button>
    </div>
  </div>
</ng-template>

<!-- servicesListModal_Offer -->
<ng-template #servicesListModal_Offer let-modal>
  <div
    style="background-color: var(--base-color)"
    class="modal-header text-white flex justify-between items-center"
  >
    <h4 class="m-0">
      <span class="text-2xl">{{ "servicesList" | translate }}</span>
    </h4>
    <button
      type="button"
      class="text-2xl text-white m-0"
      (click)="modal.dismiss()"
    >
      <i class="fa-solid fa-xmark"></i>
    </button>
  </div>
  <div class="modal-body" style="overflow-y: scroll; max-height: 600px">
    <mat-form-field class="w-full">
      <mat-label>{{ "search" | translate }}</mat-label>
      <input matInput (keyup)="applyFilterServiceList_Offer($event)" #input />
    </mat-form-field>

    <div class="table">
      <table
        mat-table
        [dataSource]="serviceListDataSource_Offer"
        class="mat-elevation-z8 table table-responsive table-striped table-bordered text-center"
        style="vertical-align: middle; font-size: 14px"
      >
        <!-- Name Column -->
        <ng-container matColumnDef="name">
          <th mat-header-cell *matHeaderCellDef>
            {{ "ServiceName" | translate }}
          </th>
          <td mat-cell *matCellDef="let element">{{ element.servicesName }}</td>
        </ng-container>

        <!-- price Column -->
        <ng-container matColumnDef="price">
          <th mat-header-cell *matHeaderCellDef>{{ "price" | translate }}</th>
          <td mat-cell *matCellDef="let element">{{ element.amount }}</td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="servicesListdisplayedColumns"></tr>
        <tr
          mat-row
          *matRowDef="
            let row;
            let i = index;
            columns: servicesListdisplayedColumns
          "
          (dblclick)="setServiceRowValue_Offer(row); modal.dismiss()"
        ></tr>

        <!-- Row shown when there is no matching data. -->
        <tr class="mat-row" *matNoDataRow>
          <td class="mat-cell" colspan="4">
            {{ "noResult" | translate }} "{{ input.value }}"
          </td>
        </tr>
      </table>
    </div>

    <div class="text-end mt-2">
      <button (click)="modal?.dismiss()" class="btn btn-secondary">
        {{ "Back" | translate }}
      </button>
    </div>
  </div>
</ng-template>

<!-- LandArea -->
<ng-template #LandArea let-modal>
  <div
    style="background-color: var(--base-color)"
    class="modal-header text-white flex justify-between items-center"
  >
    <h4 class="m-0">
      <span class="text-2xl">{{
        "مساحة الأرض والأدوار المطلوبة" | translate
      }}</span>
    </h4>
    <button
      type="button"
      class="text-2xl text-white m-0"
      (click)="modal.dismiss()"
    >
      <i class="fa-solid fa-xmark"></i>
    </button>
  </div>
  <div class="modal-body">
    <ng-container>
      <form
        class="grid gap-3 grid-cols-1 md:grid-cols-2"
        #LandAreaForm="ngForm"
      >
        <div class="form-group">
          <label for="from" class="text-right col-form-label block">
            {{ "مساحة الأرض" | translate }}
          </label>
          <input
            required
            #from="ngModel"
            [(ngModel)]="LandAreaData.GroundSpace"
            [ngModelOptions]="{ standalone: true }"
            class="form-control"
            type="number"
            (keyup)="SelectFloorFuncCalc()"
          />
        </div>
        <div class="form-group">
          <label for="from" class="text-right col-form-label block">
            {{ "إجمالي المسطحات المسموحة" | translate }}
          </label>
          <input
            #from="ngModel"
            [(ngModel)]="LandAreaData.TotalSpaces"
            [ngModelOptions]="{ standalone: true }"
            class="form-control"
            type="number"
            readonly
            disabled="disabled"
          />
        </div>

        <div class="form-group" *ngFor="let item of LandAreaData.FloorList">
          <input
            #exist="ngModel"
            [ngModelOptions]="{ standalone: true }"
            type="checkbox"
            [(ngModel)]="item.Checked"
            id="floor{{ item.floorId }}"
            (change)="SelectFloorFuncCalc()"
          />
          <label
            for="floor{{ item.floorId }}"
            class="text-right col-form-label mx-2"
          >
            {{ item.floorName }}
          </label>
        </div>

        <div
          class="flex gap-2 pt-3 border-t border-neutral-300 col-span-1 md:col-span-2 mt-2"
        >
          <button
            class="btn bg-base text-white"
            type="submit"
            (click)="TempSave(modal)"
          >
            {{ "save" | translate }}
          </button>
          <button (click)="modal?.dismiss()" class="btn btn-secondary">
            {{ "Back" | translate }}
          </button>
        </div>
      </form>
    </ng-container>
  </div>
</ng-template>

<!-- serviceDetails -->
<ng-template #serviceDetailsModal let-modal>
  <div
    style="background-color: var(--base-color)"
    class="modal-header text-white flex justify-between items-center"
  >
    <h4 class="m-0">
      <span class="text-2xl">{{ "servicesList" | translate }}</span>
    </h4>
    <button
      type="button"
      class="text-2xl text-white m-0"
      (click)="modal.dismiss()"
    >
      <i class="fa-solid fa-xmark"></i>
    </button>
  </div>
  <div class="modal-body">
    <ul class="service_item_details">
      <li *ngFor="let item of serviceDetails">
        <div class="col-md-11">
          <i
            *ngIf="(item?.SureService ?? 0) != 1 && OfferPopupAddorEdit == 0"
            class="fa fa-xmark text-danger"
          ></i>
          <i
            *ngIf="(item?.SureService ?? 0) == 1 && OfferPopupAddorEdit == 0"
            class="fa fa-check text-success"
          ></i>
          <i
            *ngIf="OfferPopupAddorEdit == 1"
            class="fa fa-check text-success"
          ></i>
          <span class="text-base mx-2">{{ item?.name }}</span>
        </div>
        <div class="serviceBtns" *ngIf="OfferPopupAddorEdit == 0">
          <button
            *ngIf="(item?.SureService ?? 0) != 1"
            (click)="MarkServiceDetails(item)"
            type="button"
            class="btn btn-outline-success"
          >
            {{ "Insert" | translate }}
          </button>
          <button
            *ngIf="(item?.SureService ?? 0) == 1"
            (click)="UnMarkServiceDetails(item)"
            type="button"
            class="btn btn-outline-danger"
          >
            {{ "delete" | translate }}
          </button>
        </div>
      </li>
    </ul>
    <div
      class="flex gap-2 pt-3 border-t border-neutral-300 col-span-1 md:col-span-2 mt-2"
    >
      <button (click)="modal?.dismiss()" class="btn btn-secondary">
        {{ "Back" | translate }}
      </button>
    </div>
  </div>
</ng-template>

<!-- addProjectModal  -->
<ng-template #addProjectModal let-modal>
  <div
    style="background-color: var(--base-color)"
    class="modal-header text-white flex justify-between items-center"
  >
    <h4 class="m-0">
      <span class="text-2xl">{{ "new project" | translate }}</span>
    </h4>
    <button
      type="button"
      class="text-2xl text-white m-0"
      (click)="modal.dismiss()"
    >
      <i class="fa-solid fa-xmark"></i>
    </button>
  </div>
  <div class="modal-body">
    <form #form="ngForm">
      <div class="row">
        <div class="col-sm-6 col-xl-2 mb-3">
          <div class="form-group">
            <label for="projectNo" class="text-right col-form-label block">
              {{ "project number" | translate }}
            </label>
            <input
              type="text"
              class="form-control"
              id="projectNo"
              autocomplete="off"
              (keyup)="ProjectNoTxtChenged()"
              #projectNo="ngModel"
              required
              class="form-control{{
                projectNo.invalid && projectNo.touched ? 'errorInput' : ''
              }}"
              name="projectNo"
              placeholder=" {{ 'project number' | translate }}"
              [(ngModel)]="modalDetailsProject.projectNo"
            />
          </div>
        </div>
        <div class="col-sm-6 col-xl-2 mb-3">
          <div class="form-group">
            <label
              for="projectDuration"
              class="text-right col-form-label block"
            >
              {{ "Project duration" | translate }}
            </label>
            <div class="form-group timeInput">
              <input
                [(ngModel)]="modalDetailsProject.projectDuration"
                name="projectDuration"
                type="text"
                class="form-control duration-input"
                disabled
              />
            </div>
          </div>
        </div>
        <div class="col-sm-6 col-xl-3 mb-3">
          <div class="form-group">
            <label class="text-right col-form-label block">
              {{ "Branch" | translate }}</label
            >
            <ng-select
              id="branch"
              #branch="ngModel"
              required
              class="w-full p-0 h-100 {{
                branch.invalid && branch.touched ? 'errorInput' : ''
              }}"
              name="branch"
              placeholder=" {{ 'Chose' | translate }}"
              [(ngModel)]="modalDetailsProject.branch"
              [ngModelOptions]="{ standalone: true }"
              [readonly]="modalDetailsProject.id"
              (change)="branchChange()"
            >
              <ng-option *ngFor="let user of Branches" [value]="user.id">{{
                user.name
              }}</ng-option>
            </ng-select>
          </div>
        </div>
        <div class="col-sm-6 col-xl-3 mb-3">
          <div class="form-group">
            <label class="text-right col-form-label block">
              {{ "costCenter" | translate }}</label
            >
            <ng-select
              id="center"
              #center="ngModel"
              required
              class="w-full p-0 h-100 {{
                center.invalid && center.touched ? 'errorInput' : ''
              }}"
              name="center"
              placeholder=" {{ 'Chose' | translate }}"
              [(ngModel)]="modalDetailsProject.center"
              [ngModelOptions]="{ standalone: true }"
            >
              <ng-option *ngFor="let user of CostCenters" [value]="user.id">{{
                user.name
              }}</ng-option>
            </ng-select>
          </div>
        </div>

        <div class="col-sm-6 col-xl-2 mb-3">
          <div
            *ngIf="modalDetailsProject.user"
            class="manager-image w-full w-max"
          >
            <img
              src="{{ this.ManagerImg }}"
              alt="manager image"
              class="imgManager"
              width="100px"
              height="100px"
              style="border-radius: 50%"
            />
          </div>
        </div>

        <div class="col-sm-6 col-lg-4 col-xl-3 mb-3">
          <div class="form-group">
            <label class="text-right col-form-label block">
              {{ "ProjectStartDate" | translate }}
            </label>
            <div class="form-group timeInput">
              <input
                type="text"
                class="form-control"
                id="from"
                bsDatepicker
                autocomplete="off"
                (ngModelChange)="CheckStartDate($event)"
                #from="ngModel"
                required
                class="form-control {{
                  from.invalid && from.touched ? 'errorInput' : ''
                }}"
                name="from"
                placeholder=" {{ 'Date' | translate }}"
                [(ngModel)]="modalDetailsProject.from"
              />
            </div>
          </div>
        </div>
        <div class="col-sm-6 col-lg-4 col-xl-3 mb-3">
          <div class="form-group">
            <label class="text-right col-form-label block">
              {{ "ProjectEndDate" | translate }}
            </label>
            <div class="form-group timeInput">
              <input
                type="text"
                class="form-control"
                id="to"
                bsDatepicker
                autocomplete="off"
                (ngModelChange)="CheckEndDate($event)"
                #to="ngModel"
                required
                class="form-control {{
                  to.invalid && to.touched ? 'errorInput' : ''
                }}"
                name="to"
                placeholder=" {{ 'Date' | translate }}"
                [(ngModel)]="modalDetailsProject.to"
              />
            </div>
          </div>
        </div>
        <div class="col-sm-6 col-lg-4 col-xl-3 mb-3">
          <div class="form-group">
            <label class="text-right col-form-label block">
              {{ "Project Type" | translate }}</label
            >
            <div class="flex">
              <ng-select
                id="projectType"
                #projectType="ngModel"
                required
                class="w-full p-0 h-100 {{
                  projectType.invalid && projectType.touched ? 'errorInput' : ''
                }}"
                name="projectType"
                placeholder=" {{ 'Chose' | translate }}"
                [(ngModel)]="modalDetailsProject.projectType"
                [ngModelOptions]="{ standalone: true }"
                (change)="TypeProjectChange()"
              >
                <ng-option
                  *ngFor="let user of ProjectTypes"
                  [value]="user.id"
                  >{{ user.name }}</ng-option
                >
              </ng-select>
              <button
                type="button"
                class="btn bg-base text-white"
                style="padding: 5px 10px"
                (click)="resetGoalsProjectType(); open(projectTypeModal)"
              >
                <i class="fa fa-plus"></i>
              </button>
            </div>
          </div>
        </div>
        <div class="col-sm-6 col-lg-4 col-xl-3 mb-3">
          <div class="form-group">
            <label class="text-right col-form-label block">
              {{ "Subproject type" | translate }}</label
            >
            <div class="flex">
              <ng-select
                id="subProjectDetails"
                #subProjectDetails="ngModel"
                required
                class="w-full p-0 h-100 {{
                  subProjectDetails.invalid && subProjectDetails.touched
                    ? 'errorInput'
                    : ''
                }}"
                name="subProjectDetails"
                placeholder=" {{ 'Chose' | translate }}"
                [(ngModel)]="modalDetailsProject.subProjectDetails"
                [ngModelOptions]="{ standalone: true }"
                (change)="subTypeProjectChange(projectRequirementsModal)"
              >
                <ng-option
                  *ngFor="let user of ProjectSubTypes"
                  [value]="user.id"
                  >{{ user.name }}</ng-option
                >
              </ng-select>
              <button
                type="button"
                class="btn bg-base text-white"
                style="padding: 5px 10px"
                (click)="open(subprojectTypeModal)"
              >
                <i class="fa fa-plus"></i>
              </button>
            </div>
          </div>
        </div>
        <div class="col-sm-6 col-lg-4 col-xl-3 mb-3">
          <div class="form-types checkbox h-full flex-column">
            <div
              class="checkbox-contentCustom relative {{ 'dir' | translate }}"
            >
              <!-- [checked]="item.status == 2" -->
              <input
                type="checkbox"
                name="check"
                [ngModel]="modalDetailsProject.ProjectFlag"
                #checkbox="ngModel"
                (change)="changeRequestStatus($event)"
              />
              <div
                class="box {{
                  modalDetailsProject.ProjectFlag ? 'checked' : 'blur'
                }}"
              >
                <span class="absolute">{{
                  "without walking" | translate
                }}</span>
                <span class="absolute">{{ "a walk" | translate }}</span>
                <div class="cycle"></div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-sm-6 col-lg-4 col-xl-3 mb-3">
          <div class="form-group">
            <label class="text-right col-form-label block">
              {{ "Customer" | translate }}</label
            >
            <ng-select
              disabled
              id="customer"
              #customer="ngModel"
              required
              class="w-full p-0 h-100 {{
                customer.invalid && customer.touched ? 'errorInput' : ''
              }}"
              name="customer"
              placeholder=" {{ 'Chose' | translate }}"
              [(ngModel)]="modalDetailsProject.customer"
              [ngModelOptions]="{ standalone: true }"
              (change)="customerChange()"
            >
              <ng-option *ngFor="let user of Customers" [value]="user.id">{{
                user.name
              }}</ng-option>
            </ng-select>
          </div>
        </div>
        <div class="col-sm-6 col-lg-4 col-xl-3 mb-3">
          <div class="form-group">
            <label class="text-right col-form-label block">
              {{ "buildingType" | translate }}</label
            >
            <div class="flex">
              <ng-select
                id="buildingType"
                #buildingType="ngModel"
                required
                class="w-full p-0 h-100 {{
                  buildingType.invalid && buildingType.touched
                    ? 'errorInput'
                    : ''
                }}"
                name="buildingType"
                placeholder=" {{ 'Chose' | translate }}"
                [(ngModel)]="modalDetailsProject.buildingType"
                [ngModelOptions]="{ standalone: true }"
              >
                <ng-option *ngFor="let user of BuildTypes" [value]="user.id">{{
                  user.name
                }}</ng-option>
              </ng-select>
              <button
                type="button"
                class="btn bg-base text-white"
                style="padding: 5px 10px"
                (click)="open(BuildTypeModal)"
              >
                <i class="fa fa-plus"></i>
              </button>
            </div>
          </div>
        </div>
        <div
          class="col-sm-6 col-lg-4 col-xl-3 mb-3"
          *ngIf="modalDetailsProject.projectId == 0"
        >
          <div class="form-group">
            <label class="text-right col-form-label block">
              {{ "servicesProject" | translate }}</label
            >
            <ng-select
              class="w-full p-0"
              placeholder="{{ 'Chose' | translate }}"
              [(ngModel)]="modalDetailsProject.service"
              [ngModelOptions]="{ standalone: true }"
              (change)="ChangeService()"
            >
              <ng-option *ngFor="let user of serviceList" [value]="user.id">{{
                user.name
              }}</ng-option>
            </ng-select>
          </div>
        </div>
        <!--
        <div
          *ngIf="modalDetailsProject.walk"
          class="col-sm-6 d-none d-sm-flex col-md-3"
        ></div> -->
        <div *ngIf="modalDetailsProject.ProjectFlag" class="col-sm-6 col-md-5">
          <div class="form-group">
            <label
              for="ProjectSettingNo"
              class="text-right col-form-label block"
            >
              {{ "Bios number" | translate }}
            </label>
            <input
              required
              #ProjectSettingNo="ngModel"
              [(ngModel)]="modalDetailsProject.ProjectSettingNo"
              ngModel
              class="form-control"
              type="text"
              id="ProjectSettingNo"
              name="ProjectSettingNo"
              disabled
            />
          </div>
        </div>
        <div *ngIf="modalDetailsProject.ProjectFlag" class="col-sm-6 col-md-7">
          <div class="form-group">
            <label
              for="ProjectSettingNote"
              class="text-right col-form-label block"
            >
              {{ "Bios description" | translate }}
            </label>
            <input
              required
              #ProjectSettingNote="ngModel"
              [(ngModel)]="modalDetailsProject.ProjectSettingNote"
              ngModel
              class="form-control"
              type="text"
              id="ProjectSettingNote"
              name="ProjectSettingNote"
              disabled
            />
          </div>
        </div>

        <div class="col-sm-6 col-lg-4 col-xl-3 mb-3">
          <div class="form-group">
            <label class="text-right col-form-label block">
              {{ "project manager" | translate }}</label
            >
            <ng-select
              (change)="GetImgManager()"
              id="user"
              #user="ngModel"
              required
              class="w-full p-0 h-100 {{
                user.invalid && user.touched ? 'errorInput' : ''
              }}"
              name="user"
              placeholder=" {{ 'Chose' | translate }}"
              [(ngModel)]="modalDetailsProject.user"
              [ngModelOptions]="{ standalone: true }"
            >
              <ng-option *ngFor="let user of Managers" [value]="user.id">{{
                user.name
              }}</ng-option>
            </ng-select>
          </div>
        </div>
        <div class="col-sm-6 col-lg-4 col-xl-3 mb-3">
          <div class="form-group">
            <label class="text-right col-form-label block">
              {{ "Region" | translate }}</label
            >
            <div class="flex">
              <ng-select
                id="region"
                #region="ngModel"
                required
                class="w-full p-0 h-100 {{
                  region.invalid && region.touched ? 'errorInput' : ''
                }}"
                name="region"
                placeholder=" {{ 'Chose' | translate }}"
                [(ngModel)]="modalDetailsProject.region"
                [ngModelOptions]="{ standalone: true }"
              >
                <ng-option *ngFor="let user of City" [value]="user.id">{{
                  user.name
                }}</ng-option>
              </ng-select>
              <button
                type="button"
                class="btn bg-base text-white"
                style="padding: 5px 10px"
                (click)="open(CityTypeModal)"
              >
                <i class="fa fa-plus"></i>
              </button>
            </div>
          </div>
        </div>
        <div class="col-sm-6 mb-3">
          <div class="form-group">
            <label
              for="projectDescription"
              class="text-right col-form-label block"
            >
              {{ "projectName" | translate }}
            </label>
            <input
              type="text"
              class="form-control"
              id="projectDescription"
              autocomplete="off"
              #projectDescription="ngModel"
              maxlength="25"
              required
              class="form-control text-center {{
                projectDescription.invalid && projectDescription.touched
                  ? 'errorInput'
                  : ''
              }}"
              name="projectDescription"
              placeholder=" {{ 'projectName' | translate }}"
              [(ngModel)]="modalDetailsProject.projectDescription"
            />
          </div>
        </div>
        <div
          class="col-sm-6 col-lg-4 col-xl-3 mb-3"
          *ngIf="modalDetailsProject.projectId == 0"
        >
          <label class="text-right col-form-label block">
            {{ "Powers" | translate }}
          </label>
          <button
            type="button"
            (click)="
              open(modifyPermissionsModal, null, 'modifyPermissionsModal')
            "
            class="btn bg-base text-white"
          >
            {{ "The powers of the staff on the project" | translate }}
          </button>
        </div>
        <div class="col-sm-6 col-lg-4 col-xl-3 mb-3">
          <label class="text-right col-form-label block">
            {{ "Project goals" | translate }}
          </label>
          <button
            type="button"
            (click)="open(projectGoalsModal, null, 'projectGoalsModal')"
            class="btn bg-base text-white"
          >
            {{ "Determine project goals" | translate }}
          </button>
        </div>
        <div class="col-sm-6 col-lg-4 col-xl-3 mb-3">
          <div class="form-group">
            <label class="text-right col-form-label block">
              {{ "offerPriceNoProject" | translate }}</label
            >
            <ng-select
              class="w-full p-0"
              placeholder="{{ 'Chose' | translate }}"
              [(ngModel)]="modalDetailsProject.offerPriceNumber"
              [ngModelOptions]="{ standalone: true }"
            >
              <ng-option
                *ngFor="let user of offerpriceList"
                [value]="user.id"
                >{{ user.name }}</ng-option
              >
            </ng-select>
          </div>
        </div>
        <div class="col-sm-6 col-lg-4 col-xl-3 mb-3">
          <div class="form-group">
            <label class="text-right col-form-label block">
              {{ "DepartmentProject" | translate }}</label
            >
            <ng-select
              id="projectDepartment"
              #projectDepartment="ngModel"
              required
              class="w-full p-0 h-100 {{
                projectDepartment.invalid && projectDepartment.touched
                  ? 'errorInput'
                  : ''
              }}"
              name="projectDepartment"
              placeholder=" {{ 'Chose' | translate }}"
              [(ngModel)]="modalDetailsProject.projectDepartment"
              [ngModelOptions]="{ standalone: true }"
            >
              <ng-option *ngFor="let user of Department" [value]="user.id">{{
                user.name
              }}</ng-option>
            </ng-select>
          </div>
        </div>
      </div>
    </form>
    <div
      class="flex gap-2 justify-end pt-3 border-t border-neutral-300 col-span-1 md:col-span-2 mt-2"
    >
      <button
        *ngIf="modalDetailsProject.projectId == 0"
        [disabled]="disableButtonSave_Project"
        class="btn bg-base text-white"
        type="submit"
        (click)="addProject()"
      >
        {{ "save" | translate }}
      </button>
      <button (click)="modal?.dismiss()" class="btn btn-secondary">
        {{ "Back" | translate }}
      </button>
    </div>
  </div>
</ng-template>

<!-- modify Permissions -->
<ng-template #modifyPermissionsModal let-modal>
  <div
    style="background-color: var(--base-color)"
    class="modal-header text-white flex justify-between items-center"
  >
    <h4 class="m-0">
      <span class="text-2xl">{{ "modifyPerms" | translate }}</span>
    </h4>
    <button
      type="button"
      class="text-2xl text-white m-0"
      (click)="modal.dismiss()"
    >
      <i class="fa-solid fa-xmark"></i>
    </button>
  </div>

  <div class="modal-body">
    <form #form="ngForm">
      <div class="flex align-items-end flex-wrap">
        <div
          class="form-group"
          style="min-width: 240px; margin-inline-end: 30px"
        >
          <label class="text-right col-form-label block">
            {{ "userName" | translate }}</label
          >
          <ng-select
            class="w-full p-0"
            placeholder="{{ 'Chose' | translate }}"
            ngModel
            name="user"
            [(ngModel)]="selectedUserPermissions.userid"
          >
            <ng-option *ngFor="let user of UserperFill" [value]="user.id">{{
              user.name
            }}</ng-option>
          </ng-select>
        </div>

        <div class="checkboxs flex align-items-end justify-between flex-wrap">
          <div class="form-group">
            <input
              ngModel
              type="checkbox"
              id="Watch"
              name="Watch"
              [checked]="selectAllValue"
              [(ngModel)]="selectedUserPermissions.watch"
            />
            <label for="Watch" class="text-right col-form-label mx-2">
              {{ "Watch" | translate }}
            </label>
          </div>
          <div class="form-group">
            <input
              ngModel
              type="checkbox"
              id="Add"
              name="Add"
              [checked]="selectAllValue"
              [(ngModel)]="selectedUserPermissions.add"
            />
            <label for="Add" class="text-right col-form-label mx-2">
              {{ "Add" | translate }}
            </label>
          </div>
          <div class="form-group">
            <input
              ngModel
              type="checkbox"
              id="edit"
              name="edit"
              [checked]="selectAllValue"
              [(ngModel)]="selectedUserPermissions.edit"
            />
            <label for="edit" class="text-right col-form-label mx-2">
              {{ "edit" | translate }}
            </label>
          </div>
          <div class="form-group">
            <input
              ngModel
              type="checkbox"
              id="delete"
              name="delete"
              [checked]="selectAllValue"
              [(ngModel)]="selectedUserPermissions.delete"
            />
            <label for="delete" class="text-right col-form-label mx-2">
              {{ "delete" | translate }}
            </label>
          </div>
        </div>
        <div class="form-group">
          <input
            ngModel
            type="checkbox"
            id="SelectAll"
            name="SelectAll"
            [(ngModel)]="selectAllValue"
            (change)="setValues($event)"
          />
          <label for="SelectAll" class="text-right col-form-label mx-2">
            {{ "SelectAll" | translate }}
          </label>
        </div>
      </div>

      <div class="flex gap-2 justify-end mt-3">
        <button
          type="button"
          mat-raised-button
          class="bg-success text-white"
          (click)="form.reset(); resetPrivProject()"
        >
          {{ "new" | translate }}
        </button>
        <button
          type="button"
          mat-raised-button
          class="bg-base text-white"
          (click)="addNewUserPermissions()"
        >
          {{ "add" | translate }}
        </button>
        <button
          type="button"
          (click)="modal.dismiss()"
          mat-raised-button
          color="basic"
        >
          {{ "close" | translate }}
        </button>
      </div>
    </form>

    <mat-form-field class="w-full">
      <mat-label>{{ "search" | translate }}</mat-label>
      <input matInput (keyup)="applyFilterPerm($event)" #input />
    </mat-form-field>

    <div class="table">
      <div class="table">
        <table
          mat-table
          [dataSource]="userPermissionsDataSource"
          class="mat-elevation-z8 table table-responsive table-striped table-bordered text-center"
          style="vertical-align: middle; font-size: 14px"
        >
          <!-- userName Column -->
          <ng-container matColumnDef="userName">
            <th mat-header-cell *matHeaderCellDef>
              {{ "userName" | translate }}
            </th>
            <td mat-cell *matCellDef="let element">{{ element.userName }}</td>
          </ng-container>

          <!-- watch Column -->
          <ng-container matColumnDef="watch">
            <th mat-header-cell *matHeaderCellDef>{{ "Watch" | translate }}</th>
            <td mat-cell *matCellDef="let element; let i = index">
              <i class="fa fa-check text-success" *ngIf="element.watch"></i>
              <i class="fa fa-close text-danger" *ngIf="!element.watch"></i>
            </td>
          </ng-container>
          <!-- add Column -->
          <ng-container matColumnDef="add">
            <th mat-header-cell *matHeaderCellDef>{{ "add" | translate }}</th>
            <td mat-cell *matCellDef="let element; let i = index">
              <i class="fa fa-check text-success" *ngIf="element.add"></i>
              <i class="fa fa-close text-danger" *ngIf="!element.add"></i>
            </td>
          </ng-container>
          <!-- edit Column -->
          <ng-container matColumnDef="edit">
            <th mat-header-cell *matHeaderCellDef>{{ "edit" | translate }}</th>
            <td mat-cell *matCellDef="let element; let i = index">
              <i class="fa fa-check text-success" *ngIf="element.edit"></i>
              <i class="fa fa-close text-danger" *ngIf="!element.edit"></i>
            </td>
          </ng-container>
          <!-- delete Column -->
          <ng-container matColumnDef="delete">
            <th mat-header-cell *matHeaderCellDef>
              {{ "delete" | translate }}
            </th>
            <td mat-cell *matCellDef="let element; let i = index">
              <i class="fa fa-check text-success" *ngIf="element.delete"></i>
              <i class="fa fa-close text-danger" *ngIf="!element.delete"></i>
            </td>
          </ng-container>

          <!-- operations Column -->
          <ng-container matColumnDef="operations">
            <th mat-header-cell *matHeaderCellDef>
              {{ "operations" | translate }}
            </th>
            <!-- " -->
            <td mat-cell *matCellDef="let element; let i = index">
              <button
                class="p-2 bg-orange-100 hover:bg-orange-500 rounded-lg duration-300 hover:text-white w-10 mx-1"
                (click)="setSelectedUserPermissions(element.idRow)"
              >
                <i class="fa-regular fa-pen-to-square"></i>
              </button>
              <button
                class="p-2 bg-red-100 hover:bg-red-500 rounded-lg duration-300 hover:text-white w-10"
                (click)="open(deleteModalPerm, element, 'deleteModalPerm')"
              >
                <i class="fa-solid fa-trash-can"></i>
              </button>
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="userPermissionsColumns"></tr>
          <tr
            mat-row
            *matRowDef="let row; let i = index; columns: userPermissionsColumns"
          ></tr>

          <!-- Row shown when there is no matching data. -->
          <tr class="mat-row" *matNoDataRow>
            <td class="mat-cell" colspan="4">
              {{ "noResult" | translate }} "{{ input.value }}"
            </td>
          </tr>
        </table>
      </div>
    </div>
  </div>
</ng-template>

<!-- deleteModalPerm -->
<ng-template #deleteModalPerm let-modal>
  <div class="modal-body text-center">
    <p
      [translate]="'name'"
      [translateParams]="{
        ar: 'هل تريد بالتأكيد حذف هذا الصف',
        en: 'Are you sure to delete this row ?'
      }"
    ></p>
    <div class="flex gap-2 justify-center mt-3">
      <button
        type="button"
        mat-raised-button
        color="warn"
        (click)="deletePermissions(); modal.dismiss()"
      >
        {{ "Yes" | translate }}
      </button>
      <button
        type="button"
        (click)="modal.dismiss()"
        mat-raised-button
        color="basic"
      >
        {{ "No" | translate }}
      </button>
    </div>
  </div>
</ng-template>

<!-- projectGoalsModal -->
<ng-template #projectGoalsModal let-modal>
  <div
    style="background-color: var(--base-color)"
    class="modal-header text-white flex justify-between items-center"
  >
    <h4 class="m-0">
      <span class="text-2xl">{{ "Project goals" | translate }}</span>
    </h4>
    <button
      type="button"
      class="text-2xl text-white m-0"
      (click)="modal.dismiss()"
    >
      <i class="fa-solid fa-xmark"></i>
    </button>
  </div>

  <div class="modal-body text-center">
    <mat-form-field class="w-full">
      <mat-label>{{ "search" | translate }}</mat-label>
      <input matInput (keyup)="applyGoalsFilter($event)" #input />
    </mat-form-field>

    <div class="table">
      <table
        mat-table
        [dataSource]="projectGoalsDataSource"
        class="mat-elevation-z8 table table-responsive table-striped table-bordered text-center"
        style="vertical-align: middle; font-size: 14px"
      >
        <!-- serial Column -->
        <ng-container matColumnDef="serial">
          <th mat-header-cell *matHeaderCellDef>
            {{ "serial" | translate }}
          </th>
          <td mat-cell *matCellDef="let element">{{ element.serial }}</td>
        </ng-container>

        <!-- requirements Column -->
        <ng-container matColumnDef="requirements">
          <th mat-header-cell *matHeaderCellDef>
            {{ "requirements and goals" | translate }}
          </th>
          <td mat-cell *matCellDef="let element; let i = index">
            {{ element.requirements }}
          </td>
        </ng-container>
        <!-- name/department Column -->
        <ng-container matColumnDef="name">
          <th mat-header-cell *matHeaderCellDef>
            {{ "name/department" | translate }}
          </th>
          <td mat-cell *matCellDef="let element; let i = index">
            {{ element.name }}
          </td>
        </ng-container>
        <!-- expected duration Column -->
        <ng-container matColumnDef="duration">
          <th mat-header-cell *matHeaderCellDef>
            {{ "expected duration" | translate }}
          </th>
          <td mat-cell *matCellDef="let element; let i = index">
            {{ element.duration }}
          </td>
        </ng-container>
        <!-- choose Column -->
        <ng-container matColumnDef="choose">
          <th mat-header-cell *matHeaderCellDef>
            {{ "to choose" | translate }}
          </th>
          <td mat-cell *matCellDef="let element; let i = index">
            <input
              type="checkbox"
              name="{{ 'checkbox_' + i + 1 }}"
              [(ngModel)]="element.choose"
              (change)="selectGoalForProject(i)"
            />
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="projectGoalsColumns"></tr>
        <tr
          mat-row
          *matRowDef="let row; let i = index; columns: projectGoalsColumns"
        ></tr>
        <!-- Row shown when there is no matching data. -->
        <tr class="mat-row" *matNoDataRow>
          <td class="mat-cell" colspan="4">
            {{ "noResult" | translate }} "{{ input.value }}"
          </td>
        </tr>
      </table>
    </div>
  </div>
</ng-template>

<!-- noticModal  -->
<ng-template let-modal #noticModal>
  <div class="modal-body py-3">
    <div class="text-center">
      <h2 class="text-base">
        {{ "Project No. has been added" | translate }} : 416165
      </h2>
      <p>
        <span>{{ "to the client" | translate }} :</span>
        <span>محمد خالد مراد </span>
      </p>
      <p>
        <span>{{ "Branch" | translate }} :</span>
        <span> فرع القاهرة </span>
      </p>
    </div>

    <div class="mt-4 text-center">
      <h2 class="text-base">
        {{ "Notify the client of the project creation" | translate }}
      </h2>

      <div class="mb-2 endNotice">
        <mat-checkbox name="checkedEmail" [(ngModel)]="checkedEmail">
        </mat-checkbox>
        <button
          [title]="'Send notice via e-mail' | translate"
          class="min-w-max p-2 bg-green-100 hover:bg-green-500 rounded-lg duration-300 hover:text-white aspect-square w-10 mx-3"
        >
          <i class="fa-solid fa-at"></i>
        </button>
        <span *ngIf="checkedEmail">---</span>
      </div>

      <div class="endNotice">
        <mat-checkbox name="checkedPhone" [(ngModel)]="checkedPhone">
        </mat-checkbox>
        <button
          [title]="'Sending notice via mobile number' | translate"
          class="min-w-max p-2 bg-blue-100 hover:bg-blue-500 rounded-lg duration-300 hover:text-white aspect-square w-10 mx-3"
        >
          <i class="fa-solid fa-comment-sms"></i>
        </button>
        <span *ngIf="checkedPhone">520123451</span>
      </div>
    </div>

    <div class="flex items-center gap-6 justify-center flex-wrap mt-4">
      <button
        type="button"
        mat-raised-button
        class="bg-base text-white"
        (click)="modal.dismiss('Cross click')"
      >
        {{ "send" | translate }}
      </button>

      <button
        type="button"
        mat-raised-button
        color="warn"
        (click)="modal.dismiss('Cross click')"
      >
        {{ "close" | translate }}
      </button>
    </div>
  </div>
</ng-template>

<!-- confirm deleteFileTypes -->
<ng-template #deleteFileTypes let-modal>
  <div class="modal-body text-center">
    <p
      [translate]="'name'"
      [translateParams]="{
        ar: 'هل تريد بالتأكيد حذف هذا الصف',
        en: 'Are you sure to delete this row ?'
      }"
    ></p>
    <div class="flex gap-2 justify-center">
      <button
        type="button"
        mat-raised-button
        color="warn"
        (click)="deleteFileType(); modal?.dismiss()"
      >
        {{ "Yes" | translate }}
      </button>
      <button
        type="button"
        (click)="modal?.hide()"
        mat-raised-button
        color="basic"
      >
        {{ "No" | translate }}
      </button>
    </div>
  </div>
</ng-template>

<ng-template #projectTypeModal let-modal>
  <div class="modal-header bg-base text-white">
    <h4
      class="modal-title mb-0"
      id="modal-basic-title"
      [translate]="'name'"
      [translateParams]="{ ar: 'اضافة جديدة', en: 'Add New' }"
    ></h4>
    <button
      type="button"
      class="text-2xl text-white m-0"
      (click)="modal.dismiss('Cross click')"
    >
      <i class="fa-solid fa-xmark"></i>
    </button>
  </div>
  <div class="modal-body text-center">
    <form
      #addProjectType="ngForm"
      class="grid grid-cols-1 md:grid-cols-2 gap-2"
    >
      <div class="form-group">
        <label for="ProjectNameArtxt" class="text-right col-form-label block">
          {{ "nameAr" | translate }}
          <span class="text-danger">*</span></label
        >
        <input
          required
          #ProjectNameAr="ngModel"
          ngModel
          [(ngModel)]="dataAdd.projecttype.nameAr"
          class="form-control"
          type="text"
          id="ProjectNameArtxt"
          name="ProjectNameArtxt"
          autocomplete="off"
          [placeholder]="('Write' | translate) + ' ' + ('nameAr' | translate)"
        />
      </div>
      <div class="form-group">
        <label for="ProjectNameEntxt" class="text-right col-form-label block">
          {{ "nameEn" | translate }}
          <span class="text-danger">*</span></label
        >
        <div style="display: inline-flex; width: 100%">
          <input
            required
            #ProjectNameEnValue
            #ProjectNameEn="ngModel"
            [(ngModel)]="dataAdd.projecttype.nameEn"
            ngModel
            class="form-control"
            type="text"
            id="ProjectNameEntxt"
            name="ProjectNameEntxt"
            autocomplete="off"
            [placeholder]="('Write' | translate) + ' ' + ('nameEn' | translate)"
          />
          <a
            class="btn"
            id="CopyProjectName2"
            (click)="dataAdd.projecttype.nameEn = dataAdd.projecttype.nameAr"
            ><i class="fa fa-copy"></i
          ></a>
        </div>
      </div>
      <div class="col-sm-8 col-lg-8 col-xl-8 mb-3">
        <label class="text-right col-form-label block">
          {{ "Project strategies and objectives" | translate }}
        </label>
        <button
          type="button"
          (click)="
            open(
              projectGoalsProjectTypeModal,
              null,
              'projectGoalsProjectTypeModal'
            )
          "
          class="btn bg-base text-white"
        >
          {{ "Project strategies and objectives" | translate }}
        </button>
      </div>
    </form>
    <div class="max-h-80 overflow-auto px-2">
      <table class="table table-hover">
        <thead>
          <tr>
            <th>{{ "nameAr" | translate }}</th>
            <th>{{ "nameEn" | translate }}</th>
            <th
              [translate]="'name'"
              [translateParams]="{
                ar: 'خيارات',
                en: 'Operations'
              }"
            ></th>
          </tr>
        </thead>
        <tbody>
          <tr
            *ngFor="let type of ProjectTypesPopup"
            (dblclick)="
              setProjectTypeInSelect(type, projectTypeModal);
              modal.dismiss('Cross click')
            "
          >
            <td>{{ type.name }}</td>
            <td>{{ type.nameEn }}</td>
            <td class="flex gap-2 justify-center">
              <button
                class="p-2 bg-orange-100 hover:bg-orange-500 rounded-lg duration-300 hover:text-white aspect-square w-10"
                (click)="
                  getallreq_ProGoals(type);
                  dataAdd.projecttype.nameAr = type.name;
                  dataAdd.projecttype.nameEn = type.nameEn;
                  dataAdd.projecttype.id = type.id
                "
              >
                <i class="fa-regular fa-pen-to-square"></i>
              </button>
              <button
                (click)="getProjecttypeRow(type); open(deleteProjectType)"
                class="p-2 bg-red-100 hover:bg-red-500 rounded-lg duration-300 hover:text-white aspect-square w-10"
              >
                <i class="fa-solid fa-trash-can"></i>
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    <div class="flex gap-2 mt-3 pt-3 border-t border-neutral-300">
      <button
        class="btn bg-base text-white"
        type="submit"
        [disabled]="addProjectType.invalid"
        (click)="saveProjectType()"
      >
        {{ "Save" | translate }}
      </button>
      <button (click)="modal.dismiss('Cross click')" class="btn btn-secondary">
        {{ "Back" | translate }}
      </button>
      <button (click)="resetProjectType()" class="btn bg-base text-white">
        {{ "جديد" | translate }}
      </button>
    </div>
  </div>
</ng-template>

<ng-template #deleteProjectType let-modal>
  <div class="modal-body text-center">
    <p
      [translate]="'name'"
      [translateParams]="{
        ar: 'هل تريد بالتأكيد حذف هذا الصف',
        en: 'Are you sure to delete this row ?'
      }"
    ></p>
    <div class="flex gap-2 justify-center mt-3">
      <button
        type="button"
        mat-raised-button
        color="warn"
        (click)="confirmProjecttypeDelete(); modal.dismiss()"
      >
        {{ "Yes" | translate }}
      </button>
      <button
        type="button"
        (click)="modal.dismiss()"
        mat-raised-button
        color="basic"
      >
        {{ "No" | translate }}
      </button>
    </div>
  </div>
</ng-template>

<ng-template #subprojectTypeModal let-modal>
  <div class="modal-header bg-base text-white">
    <h4
      class="modal-title mb-0"
      id="modal-basic-title"
      [translate]="'name'"
      [translateParams]="{ ar: 'اضافة جديدة', en: 'Add New' }"
    ></h4>
    <button
      type="button"
      class="text-2xl text-white m-0"
      (click)="modal.dismiss('Cross click')"
    >
      <i class="fa-solid fa-xmark"></i>
    </button>
  </div>
  <div class="modal-body text-center">
    <form
      #addsubProjectType="ngForm"
      class="grid grid-cols-1 md:grid-cols-2 gap-2"
    >
      <div class="form-group">
        <label
          for="subProjectNameArtxt"
          class="text-right col-form-label block"
        >
          {{ "nameAr" | translate }}
          <span class="text-danger">*</span></label
        >
        <input
          required
          #subProjectNameAr="ngModel"
          ngModel
          [(ngModel)]="dataAdd.subprojecttype.nameAr"
          class="form-control"
          type="text"
          id="subProjectNameArtxt"
          name="subProjectNameArtxt"
          autocomplete="off"
          [placeholder]="('Write' | translate) + ' ' + ('nameAr' | translate)"
        />
      </div>
      <div class="form-group">
        <label
          for="subProjectNameEntxt"
          class="text-right col-form-label block"
        >
          {{ "nameEn" | translate }}
          <span class="text-danger">*</span></label
        >
        <div style="display: inline-flex; width: 100%">
          <input
            required
            #subProjectNameEnValue
            #subProjectNameEn="ngModel"
            [(ngModel)]="dataAdd.subprojecttype.nameEn"
            ngModel
            class="form-control"
            type="text"
            id="subProjectNameEntxt"
            name="subProjectNameEntxt"
            autocomplete="off"
            [placeholder]="('Write' | translate) + ' ' + ('nameEn' | translate)"
          />
          <a
            class="btn"
            id="subprojecttypecopy"
            (click)="
              dataAdd.subprojecttype.nameEn = dataAdd.subprojecttype.nameAr
            "
            ><i class="fa fa-copy"></i
          ></a>
        </div>
      </div>
      <div class="form-group">
        <label for="TimePeriodtxt" class="text-right col-form-label block">
          {{ "TimePeriod" | translate }}
          <span class="text-danger">*</span></label
        >
        <input
          required
          #TimePeriodAr="ngModel"
          ngModel
          [(ngModel)]="dataAdd.subprojecttype.timePeriod"
          class="form-control"
          type="number"
          id="TimePeriodArtxt"
          name="TimePeriodArtxt"
          autocomplete="off"
          [placeholder]="
            ('Write' | translate) + ' ' + ('TimePeriod' | translate)
          "
        />
      </div>
    </form>
    <div class="max-h-80 overflow-auto px-2">
      <table class="table table-hover">
        <thead>
          <tr>
            <th>{{ "nameAr" | translate }}</th>
            <th>{{ "nameEn" | translate }}</th>
            <th>{{ "TimePeriodStr" | translate }}</th>
            <th
              [translate]="'name'"
              [translateParams]="{
                ar: 'خيارات',
                en: 'Operations'
              }"
            ></th>
          </tr>
        </thead>
        <tbody>
          <tr
            *ngFor="let type of ProjectSubTypesPopup"
            (dblclick)="
              setSubProjectTypeInSelect(type, subprojectTypeModal);
              modal.dismiss('Cross click')
            "
          >
            <td>{{ type.name }}</td>
            <td>{{ type.nameEn }}</td>
            <td>{{ type.timePeriodStr }}</td>
            <td class="flex gap-2 justify-center">
              <button
                class="p-2 bg-orange-100 hover:bg-orange-500 rounded-lg duration-300 hover:text-white aspect-square w-10"
                (click)="
                  dataAdd.subprojecttype.nameAr = type.name;
                  dataAdd.subprojecttype.nameEn = type.nameEn;
                  dataAdd.subprojecttype.timePeriod = type.timePeriod;
                  dataAdd.subprojecttype.id = type.id
                "
              >
                <i class="fa-regular fa-pen-to-square"></i>
              </button>
              <button
                (click)="open(deletesubProjectType); getSubProjecttypeRow(type)"
                class="p-2 bg-red-100 hover:bg-red-500 rounded-lg duration-300 hover:text-white aspect-square w-10"
              >
                <i class="fa-solid fa-trash-can"></i>
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    <div class="flex gap-2 mt-3 pt-3 border-t border-neutral-300">
      <button
        class="btn bg-base text-white"
        type="submit"
        [disabled]="addsubProjectType.invalid"
        (click)="saveSubProjectType()"
      >
        {{ "Save" | translate }}
      </button>
      <button (click)="modal.dismiss('Cross click')" class="btn btn-secondary">
        {{ "Back" | translate }}
      </button>
      <button (click)="resetProjectType()" class="btn bg-base text-white">
        {{ "جديد" | translate }}
      </button>
    </div>
  </div>
</ng-template>

<ng-template #deletesubProjectType let-modal>
  <div class="modal-body text-center">
    <p
      [translate]="'name'"
      [translateParams]="{
        ar: 'هل تريد بالتأكيد حذف هذا الصف',
        en: 'Are you sure to delete this row ?'
      }"
    ></p>
    <div class="flex gap-2 justify-center mt-3">
      <button
        type="button"
        mat-raised-button
        color="warn"
        (click)="confirmSubProjecttypeDelete(); modal.dismiss()"
      >
        {{ "Yes" | translate }}
      </button>
      <button
        type="button"
        (click)="modal.dismiss()"
        mat-raised-button
        color="basic"
      >
        {{ "No" | translate }}
      </button>
    </div>
  </div>
</ng-template>

<ng-template #BuildTypeModal let-modal>
  <div class="modal-header bg-base text-white">
    <h4
      class="modal-title mb-0"
      id="modal-basic-title"
      [translate]="'name'"
      [translateParams]="{ ar: 'اضافة جديدة', en: 'Add New' }"
    ></h4>
    <button
      type="button"
      class="text-2xl text-white m-0"
      (click)="modal.dismiss('Cross click')"
    >
      <i class="fa-solid fa-xmark"></i>
    </button>
  </div>
  <div class="modal-body text-center">
    <form #addBuildType="ngForm" class="grid grid-cols-1 md:grid-cols-2 gap-2">
      <div class="form-group">
        <label for="BuildNameArtxt" class="text-right col-form-label block">
          {{ "nameAr" | translate }}
          <span class="text-danger">*</span></label
        >
        <input
          required
          #BuildNameAr="ngModel"
          ngModel
          [(ngModel)]="dataAdd.buildtype.nameAr"
          class="form-control"
          type="text"
          id="BuildNameArtxt"
          name="BuildNameArtxt"
          autocomplete="off"
          [placeholder]="('Write' | translate) + ' ' + ('nameAr' | translate)"
        />
      </div>
      <div class="form-group">
        <label for="BuildNameEntxt" class="text-right col-form-label block">
          {{ "nameEn" | translate }}
          <span class="text-danger">*</span></label
        >
        <div style="display: inline-flex; width: 100%">
          <input
            required
            #BuildNameEnValue
            #BuildNameEn="ngModel"
            [(ngModel)]="dataAdd.buildtype.nameEn"
            ngModel
            class="form-control"
            type="text"
            id="BuildNameEntxt"
            name="BuildNameEntxt"
            autocomplete="off"
            [placeholder]="('Write' | translate) + ' ' + ('nameEn' | translate)"
          />
          <a
            class="btn"
            id="CopyBuildName2"
            (click)="dataAdd.buildtype.nameEn = dataAdd.buildtype.nameAr"
            ><i class="fa fa-copy"></i
          ></a>
        </div>
      </div>
    </form>
    <div class="max-h-80 overflow-auto px-2">
      <table class="table table-hover">
        <thead>
          <tr>
            <th>{{ "nameAr" | translate }}</th>
            <th>{{ "nameEn" | translate }}</th>
            <th
              [translate]="'name'"
              [translateParams]="{
                ar: 'خيارات',
                en: 'Operations'
              }"
            ></th>
          </tr>
        </thead>
        <tbody>
          <tr
            *ngFor="let type of BuildTypesPopup"
            (dblclick)="
              setbuildTypeInSelect(type, BuildTypeModal);
              modal.dismiss('Cross click')
            "
          >
            <td>{{ type.name }}</td>
            <td>{{ type.nameEn }}</td>
            <td class="flex gap-2 justify-center">
              <button
                class="p-2 bg-orange-100 hover:bg-orange-500 rounded-lg duration-300 hover:text-white aspect-square w-10"
                (click)="
                  dataAdd.buildtype.nameAr = type.name;
                  dataAdd.buildtype.nameEn = type.nameEn;
                  dataAdd.buildtype.id = type.id
                "
              >
                <i class="fa-regular fa-pen-to-square"></i>
              </button>
              <button
                (click)="getbuildypeRow(type); open(deleteBuildType)"
                class="p-2 bg-red-100 hover:bg-red-500 rounded-lg duration-300 hover:text-white aspect-square w-10"
              >
                <i class="fa-solid fa-trash-can"></i>
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    <div class="flex gap-2 mt-3 pt-3 border-t border-neutral-300">
      <button
        class="btn bg-base text-white"
        type="submit"
        [disabled]="addBuildType.invalid"
        (click)="savebuildType()"
      >
        {{ "Save" | translate }}
      </button>
      <button (click)="modal.dismiss('Cross click')" class="btn btn-secondary">
        {{ "Back" | translate }}
      </button>
      <button (click)="resetbuildType()" class="btn bg-base text-white">
        {{ "جديد" | translate }}
      </button>
    </div>
  </div>
</ng-template>

<ng-template #deleteBuildType let-modal>
  <div class="modal-body text-center">
    <p
      [translate]="'name'"
      [translateParams]="{
        ar: 'هل تريد بالتأكيد حذف هذا الصف',
        en: 'Are you sure to delete this row ?'
      }"
    ></p>
    <div class="flex gap-2 justify-center mt-3">
      <button
        type="button"
        mat-raised-button
        color="warn"
        (click)="confirmbuildtypeDelete(); modal.dismiss()"
      >
        {{ "Yes" | translate }}
      </button>
      <button
        type="button"
        (click)="modal.dismiss()"
        mat-raised-button
        color="basic"
      >
        {{ "No" | translate }}
      </button>
    </div>
  </div>
</ng-template>

<ng-template #CityTypeModal let-modal>
  <div class="modal-header bg-base text-white">
    <h4
      class="modal-title mb-0"
      id="modal-basic-title"
      [translate]="'name'"
      [translateParams]="{ ar: 'اضافة جديدة', en: 'Add New' }"
    ></h4>
    <button
      type="button"
      class="text-2xl text-white m-0"
      (click)="modal.dismiss('Cross click')"
    >
      <i class="fa-solid fa-xmark"></i>
    </button>
  </div>
  <div class="modal-body text-center">
    <form #addCityType="ngForm" class="grid grid-cols-1 md:grid-cols-2 gap-2">
      <div class="form-group">
        <label for="CityNameArtxt" class="text-right col-form-label block">
          {{ "nameAr" | translate }}
          <span class="text-danger">*</span></label
        >
        <input
          required
          #CityNameAr="ngModel"
          ngModel
          [(ngModel)]="dataAdd.citytype.nameAr"
          class="form-control"
          type="text"
          id="CityNameArtxt"
          name="CityNameArtxt"
          autocomplete="off"
          [placeholder]="('Write' | translate) + ' ' + ('nameAr' | translate)"
        />
      </div>
      <div class="form-group">
        <label for="CityNameEntxt" class="text-right col-form-label block">
          {{ "nameEn" | translate }}
          <span class="text-danger">*</span></label
        >
        <div style="display: inline-flex; width: 100%">
          <input
            required
            #CityNameEnValue
            #CityNameEn="ngModel"
            [(ngModel)]="dataAdd.citytype.nameEn"
            ngModel
            class="form-control"
            type="text"
            id="CityNameEntxt"
            name="CityNameEntxt"
            autocomplete="off"
            [placeholder]="('Write' | translate) + ' ' + ('nameEn' | translate)"
          />
          <a
            class="btn"
            id="CopyCityName2"
            (click)="dataAdd.citytype.nameEn = dataAdd.citytype.nameAr"
            ><i class="fa fa-copy"></i
          ></a>
        </div>
      </div>
    </form>
    <div class="max-h-80 overflow-auto px-2">
      <table class="table table-hover">
        <thead>
          <tr>
            <th>{{ "nameAr" | translate }}</th>
            <th>{{ "nameEn" | translate }}</th>
            <th
              [translate]="'name'"
              [translateParams]="{
                ar: 'خيارات',
                en: 'Operations'
              }"
            ></th>
          </tr>
        </thead>
        <tbody>
          <tr
            *ngFor="let type of CityTypesPopup"
            (dblclick)="
              setcityTypeInSelect(type, CityTypeModal);
              modal.dismiss('Cross click')
            "
          >
            <td>{{ type.name }}</td>
            <td>{{ type.nameEn }}</td>
            <td class="flex gap-2 justify-center">
              <button
                class="p-2 bg-orange-100 hover:bg-orange-500 rounded-lg duration-300 hover:text-white aspect-square w-10"
                (click)="
                  dataAdd.citytype.nameAr = type.name;
                  dataAdd.citytype.nameEn = type.nameEn;
                  dataAdd.citytype.id = type.id
                "
              >
                <i class="fa-regular fa-pen-to-square"></i>
              </button>
              <button
                (click)="getcitytypeRow(type); open(deleteCityType)"
                class="p-2 bg-red-100 hover:bg-red-500 rounded-lg duration-300 hover:text-white aspect-square w-10"
              >
                <i class="fa-solid fa-trash-can"></i>
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    <div class="flex gap-2 mt-3 pt-3 border-t border-neutral-300">
      <button
        class="btn bg-base text-white"
        type="submit"
        [disabled]="addCityType.invalid"
        (click)="savecityType()"
      >
        {{ "Save" | translate }}
      </button>
      <button (click)="modal.dismiss('Cross click')" class="btn btn-secondary">
        {{ "Back" | translate }}
      </button>
      <button (click)="resetcityType()" class="btn bg-base text-white">
        {{ "جديد" | translate }}
      </button>
    </div>
  </div>
</ng-template>

<ng-template #deleteCityType let-modal>
  <div class="modal-body text-center">
    <p
      [translate]="'name'"
      [translateParams]="{
        ar: 'هل تريد بالتأكيد حذف هذا الصف',
        en: 'Are you sure to delete this row ?'
      }"
    ></p>
    <div class="flex gap-2 justify-center mt-3">
      <button
        type="button"
        mat-raised-button
        color="warn"
        (click)="confirmcitytypeDelete(); modal.dismiss()"
      >
        {{ "Yes" | translate }}
      </button>
      <button
        type="button"
        (click)="modal.dismiss()"
        mat-raised-button
        color="basic"
      >
        {{ "No" | translate }}
      </button>
    </div>
  </div>
</ng-template>

<ng-template #projectGoalsProjectTypeModal let-modal>
  <div
    class="modal-header bg-base text-white flex justify-between items-center modal-xxl"
  >
    <h4 class="m-0">
      <span class="text-2xl">{{
        "Project strategies and objectives" | translate
      }}</span>
    </h4>
    <button
      type="button"
      class="text-2xl text-white m-0"
      (click)="modal?.dismiss()"
    >
      <i class="fa-solid fa-xmark"></i>
    </button>
  </div>
  <div class="modal-body text-center max-h-[400px] overflow-auto">
    <div class="text-start my-3">
      <button class="btn btn-primary" (click)="addNewRowProjectGoal()">
        +
      </button>
    </div>
    <div class="overflow-auto" style="height: 244px">
      <table class="custome-table overflow-auto max-h-[60vh]">
        <thead>
          <tr>
            <td
              [translate]="'name'"
              [translateParams]="{
                ar: 'اسم المتطلب والهدف',
                en: 'Name of the requirement and goal'
              }"
            ></td>
            <td
              [translate]="'name'"
              [translateParams]="{
                ar: 'موظف/قسم',
                en: 'Employee/department'
              }"
            ></td>
            <td
              [translate]="'name'"
              [translateParams]="{
                ar: 'الاسم / القسم',
                en: 'Name/Department'
              }"
            ></td>
            <td
              [translate]="'name'"
              [translateParams]="{
                ar: 'نوع المدة ',
                en: 'duration Type'
              }"
            ></td>
            <td
              [translate]="'name'"
              [translateParams]="{
                ar: 'المدة المتوقعة',
                en: 'Expected duration'
              }"
            ></td>
            <td
              [translate]="'name'"
              [translateParams]="{
                ar: 'خيارات',
                en: 'Options'
              }"
            ></td>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let task of ProjectTypeGoals">
            <!-- <td>{{task.idRow}}</td> -->
            <td>
              <input
                type="text"
                id="RequirmentName{{ task.idRow }}"
                name="RequirmentName{{ task.idRow }}"
                [(ngModel)]="task.RequirmentName"
                class="form-control"
                autocomplete="off"
              />
            </td>
            <td>
              <select
                class="form-select"
                aria-label="Default select example"
                [(ngModel)]="task.EmpDepType"
              >
                <option value="1" selected>موظف</option>
                <option value="2">قسم</option>
              </select>
            </td>
            <td>
              <ng-select
                *ngIf="task.EmpDepType == 1"
                [items]="Employee_ProGoals"
                bindLabel="name"
                bindValue="id"
                [clearable]="true"
                class="w-full p-0"
                [(ngModel)]="task.EmployeeId"
                placeholder="{{ 'Chose' | translate }}"
              >
              </ng-select>

              <ng-select
                *ngIf="task.EmpDepType == 2"
                [items]="Department_ProGoals"
                bindLabel="name"
                bindValue="id"
                [clearable]="true"
                class="w-full p-0"
                [(ngModel)]="task.DepartmentId"
                placeholder="{{ 'Chose' | translate }}"
              >
              </ng-select>
            </td>
            <td>
              <select
                class="form-select"
                aria-label="Default select example"
                (ngModelChange)="
                  timeTypemodelChangeFn($event, task.idRow); calctotal()
                "
                [(ngModel)]="task.timeType"
              >
                <option value="4" selected>ساعه</option>
                <option value="1">يوم</option>
                <option value="2">أسبوع</option>
                <option value="3">شهر</option>
              </select>
            </td>
            <td>
              <input
                type="number"
                (ngModelChange)="
                  timeNomodelChangeFn($event, task.idRow); calctotal()
                "
                min="0"
                [(ngModel)]="task.timeNo"
                class="form-control"
                autocomplete="off"
              />
            </td>
            <td>
              <button
                class="p-2 rounded-lg text-red-500 bg-red-50"
                (click)="deleteRow(task.idRow)"
              >
                <i class="fa-solid fa-trash"></i>
              </button>
            </td>
          </tr>
        </tbody>
        <tr *ngIf="ProjectTypeGoals?.length > 0">
          <td colspan="3">
            {{ "Project strategies Total" | translate }}
          </td>
          <td colspan="2">
            {{ Totaltimestr_ProGoals }}
          </td>
          <td></td>
        </tr>
      </table>
    </div>
    <div
      class="flex gap-2 pt-3 border-t border-neutral-300 col-span-1 md:col-span-2 mt-2"
    >
      <!-- <button
          class="btn btn-primary"
          type="submit"
          (click)="SaveTask(modal)"
          [translate]="'save'"
          [translateParams]="{ ar: 'حفظ', en: 'save' }"
        ></button> -->
      <button (click)="modal?.dismiss()" class="btn btn-secondary">
        {{ "Back" | translate }}
      </button>
    </div>
  </div>
</ng-template>
<!-- projectRequirementsModal -->
<ng-template #projectRequirementsModal let-modal>
  <div
    style="background-color: var(--base-color)"
    class="modal-header text-white flex justify-between items-center"
  >
    <h4 class="m-0">
      <span class="text-2xl">{{ "Project requirements" | translate }}</span>
    </h4>
    <button
      type="button"
      class="text-2xl text-white m-0"
      (click)="modal.dismiss()"
    >
      <i class="fa-solid fa-xmark"></i>
    </button>
  </div>

  <div class="modal-body text-center">
    <mat-form-field class="w-full">
      <mat-label>{{ "search" | translate }}</mat-label>
      <input matInput (keyup)="applyRequirementsFilter($event)" #input />
    </mat-form-field>

    <div class="table">
      <table
        mat-table
        [dataSource]="projectRequirementsDataSource"
        class="mat-elevation-z8 table table-responsive table-striped table-bordered text-center"
        style="vertical-align: middle; font-size: 14px"
      >
        <!-- serial Column -->
        <ng-container matColumnDef="File Name">
          <th mat-header-cell *matHeaderCellDef>
            {{ "File Name" | translate }}
          </th>
          <td mat-cell *matCellDef="let element; let i = index">
            {{ element.nameAr }}
          </td>
        </ng-container>

        <!-- requirements Column -->
        <ng-container matColumnDef="cost">
          <th mat-header-cell *matHeaderCellDef>
            {{ "cost" | translate }}
          </th>
          <td mat-cell *matCellDef="let element; let i = index">
            {{ element.cost }}
          </td>
        </ng-container>
        <ng-container matColumnDef="Attachments">
          <th mat-header-cell *matHeaderCellDef>
            {{ "Attachments" | translate }}
          </th>
          <td mat-cell *matCellDef="let element">
            <div class="flex items-center justify-center gap-1">
              <button
                *ngIf="element.attachmentUrl"
                (click)="downloadFile(element)"
                class="min-w-max p-2 bg-sky-100 hover:bg-sky-500 rounded-lg duration-300 hover:text-white aspect-square w-10"
              >
                <i class="fa-solid fa-eye"></i>
              </button>
            </div>
          </td>
        </ng-container>
        <tr mat-header-row *matHeaderRowDef="projectRequirementsColumns"></tr>
        <tr
          mat-row
          *matRowDef="
            let row;
            let i = index;
            columns: projectRequirementsColumns
          "
        ></tr>
        <!-- Row shown when there is no matching data. -->
        <tr class="mat-row" *matNoDataRow>
          <td class="mat-cell" colspan="3">
            {{ "noResult" | translate }} "{{ input.value }}"
          </td>
        </tr>
      </table>
    </div>
  </div>
</ng-template>
<!-- SaveInvoiceConfirmModal -->
<ng-template #SaveInvoiceConfirmModal let-modal>
  <div
    class="modal-body text-center"
    style="background-color: #cdcdcd !important"
  >
    <p
      [translate]="'name'"
      [translateParams]="{
        ar: 'هل تريد الحفظ ',
        en: 'Are you sure to save ?'
      }"
    ></p>
    <div class="flex gap-2 justify-center mt-3">
      <button
        type="button"
        mat-raised-button
        color="warn"
        (click)="checkPayTypeAndSave(); modal.dismiss()"
      >
        {{ "Yes" | translate }}
      </button>
      <button
        type="button"
        (click)="modal.dismiss()"
        mat-raised-button
        color="basic"
      >
        {{ "No" | translate }}
      </button>
    </div>
  </div>
</ng-template>
<!-- serviceDetails -->
<ng-template #serviceDetailsModal_Invoice let-modal>
  <div
    style="background-color: var(--base-color)"
    class="modal-header text-white flex justify-between items-center"
  >
    <h4 class="m-0">
      <span class="text-2xl">{{ "servicesList" | translate }}</span>
    </h4>
    <button
      type="button"
      class="text-2xl text-white m-0"
      (click)="modal.dismiss()"
    >
      <i class="fa-solid fa-xmark"></i>
    </button>
  </div>
  <div class="modal-body">
    <div
      cdkDropList
      [cdkDropListData]="serviceDetails_Invoice"
      class="example-list"
      (cdkDropListDropped)="drop_Invoice($event)"
    >
      <div
        *ngFor="let item of serviceDetails_Invoice"
        class="example-box"
        cdkDrag
      >
        <div class="col-md-11" style="font-size: 20px">
          <i
            *ngIf="
              (item?.SureService ?? 0) != 1 && OfferPopupAddorEdit_Invoice == 0
            "
            class="fa fa-xmark text-danger"
          ></i>
          <i
            *ngIf="
              (item?.SureService ?? 0) == 1 && OfferPopupAddorEdit_Invoice == 0
            "
            class="fa fa-check text-success"
          ></i>
          <i
            *ngIf="OfferPopupAddorEdit_Invoice == 1"
            class="fa fa-check text-success"
          ></i>
          <span class="text-base mx-2">{{ item?.name }}</span>
        </div>
        <div class="serviceBtns" *ngIf="OfferPopupAddorEdit_Invoice == 0">
          <button
            *ngIf="(item?.SureService ?? 0) != 1"
            (click)="MarkServiceDetails_Invoice(item)"
            type="button"
            class="btn btn-outline-success"
          >
            {{ "Insert" | translate }}
          </button>
          <button
            *ngIf="(item?.SureService ?? 0) == 1"
            (click)="UnMarkServiceDetails_Invoice(item)"
            type="button"
            class="btn btn-outline-danger"
          >
            {{ "delete" | translate }}
          </button>
        </div>
      </div>
    </div>
    <div
      class="flex gap-2 pt-3 border-t border-neutral-300 col-span-1 md:col-span-2 mt-2"
    >
      <button (click)="modal?.dismiss()" class="btn btn-secondary">
        {{ "close" | translate }}
      </button>
    </div>
  </div>
</ng-template>

<ng-template #sendMessage>
  <div
    class="modal-header bg-base text-white flex justify-between items-center"
  >
    <h4 class="m-0">
      <span class="text-2xl">{{ modalDetails.type | translate }}</span>
    </h4>
    <button
      type="button"
      class="text-2xl text-white m-0"
      (click)="modal?.hide()"
    >
      <i class="fa-solid fa-xmark"></i>
    </button>
  </div>
  <div class="modal-body">
    <ng-container>
      <form class="grid gap-3 grid-cols-1 md:grid-cols-2" #messageForm="ngForm">
        <div
          class="form-group"
          *ngIf="
            modalDetails.type == 'sendEmails' ||
            modalDetails.type == 'sendEmail'
          "
        >
          <label for="from" class="text-right col-form-label block">
            {{ "From" | translate }}
          </label>
          <input
            required
            #from="ngModel"
            id="OrginzationEmail"
            name="OrginzationEmail"
            class="form-control"
            type="text"
            [(ngModel)]="getEmailOrgnize"
            id="from"
            name="from"
            [ngModelOptions]="{ standalone: true }"
            readonly
          />
        </div>
        <div class="form-group" *ngIf="modalDetails.type == 'sendEmail'">
          <label for="to234" class="text-right col-form-label block">
            {{ "To" | translate }}
          </label>
          <input
            required
            #to234="ngModel"
            [ngModelOptions]="{ standalone: true }"
            [(ngModel)]="selectedCustomer.mail"
            class="form-control"
            type="text"
            id="mail"
            name="mail"
            readonly
          />
        </div>

        <div
          class="form-group {{
            modalDetails.type == 'sendEmails' ? '' : 'col-span-1 md:col-span-2'
          }} "
          *ngIf="
            modalDetails.type == 'sendEmails' ||
            modalDetails.type == 'sendEmail'
          "
        >
          <label for="Subject" class="text-right col-form-label block">
            {{ "subject" | translate }}
          </label>
          <input
            required
            #Subject="ngModel"
            [ngModelOptions]="{ standalone: true }"
            [(ngModel)]="modalDetails.mailSubject"
            class="form-control"
            autocomplete="off"
            type="mailSubject"
            id="mailSubject"
            name="mailSubject"
          />
        </div>

        <div class="form-group col-span-1 md:col-span-2">
          <label for="Text32" class="text-right col-form-label block">
            {{ "Text" | translate }}
          </label>
          <textarea
            required
            #Text32="ngModel"
            [ngModelOptions]="{ standalone: true }"
            [(ngModel)]="modalDetails.mailText"
            class="form-control"
            autocomplete="off"
            type="mailText"
            id="mailText"
            name="text"
          ></textarea>
        </div>

        <div
          class="col-span-1 md:col-span-2"
          *ngIf="
            modalDetails.type == 'sendEmails' ||
            modalDetails.type == 'sendEmail'
          "
        >
          <label for="formFile" class="form-label">
            {{ "Upload File" | translate }}</label
          >
          <input
            class="form-control"
            [ngModelOptions]="{ standalone: true }"
            (change)="selectFile($event)"
            [(ngModel)]="modalDetails.fileUrl"
            type="file"
            id="fileUrl"
            name="fileUrl"
          />
        </div>

        <div
          class="col-span-1 md:col-span-2 px-2 max-h-96 overflow-auto"
          *ngIf="
            modalDetails.type == 'sendEmails' || modalDetails.type == 'sendSmss'
          "
        >
          <table
            mat-table
            [dataSource]="load_CustomerSelect2Mails"
            matSort
            class="mat-elevation-z8 rounded-t-lg overflow-hidden w-max"
          >
            <!-- Checkbox Column -->
            <ng-container matColumnDef="select">
              <th mat-header-cell *matHeaderCellDef>
                <mat-checkbox
                  color="warn"
                  (change)="$event ? toggleAllRows() : null"
                  [checked]="selection.hasValue() && isAllSelected()"
                  [indeterminate]="selection.hasValue() && !isAllSelected()"
                  [aria-label]="checkboxLabel()"
                >
                </mat-checkbox>
              </th>
              <td mat-cell *matCellDef="let row">
                <mat-checkbox
                  color="warn"
                  (click)="$event.stopPropagation()"
                  (change)="$event ? selection.toggle(row) : null"
                  [checked]="
                    selection.isSelected(row) &&
                    ((row.customerMail && modalDetails.type == 'sendEmails') ||
                      (row.customerMobile && modalDetails.type == 'sendSmss'))
                  "
                  [aria-label]="checkboxLabel(row)"
                  [disabled]="
                    !(
                      (row.customerMail && modalDetails.type == 'sendEmails') ||
                      (row.customerMobile && modalDetails.type == 'sendSmss')
                    )
                  "
                >
                </mat-checkbox>
              </td>
            </ng-container>

            <!-- Name Column -->
            <ng-container matColumnDef="name">
              <th mat-header-cell *matHeaderCellDef>
                {{ "Customer Name" | translate }}
              </th>
              <td mat-cell *matCellDef="let element">{{ element.name }}</td>
            </ng-container>
            <!-- email Column -->
            <ng-container
              matColumnDef="email"
              *ngIf="modalDetails.type == 'sendEmails'"
            >
              <th mat-header-cell *matHeaderCellDef>
                <span *ngIf="modalDetails.type == 'sendEmails'">
                  {{ "Email" | translate }}
                </span>
              </th>
              <td mat-cell *matCellDef="let element">
                {{ element.customerMail }}
              </td>
            </ng-container>
            <ng-container
              matColumnDef="mobile"
              *ngIf="modalDetails.type == 'sendSmss'"
            >
              <th mat-header-cell *matHeaderCellDef>
                <span *ngIf="modalDetails.type == 'sendSmss'">
                  {{ "Mobile Number" | translate }}
                </span>
              </th>
              <td mat-cell *matCellDef="let element">
                {{ element.customerMobile }}
              </td>
            </ng-container>

            <tr
              mat-header-row
              *matHeaderRowDef="
                modalDetails.type == 'sendEmails'
                  ? displayedColumn.usersMail
                  : displayedColumn.usersMobile
              "
            ></tr>
            <tr
              mat-row
              *matRowDef="
                let row;
                columns: modalDetails.type == 'sendEmails'
                  ? displayedColumn.usersMail
                  : displayedColumn.usersMobile
              "
            ></tr>
          </table>
        </div>

        <div
          class="flex gap-2 pt-3 border-t border-neutral-300 col-span-1 md:col-span-2 mt-2"
        >
          <button class="btn btn-primary" type="submit" (click)="sendEMAIL2()">
            {{ "Send" | translate }}
          </button>
          <button (click)="modal?.hide()" class="btn btn-secondary">
            {{ "Back" | translate }}
          </button>
        </div>
      </form>
    </ng-container>
  </div>
</ng-template>

  <!-- btn add  -->
  <ng-template #StorehouseModal let-modal>
    <div class="modal-header bg-base text-white">
      <h4
        class="modal-title mb-0"
        id="modal-basic-title"
        [translate]="'name'"
        [translateParams]="{ ar: 'اضافة جديدة', en: 'Add New' }"
      ></h4>
      <button
        type="button"
        class="text-2xl text-white m-0"
        (click)="modal.dismiss('Cross click')"
      >
        <i class="fa-solid fa-xmark"></i>
      </button>
    </div>
    <div class="modal-body text-center">
      <form #addStorehouse="ngForm" class="grid grid-cols-1 md:grid-cols-2 gap-2">
        <div class="form-group">
          <label for="BuildNameArtxt" class="text-right col-form-label block">
            {{ "nameAr" | translate }}
            <span class="text-danger">*</span></label
          >
          <input
            required
            #StorehouseNameAr="ngModel"
            ngModel
            [(ngModel)]="dataAdd.Storehouse.nameAr"
            class="form-control"
            type="text"
            id="StorehouseNameArtxt"
            name="StorehouseNameArtxt"
            autocomplete="off"
            [placeholder]="('Write' | translate) + ' ' + ('nameAr' | translate)"
          />
        </div>
        <div class="form-group">
          <label for="StorehouseNameEntxt" class="text-right col-form-label block">
            {{ "nameEn" | translate }}
            <span class="text-danger">*</span></label
          >
          <div style="display: inline-flex; width: 100%">
            <input
              required
              #StorehouseNameEnValue
              #StorehouseNameEn="ngModel"
              [(ngModel)]="dataAdd.Storehouse.nameEn"
              ngModel
              class="form-control"
              type="text"
              id="StorehouseNameEntxt"
              name="StorehouseNameEntxt"
              autocomplete="off"
              [placeholder]="('Write' | translate) + ' ' + ('nameEn' | translate)"
            />
            <a
              class="btn"
              id="CopyStorehouseName2"
              (click)="dataAdd.Storehouse.nameEn = dataAdd.Storehouse.nameAr"
              ><i class="fa fa-copy"></i
            ></a>
          </div>
        </div>
      </form>
      <div class="max-h-80 overflow-auto px-2">
        <table class="table table-hover">
          <thead>
            <tr>
              <th>{{ "nameAr" | translate }}</th>
              <th>{{ "nameEn" | translate }}</th>
              <th
                [translate]="'name'"
                [translateParams]="{
                  ar: 'خيارات',
                  en: 'Operations'
                }"
              ></th>
            </tr>
          </thead>
          <tbody>
            <tr
              *ngFor="let type of StorehousePopup"
              (dblclick)="
                setStorehouseInSelect(type, StorehouseModal);
                modal.dismiss('Cross click')
              "
            >
              <td>{{ type.name }}</td>
              <td>{{ type.nameEn }}</td>
              <td class="flex gap-2 justify-center">
                <button
                  class="p-2 bg-orange-100 hover:bg-orange-500 rounded-lg duration-300 hover:text-white aspect-square w-10"
                  (click)="
                    dataAdd.Storehouse.nameAr = type.name;
                    dataAdd.Storehouse.nameEn = type.nameEn;
                    dataAdd.Storehouse.id = type.id
                  "
                >
                  <i class="fa-regular fa-pen-to-square"></i>
                </button>
                <button
                  (click)="getStorehouseRow(type); open(deleteStorehouse)"
                  class="p-2 bg-red-100 hover:bg-red-500 rounded-lg duration-300 hover:text-white aspect-square w-10"
                >
                  <i class="fa-solid fa-trash-can"></i>
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="flex gap-2 mt-3 pt-3 border-t border-neutral-300">
        <button
          class="btn bg-base text-white"
          type="submit"
          [disabled]="addStorehouse.invalid"
          (click)="saveStorehouse()"
        >
          {{ "Save" | translate }}
        </button>
        <button (click)="modal.dismiss('Cross click')" class="btn btn-secondary">
          {{ "Back" | translate }}
        </button>
        <button (click)="resetStorehouse()" class="btn bg-base text-white">
          {{ "جديد" | translate }}
        </button>
      </div>
    </div>
  </ng-template>
  
  <ng-template #deleteStorehouse let-modal>
    <div class="modal-body text-center">
      <p
        [translate]="'name'"
        [translateParams]="{
          ar: 'هل تريد بالتأكيد حذف هذا الصف',
          en: 'Are you sure to delete this row ?'
        }"
      ></p>
      <div class="flex gap-2 justify-center mt-3">
        <button
          type="button"
          mat-raised-button
          color="warn"
          (click)="confirmStorehouseDelete(); modal.dismiss()"
        >
          {{ "Yes" | translate }}
        </button>
        <button
          type="button"
          (click)="modal.dismiss()"
          mat-raised-button
          color="basic"
        >
          {{ "No" | translate }}
        </button>
      </div>
    </div>
  </ng-template>