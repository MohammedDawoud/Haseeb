<div class="offers-price">
  <app-navigator [title]="title"></app-navigator>
  <div class="head flex gap-2 flex-wrap items-end justify-between">
    <div class="flex gap-2 flex-wrap items-end">
      <div class="max-w-xs flex-grow">
        <label class="col-form-label"> {{ "Customer" | translate }}</label>
        <ng-select
          class="w-full p-0"
          placeholder="{{ 'Chose' | translate }}"
          [(ngModel)]="selectedCustoemr"
          [ngModelOptions]="{ standalone: true }"
          (change)="CustomerSearchChange()"
        >
          <ng-option
            *ngFor="let user of load_CustomerSearch"
            [value]="user.id"
            >{{ user.name }}</ng-option
          >
        </ng-select>
      </div>
      <div class="form-group relative">
        <i class="fa fa-search absolute"></i>
        <input
          placeholder="{{ 'searchByOfferNum' | translate }}"
          type="text"
          class="form-control"
          name="offer_number"
          (keyup)="applyFilterGrid($event)"
        />
      </div>
    </div>

    <div class="btns">
      <button
        type="button"
        class="flex gap-1 btn btn-warning"
        (click)="exportExcel()"
      >
        {{ "exportExcel" | translate }}
        <i class="fa-solid fa-file-export"></i>
      </button>

      <button style="display: none;"
        type="button"
        class="btn btn-outline-secondary"
        [routerLink]="'/projects/track-projects'"
      >
        {{ "projectManagement" | translate }}
      </button>

      <button
        (click)="open(addSerivceModal, null, 'addSerivceModal')"
        type="button"
        class="btn btn-outline-primary"
      >
        {{ "addServices" | translate }}
      </button>

      <button
        *ngIf="userG?.userPrivileges.includes(121401)"
        type="button"
        class="btn bg-base text-white"
        (click)="open(addOfferPrice, null, 'add')"
      >
        {{ "addNewOffer" | translate }}
      </button>

      <button
        type="button"
        class="bg-green-500 hover:bg-green-700 text-white"
        (click)="open(generalOrders)"
      >
        {{ "generalOrders" | translate }}
        {{ " [ " + GetPublicOrderCounter + " ]" }}
      </button>

      <button
        type="button"
        class="bg-red-500 hover:bg-red-700 text-white"
        (click)="open(designOrders)"
      >
        {{ "designOrders" | translate }}

        {{ " [ " + GetDesignOrderCounter + " ]" }}
      </button>
    </div>
  </div>

  <p *ngIf="selectedRow" class="mt-5 mx-2">
    <span
      [translate]="'name'"
      [translateParams]="{ ar: 'عرض رقم', en: 'Offer Numer' }"
    ></span>
    <span class="mx-2 text-red-500 fw-bold">{{ selectedRow?.offerNo }}</span>
  </p>

  <div class="timeLine">
    <ul class="list-unstyled">
      <li>
        <span
          *ngIf="selectedRow?.offerStatus >= 1"
          class="{{
            selectedRow?.offerStatus >= 1 ? 'bg-base text-white' : ''
          }}"
        >
          <i class="fa fa-check"></i
        ></span>
        <span *ngIf="selectedRow?.offerStatus < 1">1</span>

        <span>{{ "step1" | translate }}</span>
      </li>
      <li>
        <span
          *ngIf="selectedRow?.offerStatus >= 2"
          class="{{
            selectedRow?.offerStatus >= 2 ? 'bg-base text-white' : ''
          }}"
        >
          <i class="fa fa-check"></i
        ></span>
        <span *ngIf="selectedRow?.offerStatus < 2">2</span>

        <span>{{ "step2" | translate }}</span>
      </li>
      <!-- <li>
        <span
          *ngIf="selectedRow?.offerStatus >= 3"
          class="{{
            selectedRow?.offerStatus >= 3 ? 'bg-base text-white' : ''
          }}"
        >
          <i class="fa fa-check"></i
        ></span>
        <span *ngIf="selectedRow?.offerStatus < 3">3</span>

        <span>{{ "step3" | translate }}</span>
      </li> -->
      <li>
        <span
          *ngIf="selectedRow?.offerStatus >= 4"
          class="{{
            selectedRow?.offerStatus >= 4 ? 'bg-base text-white' : ''
          }}"
        >
          <i class="fa fa-check"></i
        ></span>
        <span *ngIf="selectedRow?.offerStatus < 4">4</span>

        <span>{{ "step4" | translate }}</span>
      </li>
      <li>
        <span
          *ngIf="selectedRow?.offerStatus >= 5"
          class="{{
            selectedRow?.offerStatus >= 5 ? 'bg-base text-white' : ''
          }}"
        >
          <i class="fa fa-check"></i
        ></span>
        <span *ngIf="selectedRow?.offerStatus < 5">5</span>

        <span>{{ "step5" | translate }}</span>
      </li>
    </ul>
  </div>

  <div class="tables-data mt-3 overflow-hidden">
    <!-- table -->
    <div class="overflow-auto">
      <table
        mat-table
        [dataSource]="dataSource"
        matSort
        class="mat-elevation-z8 rounded-t-lg overflow-hidden w-max"
      >
        <!-- offer_id Column -->
        <ng-container matColumnDef="offer_id">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span
              [translate]="'name'"
              [translateParams]="{
                ar: 'رقم العرض',
                en: 'offer id'
              }"
            ></span>
          </th>
          <!-- <td
            mat-cell
            *matCellDef="let element"
            [title]="
              element.offerStatus == 0
                ? ('late' | translate)
                : element.offerStatus == 3
                ? ('Almost done' | translate)
                : ''
            "
          >
            <span
              class="{{ (element.offerStatus != 0 && element.customerStatus != 0) ? 'text-red-500 fw-bold' : '' }} {{
                element.offerStatus == 3 ? 'text-yellow-500 fw-bold' : ''
              }} "
              >{{ element.offerNo }}</span
            >
          </td> -->
          <td
            mat-cell
            *matCellDef="let element"
            [title]="
              element.offerStatus == 0
                ? ('late' | translate)
                : element.offerStatus == 3
                ? ('Almost done' | translate)
                : ''
            "
          >
            <span>{{ element.offerNo }}</span>
          </td>
        </ng-container>

        <!-- date Column -->
        <ng-container matColumnDef="date">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span
              [translate]="'name'"
              [translateParams]="{
                ar: '  التاريخ',
                en: 'Date  '
              }"
            ></span>
          </th>
          <td mat-cell *matCellDef="let element">
            {{ element.offerDate }}
          </td>
        </ng-container>

        <!-- customer Column -->
        <ng-container matColumnDef="customer">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span
              [translate]="'name'"
              [translateParams]="{
                ar: '  العميل',
                en: 'Customer'
              }"
            ></span>
          </th>
          <td mat-cell *matCellDef="let element">
            {{ element.customerName }}
          </td>
        </ng-container>

        <!-- price Column -->
        <ng-container matColumnDef="price">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span
              [translate]="'name'"
              [translateParams]="{
                ar: 'المبلغ  ',
                en: 'price'
              }"
            ></span>
          </th>
          <td mat-cell *matCellDef="let element">
            {{ element.offerValue }}
          </td>
        </ng-container>

        <!-- user Column -->
        <ng-container matColumnDef="user">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span
              [translate]="'name'"
              [translateParams]="{
                ar: '  مقدم العرض',
                en: '  Presenter'
              }"
            ></span>
          </th>
          <td mat-cell *matCellDef="let element">
            {{ element.presenter }}
          </td>
        </ng-container>

        <!-- project_id Column -->
        <ng-container matColumnDef="project_id">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span
              [translate]="'name'"
              [translateParams]="{
                ar: 'رقم المشروع',
                en: 'Project Number'
              }"
            ></span>
          </th>
          <td mat-cell *matCellDef="let element">
            {{ element.projectno == "" ? "بدون" : element.projectno }}
          </td>
        </ng-container>

        <!-- project-duration Column -->
        <ng-container matColumnDef="project-duration">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span
              [translate]="'name'"
              [translateParams]="{
                ar: 'مدة المشروع',
                en: 'project duration  '
              }"
            ></span>
          </th>
          <td mat-cell *matCellDef="let element">
            {{ Getprojecttime(element.projecttime) }}
          </td>
        </ng-container>

        <!-- operations Column -->
        <ng-container matColumnDef="operations">
          <th
            mat-header-cell
            *matHeaderCellDef
            [translate]="'name'"
            [translateParams]="{
              ar: 'خيارات',
              en: 'Operations'
            }"
          ></th>
          <td mat-cell *matCellDef="let element">
            <div class="flex gap-1 justify-center py-2">
              <button
                *ngIf="element.offerStatus == 0 && element.customerStatus == 0"
                type="button"
                class="p-2 bg-green-100 hover:bg-green-500 rounded-lg duration-300 hover:text-white w-30"
              >
                <span
                  class="notification-counter"
                  [class.disabled]="disableButtonIntoduceoffer"
                  (click)="IntoduceofferManual(element.offersPricesId)"
                  >{{ "IntoduceofferManual" | translate }}</span
                >
              </button>

              <button
                *ngIf="element.offerStatus == 1 && element.customerStatus == 0"
                type="button"
                class="p-2 bg-green-100 hover:bg-green-500 rounded-lg duration-300 hover:text-white w-30"
              >
                <span
                  (click)="Customeraccept(element)"
                  style="color: red; font-weight: bold"
                  >{{ "acceptofferManual" | translate }}</span
                >
              </button>

              <button
                type="button"
                class="p-2 bg-green-100 hover:bg-green-500 rounded-lg duration-300 hover:text-white w-30"
              >
                <span
                  class="notification-counter"
                  [class.disabled]="disableButtonIntoduceoffer"
                  (click)="Intoduceoffer(element.offersPricesId)"
                  *ngIf="
                    element.offerStatus == 0 && element.customerStatus == 0
                  "
                  >{{ "step1Notnew" | translate }}</span
                >

                <span
                  style="color: red; font-weight: bold"
                  *ngIf="
                    element.offerStatus == 1 && element.customerStatus == 0
                  "
                  >{{ "step1new" | translate }}</span
                >
                <span
                  style="font-weight: bold"
                  *ngIf="
                    element.offerStatus != 0 && element.customerStatus == 1
                  "
                  >{{ "step2new" | translate }}</span
                >
              </button>

              <button
                *ngIf="userG?.userPrivileges.includes(121402)"
                class="p-2 bg-orange-100 hover:bg-orange-500 rounded-lg duration-300 hover:text-white w-10"
                (click)="open(addOfferPrice, element, 'edit'); getrow(element)"
              >
                <i class="fa-regular fa-pen-to-square"></i>
              </button>
              <button
                *ngIf="
                  element.projectId == 0 &&
                  userG?.userPrivileges.includes(121403)
                "
                class="p-2 bg-red-100 hover:bg-red-500 rounded-lg duration-300 hover:text-white w-10"
                (click)="open(deleteModal, null, 'delete'); getrow(element)"
              >
                <i class="fa-solid fa-trash-can"></i>
              </button>
              <button
                class="p-2 bg-green-100 hover:bg-green-500 rounded-lg duration-300 hover:text-white w-10"
                (click)="open(sendEmail, element, 'sendEmail')"
                [disabled]="OrganizationData?.sendCustomerMail == false"
              >
                <i
                  class="fa-solid fa-at"
                  [title]="
                    OrganizationData?.sendCustomerMail == false
                      ? 'ايميل المنشأة غير مفعل'
                      : 'ارسال ميل'
                  "
                ></i>
              </button>

              <button
              type="button"
              class="current-tasks btn btn-outline-success    btn-sm waves-effect"
              data-toggle="tooltip"
              data-placement="top"
              (click)="uploadedFiles = [];open(sendWhatsApp, element,'WhatsApp')"
              [disabled]="WhatsAppData?.sendactivationOffer == false"
              >
              <i
                class="fa-brands fa-whatsapp"
                [title]="
                  WhatsAppData?.sendactivationOffer == false ? 'خدمة ارسال واتس اب غير مفعل': 'ارسال واتس اب'"                    ></i>
            </button>


              <!-- <button *ngIf="(element.offerStatus != 0 && element.customerStatus == 0)"
              class="p-2 bg-green-100 hover:bg-green-500 rounded-lg duration-300 hover:text-white  w-30"
              (click)="Customeraccept(element)"
            >
              <span>{{"step2new" | translate}}</span>
            </button> -->
              <button
                *ngIf="
                  element.offerStatus != 0 &&
                  element.projectId == 0 &&
                  element.customerId != 0 &&
                  element.customerStatus == 1
                "
                class="p-2 bg-green-200 hover:bg-green-500 rounded-lg duration-300 hover:text-white w-30"
                (click)="
                  getrow(element); open(addProjectModal, element, 'addproject')
                "
              >
                <span>{{ "new project" | translate }}</span>
              </button>
              <button
                class="p-2 bg-sky-100 hover:bg-sky-500 rounded-lg duration-300 hover:text-white w-10"
                (click)="
                  GetOfferPricePrint(element, 1); open(printOfferDivModal)
                "
              >
                <i class="fa-solid fa-print"></i>
              </button>
              <button
                *ngIf="element.isEnglish == 1"
                class="p-2 bg-sky-100 hover:bg-sky-500 rounded-lg duration-300 hover:text-white w-10"
                (click)="
                  GetOfferPricePrint(element, 2); open(printOfferDivModal)
                "
              >
                <i class="fa-solid fa-print"></i>
              </button>
            </div>
          </td>
        </ng-container>

        <!-- Symbol Column -->

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>

        <tr
          mat-row
          *matRowDef="let row; columns: displayedColumns"
          class="duration-300 hover:bg-slate-100"
          (click)="GetProgressValues(row)"
        ></tr>
      </table>
    </div>
    <mat-paginator
      #paginator
      [pageSizeOptions]="[10, 25, 100, dataSource.data.length]"
    >
    </mat-paginator>
  </div>
</div>

<!-- addOfferPrice / edit -->
<ng-template #addOfferPrice let-modal>
  <div
    style="background-color: var(--base-color)"
    class="modal-header text-white flex justify-between items-center"
  >
    <h4 class="modal-title mb-0" id="modal-basic-title">
      <span *ngIf="modalDetailsOffer?.id">{{
        "editNewOffer" | translate
      }}</span>

      <span *ngIf="!modalDetailsOffer?.id">{{
        "addNewOffer" | translate
      }}</span>
    </h4>
    <button
      type="button"
      class="text-white m-0"
      aria-label="Close"
      (click)="modal.dismiss('Cross click')"
    >
      <i class="fa fa-close"></i>
    </button>
  </div>

  <div class="modal-body">
    <form #offerPriceForm="ngForm" class="offerPrice-form">
      <div class="row align-items-end mb-4">
        <div class="col-sm-6 col-md-3 col-lg-2">
          <div class="form-group">
            <label for="customer" class="text-right col-form-label block">
              {{ "Customer Name" | translate }}
            </label>
            <input
              required
              #customer="ngModel"
              [(ngModel)]="modalDetailsOffer.customer"
              ngModel
              class="form-control"
              type="text"
              id="customer"
              name="customer"
              [disabled]="existValue"
              autocomplete="off"
            />
          </div>
        </div>

        <div class="col-sm-6 col-md-3 col-lg-2">
          <div class="form-group">
            <label for="customerEn" class="text-right col-form-label block">
              {{ "Client Name (English)" | translate }}
            </label>
            <input
              required
              #customerEn="ngModel"
              [(ngModel)]="modalDetailsOffer.customerEn"
              ngModel
              class="form-control"
              type="text"
              id="customerEn"
              name="customerEn"
              [disabled]="existValue"
              autocomplete="off"
            />
          </div>
        </div>

        <div class="col-sm-6 col-md-3 col-lg-2">
          <div class="form-group">
            <label for="customerEmail" class="text-right col-form-label block">
              {{ "Email" | translate }}
            </label>
            <input
              required
              #customerEmail="ngModel"
              [(ngModel)]="modalDetailsOffer.customerEmail"
              ngModel
              class="form-control"
              type="text"
              id="customerEmail"
              name="customerEmail"
              [disabled]="existValue"
              email
              autocomplete="off"
            />
          </div>
        </div>

        <div class="col-sm-6 col-md-3 col-lg-2">
          <div class="form-group">
            <label for="customerPhone" class="text-right col-form-label block">
              {{ "Mobile Number" | translate }}
            </label>
            <input
              required
              #customerPhone="ngModel"
              [(ngModel)]="modalDetailsOffer.customerPhone"
              ngModel
              class="form-control"
              type="tel"
              id="customerPhone"
              name="customerPhone"
              [disabled]="existValue"
              autocomplete="off"
            />
          </div>
        </div>

        <div class="col-sm-6 col-md-3 col-lg-2">
          <div class="form-group">
            <label class="text-right col-form-label block">
              {{ "Chose Date" | translate }}
            </label>
            <div class="form-group timeInput">
              <input
                [(ngModel)]="modalDetailsOffer.date"
                name="date"
                type="text"
                class="form-control"
                bsDatepicker
                autocomplete="off"
              />
            </div>
          </div>
        </div>

        <div class="col-sm-6 col-md-3 col-lg-2">
          <div class="form-group">
            <input
              #exist="ngModel"
              ngModel
              type="checkbox"
              [(ngModel)]="existValue"
              id="exist"
              name="exist"
              (change)="resetCustomer()"
            />
            <label for="exist" class="text-right col-form-label mx-2">
              {{ "existUser" | translate }}
            </label>
          </div>
        </div>

        <div class="col-sm-8 col-md-5 col-lg-3">
          <div class="form-group">
            <label class="col-form-label"> {{ "Customer" | translate }}</label>
            <ng-select
              class="w-full p-0"
              placeholder="{{ 'Chose' | translate }}"
              [(ngModel)]="modalDetailsOffer.user"
              [ngModelOptions]="{ standalone: true }"
              [readonly]="!existValue"
              name="user"
            >
              <ng-option
                *ngFor="let user of load_CustomerM"
                [value]="user.id"
                >{{ user.name }}</ng-option
              >
            </ng-select>
          </div>
        </div>

        <div class="col-sm-6 col-md-3 col-lg-2">
          <div class="form-group">
            <label class="col-form-label"> {{ "Title" | translate }}</label>
            <ng-select
              class="w-full p-0"
              placeholder="{{ 'Chose' | translate }}"
              [(ngModel)]="modalDetailsOffer.title"
              [ngModelOptions]="{ standalone: true }"
              name="title"
            >
              <ng-option
                *ngFor="let user of NickNameList"
                [value]="user.id"
                [translate]="'name'"
                [translateParams]="{ ar: user?.name?.ar, en: user?.name?.en }"
              ></ng-option>
            </ng-select>
          </div>
        </div>

        <div class="col-sm-6 col-md-3 col-lg-2">
          <div class="form-group">
            <label class="col-form-label">
              {{ "description" | translate }}</label
            >
            <ng-select
              class="w-full p-0"
              placeholder="{{ 'Chose' | translate }}"
              [(ngModel)]="modalDetailsOffer.description"
              [ngModelOptions]="{ standalone: true }"
              name="description"
            >
              <ng-option
                *ngFor="let user of DescriptionList"
                [value]="user.id"
                [translate]="'name'"
                [translateParams]="{ ar: user?.name?.ar, en: user?.name?.en }"
              ></ng-option>
            </ng-select>
          </div>
        </div>

        <div class="col-sm-6 col-md-3 col-lg-3">
          <div class="form-group">
            <label class="col-form-label">
              {{ "sales Engineer" | translate }}</label
            >
            <ng-select
              class="w-full p-0"
              placeholder="{{ 'Chose' | translate }}"
              [(ngModel)]="modalDetailsOffer.salesEngineer"
              [ngModelOptions]="{ standalone: true }"
              (change)="GetUserInfo()"
              name="salesEngineer"
            >
              <ng-option *ngFor="let user of load_EngM" [value]="user.id">{{
                user.name
              }}</ng-option>
            </ng-select>
          </div>
        </div>

        <div class="col-sm-6 col-md-3 col-lg-1" style="width: 13%">
          <div class="form-group">
            <label for="department" class="text-right col-form-label block">
              {{ "department" | translate }}
            </label>
            <input
              required
              #department="ngModel"
              [(ngModel)]="modalDetailsOffer.department"
              ngModel
              class="form-control"
              type="text"
              id="department"
              name="department"
              autocomplete="off"
              disabled
            />
          </div>
        </div>

        <div class="col-sm-6 col-md-3 col-lg-2">
          <div class="form-group">
            <label for="offer_no" class="text-right col-form-label block">
              {{ "Offer Number" | translate }}
            </label>
            <div class="flex items-start">
              <input
                required
                #offer_no="ngModel"
                [(ngModel)]="modalDetailsOffer.offer_no"
                ngModel
                class="form-control"
                type="text"
                id="offer_no"
                name="offer_no"
                (change)="OfferNoTxtChenged()"
                [disabled]="!showOfferValue"
              />
              <input
                #showOffer="ngModel"
                [(ngModel)]="showOfferValue"
                class="form-check-input"
                type="checkbox"
                name="showOffer"
                style="height: 38px; width: 38px; margin: 0"
              />
            </div>
          </div>
        </div>

        <div class="col-sm-6 col-md-5">
          <div class="form-group">
            <label for=" offer_intro" class="text-right col-form-label block">
              {{ "Presentation" | translate }}
            </label>
            <input
              required
              #offer_intro="ngModel"
              [(ngModel)]="modalDetailsOffer.offer_intro"
              ngModel
              class="form-control"
              type="text"
              id="offer_intro"
              name="offer_intro"
              autocomplete="off"
            />
          </div>
        </div>

        <div class="col-sm-4 col-md-2 flex justify-center">
          <div class="form-group">
            <input
              #default="ngModel"
              ngModel
              type="checkbox"
              id="default"
              name="default"
              [(ngModel)]="modalDetailsOffer.default"
            />
            <label for="default" class="text-right col-form-label mx-2">
              {{ "default" | translate }}
            </label>
          </div>
        </div>

        <div class="col-sm-5 col-md-3" style="display: none;">
          <div class="form-group" *ngIf="!modalDetailsOffer?.id">
            <button
              type="button"
              class="btn bg-base text-white offerPrice-btn"
              (click)="open(LandArea, null, 'LandArea')"
            >
              <i class="fa fa-user mx-2"></i>
              <span>{{ "Land area and required floors" | translate }}</span>
            </button>
          </div>
        </div>
      </div>

      <div class="row mb-3">
        <h3 class="flex items-center justify-start fw-bold">
          {{ "services" | translate }}
          <button
            type="button "
            class="offer-price-add-btn mx-2"
            (click)="addService()"
          >
            <i class="fa fa-plus"></i>
          </button>
        </h3>

        <div class="offer-price-editable shadow mb-4" style="overflow-x: auto">
          <table
            class="table table-responsive table-striped table-bordered text-center"
            style="vertical-align: middle; font-size: 14px"
          >
            <thead
              class="bg-base text-white"
              style="line-height: 30px; font-size: 13px"
            >
              <tr>
                <th>{{ "ServiceNo" | translate }}</th>
                <th style="width: 30% !important">
                  {{ "ServiceName" | translate }}
                </th>
                <th>{{ "Unit" | translate }}</th>
                <th>{{ "Quantity" | translate }}</th>
                <th>{{ "price" | translate }}</th>
                <th>{{ "totalBeforeTax" | translate }}</th>
                <th>{{ "VATTax" | translate }}</th>
                <th>{{ "netTax" | translate }}</th>
                <th>{{ "action" | translate }}</th>
              </tr>
            </thead>
            <tbody>
              <tr
                *ngFor="let item of offerServices; let i = index"
                style="line-height: 5px"
              >
                <td>{{ item.idRow }}</td>
                <td
                  (click)="
                    open(
                      servicesListModal_Offer,
                      null,
                      'servicesList_Offer',
                      item.idRow
                    )
                  "
                >
                  <input
                    type="text"
                    name="os-name{{ item.idRow }}"
                    [(ngModel)]="item.accountJournaltxt"
                    ngModel
                    readonly
                  />
                </td>
                <td>
                  <input
                    type="text"
                    name="os-unit{{ item.idRow }}"
                    [(ngModel)]="item.UnitConst"
                    readonly
                  />
                </td>

                <td>
                  <input
                    type="text"
                    name="os-amount{{ item.idRow }}"
                    [(ngModel)]="item.QtyConst"
                    (keyup)="CalculateTotal_Offer()"
                  />
                </td>

                <td>
                  <div class="flex">
                    <input
                      type="number"
                      name="os-price{{ item.idRow }}"
                      [(ngModel)]="item.Amounttxt"
                      (keyup)="CalculateTotal_Offer()"
                    />
                    <span *ngIf="item.Amounttxt" style="align-self: center"
                      >ر.س</span
                    >
                  </div>
                </td>
                <td>
                  <div class="flex">
                  <input
                    type="text"
                    name="os-AmountBefore{{ item.idRow }}"
                    [(ngModel)]="item.AmountBeforeTaxtxt"
                    readonly
                  />
                  <span *ngIf="item.AmountBeforeTaxtxt" style="align-self: center"
                  >ر.س</span
                >
                 </div>
                </td>

                <td>
                  <div class="flex">
                    <input
                      type="number"
                      name="os-vatTax{{ item.idRow }}"
                      [(ngModel)]="item.taxAmounttxt"
                      readonly
                    />
                    <span *ngIf="item.taxAmounttxt" style="align-self: center"
                      >ر.س</span
                    >
                  </div>
                </td>
                <td>
                  <div class="flex">
                    <input
                      type="number"
                      name="os-taxes{{ item.idRow }}"
                      [(ngModel)]="item.TotalAmounttxt"
                      readonly
                    />
                    <span *ngIf="item.TotalAmounttxt" style="align-self: center"
                      >ر.س</span
                    >
                  </div>
                </td>
                <td class="flex">
                  <button
                    title=""
                    class="p-2 bg-orange-100 hover:bg-orange-500 rounded-lg duration-300 hover:text-white w-10"
                    style="margin-inline-end: 6px"
                    (click)="open(serviceDetailsModal, item, 'serviceDetails')"
                  >
                    <i class="fa-solid fa-info"></i>
                  </button>
                  <button
                    class="p-2 bg-red-100 hover:bg-red-500 rounded-lg duration-300 hover:text-white w-10"
                    (click)="
                      RemoveServicesparent(item); deleteService(item.idRow)
                    "
                  >
                    <i class="fa-solid fa-trash-can"></i>
                  </button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="offerPrice-box-info">
          <div class="boxdivSelect">
            <label for="include_tax">{{ "tax type" | translate }}</label>
            <ng-select
              class="p-0"
              placeholder="{{ 'Chose' | translate }}"
              name="include_tax"
              [(ngModel)]="modalDetailsOffer.taxtype"
              (change)="CalculateTotal_Offer()"
              [clearable]="false"
            >
              <ng-option [value]="2">{{
                "Excluding tax" | translate
              }}</ng-option>
              <ng-option [value]="3">{{
                "Taxes included" | translate
              }}</ng-option>
            </ng-select>
          </div>

          <div class="boxdiv">
            <label for="total_amount">{{ "Total amount" | translate }}</label>
            <input
              type="number"
              id="total_amount"
              name="total_amount"
              class="form-control"
              [(ngModel)]="modalDetailsOffer.total_amount"
              readonly
            />
          </div>

          <div class="boxdiv">
            <label for="total_amount_text">{{
              "total in writing" | translate
            }}</label>
            <input
              type="text"
              id="total_amount_text"
              name="total_amount_text"
              class="form-control"
              [(ngModel)]="modalDetailsOffer.total_amount_text"
              readonly
            />
          </div>
        </div>
      </div>

      <div class="row mb-3">
        <h3 class="flex items-center justify-start fw-bold">
          {{ "payments" | translate }}
          <button
            type="button "
            class="offer-price-add-btn mx-2"
            (click)="addPayments()"
          >
            <i class="fa fa-plus"></i>
          </button>
        </h3>

        <div class="table offer-price-editable shadow">
          <table
            class="table table-responsive table-striped table-bordered text-center"
            style="vertical-align: middle; font-size: 14px"
          >
            <thead
              class="bg-base text-white"
              style="line-height: 30px; font-size: 13px"
            >
              <tr>
                <th>{{ "Statement" | translate }}</th>
                <th>{{ "English statement" | translate }}</th>
                <th>{{ "Ratio" | translate }}</th>
                <th>{{ "amount" | translate }}</th>
                <th>{{ "action" | translate }}
                  <button
                  class="hover:bg-red-500 rounded-lg duration-300 hover:text-white w-10"
                  (click)="deletePaymentsAll()">
                  <i class="fa-solid fa-trash-can"></i>
                </button>
                </th>
                <th>{{ "Installing" | translate }}</th>
              </tr>
            </thead>
            <tbody>
              <tr
                *ngFor="let item of offerPayments; let i = index"
                style="line-height: 5px"
              >
                <td>
                  <input
                    type="text"
                    name="op-statement{{ item.idRow }}"
                    [(ngModel)]="item.statement"
                    ngModel
                  />
                </td>
                <td>
                  <input
                    type="text"
                    name="op-statementEn{{ item.idRow }}"
                    [(ngModel)]="item.statementEn"
                  />
                </td>
                <td class="relative">
                  <input
                    type="number"
                    name="op-ratio{{ item.idRow }}"
                    [(ngModel)]="item.ratio"
                    (keyup)="CalcOfferDet(1)"
                  />
                  <span class="absolute offer-price-percent">%</span>
                </td>
                <td>
                  <input
                    type="number"
                    name="op-amount{{ item.idRow }}"
                    [(ngModel)]="item.amount"
                    (keyup)="CalcOfferDet(2)"
                  />
                </td>
                <td>
                  <button
                    class="p-2 bg-red-100 hover:bg-red-500 rounded-lg duration-300 hover:text-white w-10"
                    (click)="deletePayments(item.idRow)"
                  >
                    <i class="fa-solid fa-trash-can"></i>
                  </button>
                </td>
                <td>
                  <input
                    type="checkbox"
                    [(ngModel)]="item.status"
                    name="op-status{{ item.idRow }}"
                  />
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <div class="row">
        <h3 class="flex items-center justify-start fw-bold">
          {{ "Terms" | translate }}
          <button
            type="button "
            class="offer-price-add-btn mx-2"
            (click)="addTerm()"
          >
            <i class="fa fa-plus"></i>
          </button>
        </h3>

        <div class="table offer-price-editable shadow">
          <table
            class="table table-responsive table-striped table-bordered text-center"
            style="vertical-align: middle; font-size: 14px"
          >
            <thead
              class="bg-base text-white"
              style="line-height: 30px; font-size: 13px"
            >
              <tr>
                <th>{{ "Statement" | translate }}</th>
                <th>{{ "English statement" | translate }}</th>
                <th>{{ "action" | translate }}
                  <button
                    class="hover:bg-red-500 rounded-lg duration-300 hover:text-white w-10"
                    (click)="deleteTermAll()">
                    <i class="fa-solid fa-trash-can"></i>
                  </button>

                </th>
                <th>{{ "Installing" | translate }}</th>
              </tr>
            </thead>
            <tbody>
              <tr
                *ngFor="let item of offerTerms; let i = index"
                style="line-height: 5px"
              >
                <td>
                  <input
                    type="text"
                    name="te-statement{{ item.idRow }}"
                    [(ngModel)]="item.statement"
                  />
                </td>
                <td>
                  <input
                    type="text"
                    name="te-statementEn{{ item.idRow }}"
                    [(ngModel)]="item.statementEn"
                  />
                </td>
                <td>
                  <button
                    class="p-2 bg-red-100 hover:bg-red-500 rounded-lg duration-300 hover:text-white w-10"
                    (click)="deleteTerm(item.idRow)"
                  >
                    <i class="fa-solid fa-trash-can"></i>
                  </button>
                </td>
                <td>
                  <input
                    type="checkbox"
                    [(ngModel)]="item.status"
                    name="ot-status{{ item.idRow }}"
                  />
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <hr class="my-3" />

      <div class="row">
        <div class="col-sm-6 col-md-4 col-lg-3 mb-0 mb-sm-3">
          <div class="form-group">
            <input
              #remeberMe="ngModel"
              ngModel
              type="checkbox"
              id="remeberMe"
              name="remeberMe"
              [(ngModel)]="modalDetailsOffer.remeberMe"
            />
            <label for="remeberMe" class="text-right col-form-label mx-2">
              {{ "remeberMe" | translate }}
            </label>
          </div>
        </div>
        <div class="col-sm-6 col-md-4 col-lg-3 mb-0 mb-sm-3">
          <div class="form-group">
            <div class="form-group timeInput">
              <input
                placeholder="{{ 'Chose Date' | translate }}"
                [(ngModel)]="modalDetailsOffer.followDate"
                name="followDate"
                type="text"
                class="form-control"
                autocomplete="off"
                [disabled]="!modalDetailsOffer.remeberMe"
                bsDatepicker
              />
            </div>
          </div>
        </div>
        <div class="col-sm-6 col-md-4 col-lg-3 mb-0 mb-sm-3">
          <div class="form-group">
            <input
              #showNotification="ngModel"
              ngModel
              type="checkbox"
              id="showNotification"
              name="showNotification"
              [(ngModel)]="modalDetailsOffer.showNotification"
            />
            <label
              for="showNotification"
              class="text-right col-form-label mx-2"
            >
              {{ "showNotification" | translate }}
            </label>
          </div>
        </div>
        <div class="col-sm-6 col-md-4 col-lg-3 mb-0 mb-sm-3">
          <div class="form-group">
            <input
              #showSignatures="ngModel"
              ngModel
              type="checkbox"
              id="showSignatures"
              name="showSignatures"
              [(ngModel)]="modalDetailsOffer.showSignatures"
            />
            <label for="showSignatures" class="text-right col-form-label mx-2">
              {{ "showMarks" | translate }}
            </label>
          </div>
        </div>
        <div class="col-sm-6 col-md-4 col-lg-3 mb-0 mb-sm-3">
          <div class="form-group">
            <input
              #showAccount="ngModel"
              ngModel
              type="checkbox"
              id="showAccount"
              name="showAccount"
              [(ngModel)]="modalDetailsOffer.showAccount"
            />
            <label
              for="showAccount"
              class="text-right col-form-label offerPrice-btn mx-2"
            >
              {{ "showAccount" | translate }}
            </label>
          </div>
        </div>
        <div class="col-sm-6 col-md-4 col-lg-3 mb-0 mb-sm-3">
          <div class="form-group">
            <input
              #PrintEn="ngModel"
              ngModel
              type="checkbox"
              id="PrintEn"
              name="PrintEn"
              [(ngModel)]="modalDetailsOffer.PrintEn"
            />
            <label for="PrintEn" class="text-right col-form-label mx-2">
              {{ "printEn" | translate }}
            </label>
          </div>
        </div>
        <div class="col-sm-7 col-md-5 col-lg-4 mb-0 mb-sm-3">
          <div class="form-group">
            <input
              #PrintEn="ngModel"
              ngModel
              type="checkbox"
              id="NotDisCustPrint"
              name="NotDisCustPrint"
              [(ngModel)]="modalDetailsOffer.NotDisCustPrint"
            />
            <label for="NotDisCustPrint" class="text-right col-form-label mx-2">
              {{ "Not displaying customer data in print" | translate }}
            </label>
          </div>
        </div>
      </div>
    </form>
  </div>

  <div class="modal-footer">
    <button
      type="button"
      class="btn bg-base text-white"
      (click)="addOfferCheck(modal)"
      [disabled]="disableButtonSave_Offer"
    >
      {{ modalDetailsOffer?.id ? ("edit" | translate) : ("add" | translate) }}
    </button>

    <button (click)="modal?.dismiss()" class="btn btn-secondary">
      {{ "Back" | translate }}
    </button>
  </div>
</ng-template>

<!-- generalOrders -->
<ng-template #generalOrders let-modal>
  <div
    style="background-color: var(--base-color)"
    class="modal-header text-white flex justify-between items-center"
  >
    <h4 class="modal-title mb-0" id="modal-basic-title">
      {{ "requestModalTitle" | translate }}
    </h4>
    <button
      type="button"
      class="text-white m-0"
      aria-label="Close"
      (click)="modal.dismiss('Cross click')"
    >
      <i class="fa fa-close"></i>
    </button>
  </div>

  <div class="modal-body">
    <div class="filter mb-3">
      <div class="max-w-xs flex-grow">
        <label class="col-form-label">
          {{ "requestModalFilter" | translate }}</label
        >
        <ng-select
          class="w-full p-0"
          placeholder="{{ 'Chose' | translate }}"
          [(ngModel)]="selectedDuration"
          [ngModelOptions]="{ standalone: true }"
          (change)="DurationChange_Gen()"
        >
          <ng-option
            *ngFor="let duration of durations"
            [value]="duration.id"
            [translate]="'name'"
            [translateParams]="{ ar: duration.name?.ar, en: duration.name?.en }"
          >
          </ng-option>
        </ng-select>
      </div>
    </div>

    <div class="table">
      <table
        class="table table-responsive table-striped table-bordered text-center"
        style="vertical-align: middle; font-size: 14px"
      >
        <thead
          class="bg-base text-white"
          style="line-height: 30px; font-size: 13px"
        >
          <tr>
            <th>{{ "requestModalColumn" | translate }}</th>
            <th>{{ "Customer Name" | translate }}</th>
            <th>{{ "email" | translate }}</th>
            <th>{{ "Mobile Number" | translate }}</th>
            <th>{{ "requestModalColumn2" | translate }}</th>
            <th>{{ "requestModalColumn3" | translate }}</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of generalRequests; let i = index">
            <td>{{ item.date }}</td>
            <td>{{ item.name }}</td>
            <td>{{ item.email }}</td>
            <td>{{ item.mobile }}</td>
            <td>
              <button
                class="p-2 bg-sky-100 hover:bg-sky-500 rounded-lg duration-300 hover:text-white w-10"
                (click)="
                  GetServiceFormPrint(item); open(printServiceForm_GenDivModal)
                "
              >
                <i class="fa-solid fa-print"></i>
              </button>
            </td>
            <td>
              <div class="form-types checkbox">
                <div class="checkbox-content relative">
                  <!-- [checked]="item.status == 2" -->
                  <input
                    type="checkbox"
                    name="check"
                    [ngModel]="item.formStatus"
                    #checkbox="ngModel"
                    (change)="changeRequestStatus('general', item)"
                  />
                  <div
                    class="box {{
                      item.formStatus == false ? 'checked' : 'blur'
                    }}"
                  >
                    <span class="absolute">{{
                      "requestModalData1" | translate
                    }}</span>
                    <span class="absolute">{{
                      "requestModalData2" | translate
                    }}</span>
                    <div class="cycle"></div>
                  </div>
                </div>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <div class="modal-footer">
    <button
      type="button"
      class="btn btn-outline-dark"
      (click)="modal.close('Save click')"
    >
      {{ "Back" | translate }}
    </button>
  </div>
</ng-template>

<!-- designOrders -->
<ng-template #designOrders let-modal>
  <div
    style="background-color: var(--base-color)"
    class="modal-header text-white flex justify-between items-center"
  >
    <h4 class="modal-title mb-0" id="modal-basic-title">
      {{ "requestModalTitle" | translate }}
    </h4>
    <button
      type="button"
      class="text-white m-0"
      aria-label="Close"
      (click)="modal.dismiss('Cross click')"
    >
      <i class="fa fa-close"></i>
    </button>
  </div>

  <div class="modal-body">
    <div class="filter mb-3">
      <div class="max-w-xs flex-grow">
        <label class="col-form-label">
          {{ "requestModalFilter" | translate }}</label
        >
        <ng-select
          class="w-full p-0"
          placeholder="{{ 'Chose' | translate }}"
          [(ngModel)]="selectedDuration2"
          [ngModelOptions]="{ standalone: true }"
          (change)="DurationChange_Des()"
        >
          <ng-option
            *ngFor="let duration of durations"
            [value]="duration.id"
            [translate]="'name'"
            [translateParams]="{ ar: duration.name?.ar, en: duration.name?.en }"
          >
          </ng-option>
        </ng-select>
      </div>
    </div>

    <div class="table">
      <table
        class="table table-responsive table-striped table-bordered text-center"
        style="vertical-align: middle; font-size: 14px"
      >
        <thead
          class="bg-base text-white"
          style="line-height: 30px; font-size: 13px"
        >
          <tr>
            <th>{{ "requestModalColumn" | translate }}</th>
            <th>{{ "Customer Name" | translate }}</th>
            <th>{{ "email" | translate }}</th>
            <th>{{ "Mobile Number" | translate }}</th>
            <th>{{ "requestModalColumn2" | translate }}</th>
            <th>{{ "requestModalColumn3" | translate }}</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of designRequests; let i = index">
            <td>{{ item.date }}</td>
            <td>{{ item.name }}</td>
            <td>{{ item.email }}</td>
            <td>{{ item.mobile }}</td>
            <td>
              <button
                class="p-2 bg-sky-100 hover:bg-sky-500 rounded-lg duration-300 hover:text-white w-10"
                (click)="
                  GetServiceFormPrint(item); open(printServiceForm_DesDivModal)
                "
              >
                <i class="fa-solid fa-print"></i>
              </button>
            </td>
            <td>
              <div class="form-types checkbox">
                <div class="checkbox-content relative">
                  <!-- [checked]="item.status == 2" -->
                  <input
                    type="checkbox"
                    name="check"
                    [ngModel]="item.formStatus"
                    #checkbox="ngModel"
                    (change)="changeRequestStatus('designs', item)"
                  />
                  <div
                    class="box {{
                      item.formStatus == false ? 'checked' : 'blur'
                    }}"
                  >
                    <span class="absolute">{{
                      "requestModalData1" | translate
                    }}</span>
                    <span class="absolute">{{
                      "requestModalData2" | translate
                    }}</span>
                    <div class="cycle"></div>
                  </div>
                </div>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <div class="modal-footer">
    <button
      type="button"
      class="btn btn-outline-dark"
      (click)="modal.close('Save click')"
    >
      {{ "Back" | translate }}
    </button>
  </div>
</ng-template>

<!-- deleteModal -->
<ng-template #deleteModal let-modal>
  <div class="modal-body text-center">
    <p
      [translate]="'name'"
      [translateParams]="{
        ar: 'هل تريد بالتأكيد حذف هذا الصف',
        en: 'Are you sure to delete this row ?'
      }"
    ></p>
    <div class="flex gap-2 justify-center">
      <button
        type="button"
        mat-raised-button
        color="warn"
        (click)="DeleteOffer(); modal.dismiss()"
      >
        {{ "Yes" | translate }}
      </button>
      <button
        type="button"
        (click)="modal.dismiss()"
        mat-raised-button
        color="basic"
      >
        {{ "No" | translate }}
      </button>
    </div>
  </div>
</ng-template>

<!-- sendEmail -->
<ng-template #sendEmail let-modal>
  <div
    style="background-color: var(--base-color)"
    class="modal-header text-white flex justify-between items-center"
  >
    <h4 class="m-0">
      <span class="text-2xl">{{ "sendofferprice" | translate }}</span>
    </h4>
    <button
      type="button"
      class="text-2xl text-white m-0"
      (click)="modal.dismiss()"
    >
      <i class="fa-solid fa-xmark"></i>
    </button>
  </div>
  <div class="modal-body">
    <ng-container>
      <form
        class="grid gap-3 grid-cols-1 md:grid-cols-2 offerPrice-form"
        #emailForm="ngForm"
      >
        <div class="form-group">
          <label for="from" class="text-right col-form-label block">
            {{ "From" | translate }}
          </label>
          <input
            required
            #from="ngModel"
            [(ngModel)]="EmailModals.orgEmail"
            ngModel
            class="form-control"
            type="text"
            id="from"
            name="from"
            readonly
          />
        </div>

        <div class="form-group">
          <label for="to234" class="text-right col-form-label block">
            {{ "To" | translate }}
          </label>
          <input
            required
            #to234="ngModel"
            [(ngModel)]="EmailModals.customerEmail"
            ngModel
            class="form-control"
            type="text"
            id="to234"
            name="to234"
            readonly
          />
        </div>
        <div class="form-group col-span-1 md:col-span-2">
          <label for="Subject" class="text-right col-form-label block">
            {{ "subject" | translate }}
          </label>
          <input
            required
            #Subject="ngModel"
            ngModel
            class="form-control"
            type="text"
            id="Subject"
            name="Subject"
            [(ngModel)]="EmailModals.MailSubject"
            autocomplete="off"
          />
        </div>

        <div class="form-group col-span-1 md:col-span-2">
          <label for="Text32" class="text-right col-form-label block">
            {{ "Text" | translate }}
          </label>
          <textarea
            required
            #Text32="ngModel"
            ngModel
            class="form-control"
            type="text"
            id="Text32"
            name="Text32"
            [(ngModel)]="EmailModals.MailText"
            autocomplete="off"
          ></textarea>
        </div>

        <div class="upload col-span-1 md:col-span-2">
          <label for="">{{ "Add Attachments" | translate }}</label>

          <file-upload [(ngModel)]="uploadedFiles" name="files"></file-upload>
        </div>

        <div
          class="flex gap-2 pt-3 border-t border-neutral-300 col-span-1 md:col-span-2 mt-2"
        >
          <button
            class="btn bg-base text-white"
            type="submit"
            (click)="sendEMAIL(emailForm.value, modal)"
          >
            {{ "Send" | translate }}
          </button>
          <button (click)="modal?.dismiss()" class="btn btn-secondary">
            {{ "Back" | translate }}
          </button>
        </div>
      </form>
    </ng-container>
  </div>
</ng-template>

<!-- serviceDetails -->
<ng-template #serviceDetailsModal let-modal>
  <div
    style="background-color: var(--base-color)"
    class="modal-header text-white flex justify-between items-center"
  >
    <h4 class="m-0">
      <span class="text-2xl">{{ "servicesList" | translate }}</span>
    </h4>
    <button
      type="button"
      class="text-2xl text-white m-0"
      (click)="modal.dismiss()"
    >
      <i class="fa-solid fa-xmark"></i>
    </button>
  </div>
  <div class="modal-body">
    <div
      cdkDropList
      [cdkDropListData]="serviceDetails"
      class="example-list"
      (cdkDropListDropped)="drop($event)"
    >
      <div *ngFor="let item of serviceDetails" class="example-box" cdkDrag>
        <div class="col-md-11" style="font-size: 20px">
          <i
            *ngIf="(item?.sureService ?? 0) != 1 && (OfferPopupAddorEdit == 0 || OfferPopupAddorEdit == 2)"
            class="fa fa-xmark text-danger"
          ></i>
          <i
            *ngIf="(item?.sureService ?? 0) == 1 && (OfferPopupAddorEdit == 0 || OfferPopupAddorEdit == 2)"
            class="fa fa-check text-success"
          ></i>
          <i
            *ngIf="OfferPopupAddorEdit == 1"
            class="fa fa-check text-success"
          ></i>
          <span class="text-base mx-2">{{ item?.name }}</span>
        </div>
        <div class="serviceBtns" *ngIf="(OfferPopupAddorEdit == 0 || OfferPopupAddorEdit == 2)">
          <button
            *ngIf="(item?.sureService ?? 0) != 1"
            (click)="MarkServiceDetails(item)"
            type="button"
            class="btn btn-outline-success"
          >
            {{ "Insert" | translate }}
          </button>
          <button
            *ngIf="(item?.sureService ?? 0) == 1"
            (click)="UnMarkServiceDetails(item)"
            type="button"
            class="btn btn-outline-danger"
          >
            {{ "delete" | translate }}
          </button>
        </div>
      </div>
    </div>
    <div
      class="flex gap-2 pt-3 border-t border-neutral-300 col-span-1 md:col-span-2 mt-2"
    >
      <button (click)="modal?.dismiss()" class="btn btn-secondary">
        {{ "close" | translate }}
      </button>
    </div>
  </div>
</ng-template>

<!-- servicesListModal_Offer -->
<ng-template #servicesListModal_Offer let-modal>
  <div
    style="background-color: var(--base-color)"
    class="modal-header text-white flex justify-between items-center"
  >
    <h4 class="m-0">
      <span class="text-2xl">{{ "servicesList" | translate }}</span>
    </h4>
    <button
      type="button"
      class="text-2xl text-white m-0"
      (click)="modal.dismiss()"
    >
      <i class="fa-solid fa-xmark"></i>
    </button>
  </div>
  <div class="modal-body" style="overflow-y: scroll; max-height: 600px">
    <mat-form-field class="w-full">
      <mat-label>{{ "search" | translate }}</mat-label>
      <input matInput (keyup)="applyFilterServiceList_Offer($event)" #input />
    </mat-form-field>

    <div class="table">
      <table
        mat-table
        [dataSource]="serviceListDataSource_Offer"
        class="mat-elevation-z8 table table-responsive table-striped table-bordered text-center"
        style="vertical-align: middle; font-size: 14px"
      >
        <!-- Name Column -->
        <ng-container matColumnDef="name">
          <th mat-header-cell *matHeaderCellDef>
            {{ "ServiceName" | translate }}
          </th>
          <td mat-cell *matCellDef="let element">{{ element.servicesName }}</td>
        </ng-container>

        <!-- price Column -->
        <ng-container matColumnDef="price">
          <th mat-header-cell *matHeaderCellDef>{{ "price" | translate }}</th>
          <td mat-cell *matCellDef="let element">{{ element.amount }}</td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="servicesListdisplayedColumns"></tr>
        <tr
          mat-row
          *matRowDef="
            let row;
            let i = index;
            columns: servicesListdisplayedColumns
          "
          (dblclick)="setServiceRowValue_Offer(row); modal.dismiss()"
        ></tr>

        <!-- Row shown when there is no matching data. -->
        <tr class="mat-row" *matNoDataRow>
          <td class="mat-cell" colspan="4">
            {{ "noResult" | translate }} "{{ input.value }}"
          </td>
        </tr>
      </table>
    </div>

    <div class="text-end mt-2">
      <button (click)="modal?.dismiss()" class="btn btn-secondary">
        {{ "Back" | translate }}
      </button>
    </div>
  </div>
</ng-template>

<!-- LandArea -->
<ng-template #LandArea let-modal>
  <div
    style="background-color: var(--base-color)"
    class="modal-header text-white flex justify-between items-center"
  >
    <h4 class="m-0">
      <span class="text-2xl">{{
        "مساحة الأرض والأدوار المطلوبة" | translate
      }}</span>
    </h4>
    <button
      type="button"
      class="text-2xl text-white m-0"
      (click)="modal.dismiss()"
    >
      <i class="fa-solid fa-xmark"></i>
    </button>
  </div>
  <div class="modal-body">
    <ng-container>
      <form
        class="grid gap-3 grid-cols-1 md:grid-cols-2"
        #LandAreaForm="ngForm"
      >
        <div class="form-group">
          <label for="from" class="text-right col-form-label block">
            {{ "مساحة الأرض" | translate }}
          </label>
          <input
            required
            #from="ngModel"
            [(ngModel)]="LandAreaData.GroundSpace"
            [ngModelOptions]="{ standalone: true }"
            class="form-control"
            type="number"
            (keyup)="SelectFloorFuncCalc()"
          />
        </div>
        <div class="form-group">
          <label for="from" class="text-right col-form-label block">
            {{ "إجمالي المسطحات المسموحة" | translate }}
          </label>
          <input
            #from="ngModel"
            [(ngModel)]="LandAreaData.TotalSpaces"
            [ngModelOptions]="{ standalone: true }"
            class="form-control"
            type="number"
            readonly
            disabled="disabled"
          />
        </div>

        <div class="form-group" *ngFor="let item of LandAreaData.FloorList">
          <input
            #exist="ngModel"
            [ngModelOptions]="{ standalone: true }"
            type="checkbox"
            [(ngModel)]="item.Checked"
            id="floor{{ item.floorId }}"
            (change)="SelectFloorFuncCalc()"
          />
          <label
            for="floor{{ item.floorId }}"
            class="text-right col-form-label mx-2"
          >
            {{ item.floorName }}
          </label>
        </div>

        <div
          class="flex gap-2 pt-3 border-t border-neutral-300 col-span-1 md:col-span-2 mt-2"
        >
          <button
            class="btn bg-base text-white"
            type="submit"
            (click)="TempSave(modal)"
          >
            {{ "save" | translate }}
          </button>
          <button (click)="modal?.dismiss()" class="btn btn-secondary">
            {{ "Back" | translate }}
          </button>
        </div>
      </form>
    </ng-container>
  </div>
</ng-template>

<ng-template #printOfferDivModal let-modal>
  <div class="modal-body">
    <div id="report" [ngStyle]="{ direction: lang == 'ar' ? 'rtl' : 'ltr' }">
      <!--Header-->
      <div
        class="report-header"
        style="display: flex; align-items: center; gap: 100px; padding: 3px 0px"
      >
        <div class="headerNe-right-side">
          <img
            *ngIf="OfferCustomData.OrgImg"
            src="{{ OfferCustomData.OrgImg }}"
            alt="logo"
            style="
              height: 155px;
              width: 192px;
              max-width: 200px;
              object-fit: fill;
            "
          />
        </div>

        <div class="headerNe-lefy-side" style="width: 100%">
          <h1
            style="
              letter-spacing: 0.25px;
              font-size: 19px;
              margin: 0;
              margin-bottom: 0px;
            "
          >
            {{ OfferPrintData?.org_VD?.nameAr }}
          </h1>
          <h1
            style="
              letter-spacing: 0.25px;
              font-size: 19px;
              margin: 0;
              margin-bottom: 0px;
            "
          >
            {{ OfferPrintData?.org_VD?.nameEn }}
          </h1>
          <div class="line" style="position: relative; padding: 5px 0px 10px">
            <span
              style="
                position: absolute;
                right: 0;
                width: 100%;
                height: 2px;
                background-color: #e5e5e5;
                z-index: 1;
              "
            ></span>
            <span
              style="
                position: absolute;
                right: 0;
                width: 70%;
                height: 2px;
                background-color: #ec1c24;
                z-index: 2;
              "
            ></span>
          </div>
          <h1
            style="
              letter-spacing: 0.25px;
              font-size: 15px;
              margin: 0;
              margin-bottom: 4px;
            "
          >
            {{ OfferPrintData?.org_VD?.mobile }} -
            {{ OfferPrintData?.org_VD?.email }}
          </h1>
          <h1
            style="
              margin-bottom: 0;
              font-size: 25px;
              color: #0c8191;
              margin-bottom: 0;
              margin-top: 2px;
              font-weight: 500;
              margin-right: 15%;
            "
          >
            {{ lang == "ar" ? "عرض سعر" : "offer price" }}
          </h1>
        </div>
      </div>
      <!--/Header-->

      <div style="margin-bottom: 10px">
        <p>
          <span>{{ lang == "ar" ? "التاريخ" : "Date" }}</span>
          <!-- <span> {{ OfferPrintData?.dateTimeNow }} </span> -->
          <span> {{ OfferPrintData?.offers?.offerDate }} </span>
        </p>
        <p style="font-size: 15px">
          <span
            >{{
              GetNikeNameOfferPrice(lang, OfferPrintData?.offers?.nickName)
            }}
            : {{ GetCustomerName(lang, this.OfferPrintData?.customer) }}
            {{
              GetDescriptionOfferPrice(
                lang,
                OfferPrintData?.offers?.description
              )
            }}</span
          >
        </p>
      </div>

      <div style="text-align: center">
        <p *ngIf="lang == 'ar'" style="font-size: 18px; margin-bottom: 5px">
          {{
            lang == "ar"
              ? "  السلام عليكم ورحمة الله وبركاتة"
              : " Peace, mercy and blessings of God  "
          }}
        </p>
        <p *ngIf="lang == 'ar'" style="font-size: 12px; margin-bottom: 10px">
          {{ OfferPrintData?.offers?.introduction }}
        </p>

        <p *ngIf="lang != 'ar'">After Greetings..</p>
        <p *ngIf="lang != 'ar'">
          We are honored to present the price offer, hoping that it will obtain
          your satisfaction and approval, and in case of any inquiries about the
          offer, do not hesitate to contact us
        </p>
      </div>

      <div
        class="info"
        style="overflow: auto; margin-bottom: 15px"
        *ngIf="OfferPrintData?.offers?.notDisCustPrint == false"
      >
        <table
          class="table m-0"
          style="
            width: 100%;
            color: black;
            text-align: center;
            vertical-align: middle;
            line-height: 25px;
            min-width: max-content;
          "
        >
          <tr>
            <td style="background-color: #0f9c9b; font-size: 14px">
              {{ lang == "ar" ? "رقم العرض" : "offer number" }}
            </td>
            <td style="background-color: #0f9c9b; font-size: 14px">
              {{ lang == "ar" ? "جوال العميل" : "Customer phone" }}
            </td>
            <td style="background-color: #0f9c9b; font-size: 14px">
              {{ lang == "ar" ? "البريد الالكتروني" : "E-mail" }}
            </td>
            <td style="background-color: #0f9c9b; font-size: 14px">
              {{ lang == "ar" ? "مهندس المبيعات" : "Sales engineer" }}
            </td>
          </tr>

          <tr>
            <td
              style="background-color: #d1d1d1; color: black; font-size: 14px"
            >
              {{ OfferPrintData?.offers?.offerNo }}
            </td>
            <td
              style="background-color: #d1d1d1; color: black; font-size: 14px"
            >
              {{ OfferCustomData.CustomerMobile }}
            </td>
            <td
              style="background-color: #d1d1d1; color: black; font-size: 14px"
            >
              {{ OfferCustomData.CustomerEmail }}
            </td>
            <td
              style="background-color: #d1d1d1; color: black; font-size: 14px"
            >
              {{ GetpresenterName(lang, OfferPrintData?.offers) }}
            </td>
          </tr>
        </table>
      </div>

      <div
        class="services"
        style="width: 100%; overflow: auto; margin-bottom: 10px"
      >
        <div class="content" style="min-width: max-content">
          <table
            style="
              text-align: center;
              vertical-align: middle;
              width: 100%;
              min-width: max-content;
            "
          >
            <thead>
              <tr>
                <td
                  style="
                    font-size: 14px;
                    background-color: #0f9c9b;
                    padding: 3px;
                    text-align: center;
                    color: #000;
                    word-wrap: break-word;
                  "
                >
                  {{ lang == "ar" ? "م" : "No." }}
                </td>
                <td
                  style="
                    font-size: 14px;
                    background-color: #0f9c9b;
                    padding: 3px;
                    text-align: center;
                    color: #000;
                    word-wrap: break-word;
                  "
                >
                  {{ lang == "ar" ? "اسم الخدمة" : "Service Name" }}
                </td>
                <td
                  style="
                    font-size: 14px;
                    background-color: #0f9c9b;
                    padding: 3px;
                    text-align: center;
                    color: #000;
                    word-wrap: break-word;
                  "
                >
                  {{ lang == "ar" ? "  الكميه" : "  Amount" }}
                </td>
                <td
                  style="
                    font-size: 14px;
                    background-color: #0f9c9b;
                    padding: 3px;
                    text-align: center;
                    color: #000;
                    word-wrap: break-word;
                  "
                >
                  {{ lang == "ar" ? "سعر  الوحدة" : " Unit Price" }}
                </td>
                <td
                  style="
                    font-size: 14px;
                    background-color: #0f9c9b;
                    padding: 3px;
                    text-align: center;
                    color: #000;
                    word-wrap: break-word;
                  "
                >
                  {{ lang == "ar" ? "الضريبة  " : " Tax" }}
                </td>
                <td
                  style="
                    font-size: 14px;
                    background-color: #0f9c9b;
                    padding: 5px;
                    text-align: center;
                    color: #000;
                    word-wrap: break-word;
                  "
                >
                  {{ lang == "ar" ? "الإجمالي " : " Total" }}
                </td>
              </tr>
            </thead>
            <tbody>
              <tr
                *ngFor="let item of OfferPrintData?.offerservce; let i = index"
              >
                <td
                  style="
                    background-color: #fff;
                    font-size: 14px;
                    padding: 3px;
                    color: #000;
                    border-inline-start: 2px dashed #0c8191;
                    border-bottom: 2px dashed #0c8191;
                  "
                >
                  {{ i + 1 }}
                </td>
                <td
                  style="
                    background-color: #fff;
                    font-size: 14px;
                    padding: 3px;
                    color: #000;
                    border-inline-start: 2px dashed #0c8191;
                    border-bottom: 2px dashed #0c8191;
                    width: 390px;
                  "
                >
                  <span style="font-weight: 700">{{
                    GetServiceName(lang, item)
                  }}</span>
                  <ul
                    *ngFor="let det of item?.servicesPricesOffer; let i = index"
                    style="
                      list-style: none;
                      padding: 0px;
                      margin-inline-start: 10px;
                      text-align: right;
                      margin-top: 3px;
                      line-height: 16px;
                      font-size: 13px;
                    "
                  >
                    <hr style="margin: 6px" />
                    <li>
                      <span style="font-size: 16px; font-weight: 800">-</span>
                      {{ GetServiceDetName(lang, det) }}
                    </li>
                  </ul>
                </td>
                <td
                  style="
                    background-color: #fff;
                    font-size: 14px;
                    padding: 3px;
                    color: #000;
                    border-inline-start: 2px dashed #0c8191;
                    border-bottom: 2px dashed #0c8191;
                  "
                >
                  {{ item.serviceQty }}
                </td>
                <td
                  style="
                    background-color: #fff;
                    font-size: 14px;
                    padding: 3px;
                    color: #000;
                    border-inline-start: 2px dashed #0c8191;
                    border-bottom: 2px dashed #0c8191;
                  "
                >
                  {{ Getserviceamountval(item.serviceamountval) }}
                  {{ lang == "ar" ? "ر.س" : "SAR" }}
                </td>
                <td
                  style="
                    background-color: #fff;
                    font-size: 14px;
                    padding: 3px;
                    color: #000;
                    border-inline-start: 2px dashed #0c8191;
                    border-bottom: 2px dashed #0c8191;
                  "
                >
                  {{ GetTaxValue(item, OfferPrintData?.taxAmount) }}
                  {{ lang == "ar" ? "ر.س" : "SAR" }}
                </td>
                <td
                  style="
                    background-color: #fff;
                    font-size: 14px;
                    padding: 3px;
                    color: #000;
                    border-inline-start: 2px dashed #0c8191;
                    border-bottom: 2px dashed #0c8191;
                    border-inline-end: 2px dashed #0c8191;
                  "
                >
                  {{ GetTotalValue(item, OfferPrintData?.taxAmount) }}
                  {{ lang == "ar" ? "ر.س" : "SAR" }}
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <div
        class="totalPrice"
        style="text-align: end; color: black; margin-bottom: 10px"
      >
        <span style="font-size: 17px">{{
          lang == "ar" ? "المجموع" : "Total"
        }}</span>
        <span
          style="
            font-size: 17px;
            background-color: #0f9c9b;
            color: #fff;
            display: inline-block;
            padding: 16px;
            border-radius: 2px;
            margin-inline-start: 10px;
          "
        >
          {{ GetofferValue(OfferPrintData?.offers?.offerValue) }}
          {{ lang == "ar" ? "ر.س" : "SAR" }}</span
        >
      </div>

      <div class="txtval" style="text-align: end; color: black">
        <div style="font-size: 13px">
          {{ OfferCustomData.ValuetxtConvert }}
        </div>
      </div>

      <div
        style="margin-bottom: 4px; margin-top: 2px"
        class="payments"
        *ngIf="OfferPrintData?.payment?.length > 0"
      >
        <h2 style="font-weight: bold; margin-bottom: 2px">
          {{ lang == "ar" ? "الدفعات" : "Payments" }}
        </h2>
        <ul
          *ngFor="let item of OfferPrintData?.payment; let i = index"
          type="1"
          style="padding: 0; margin-inline-start: 30px; line-height: 1.2em"
        >
          <li>
            {{ i + 1 }} .
            {{ lang == "ar" ? item.amountValueText : item.amountValueText_EN }}
            - {{ item.amount }}
          </li>
          <hr style="max-width: 50%" />
        </ul>
      </div>

      <div
        style="margin-bottom: 10px"
        class="terms1"
        *ngIf="OfferPrintData?.offercondition?.length > 0"
      >
        <h2 style="font-weight: bold; margin-bottom: 2px">
          {{ lang == "ar" ? "الشروط" : "Terms" }}
        </h2>
        <ul
          *ngFor="let item of OfferPrintData?.offercondition; let i = index"
          type="1"
          style="padding: 0; margin-inline-start: 30px; line-height: 1.2em"
        >
          <li>
            {{ i + 1 }} .
            {{
              lang == "ar" ? item.offerConditiontxt : item.offerConditiontxt_EN
            }}
          </li>
          <hr style="max-width: 50%" />
        </ul>
      </div>
      <!-- </div> -->

      <div
        *ngIf="OfferPrintData?.offers?.isContainSign != true"
        class="signture"
        style="
          display: flex;
          justify-content: space-between;
          font-size: 13px;
          font-weight: 600;
          padding-top: 15px;
        "
      >
        <p style="text-align: center; line-height: 1em">
          {{
            lang == "ar"
              ? "توقيع الاداره الهندسيه"
              : "  engineering department Signature"
          }}
        </p>
        <p style="text-align: center; line-height: 1em">
          {{ lang == "ar" ? "توقيع العميل" : "Client signature" }}
        </p>
        <p style="text-align: center; line-height: 1em">
          {{
            lang == "ar"
              ? "توقيع الاداره الماليه"
              : " financial department Signature"
          }}
        </p>
      </div>

      <div class="accounts">
        <div style="text-align: start !important">
          <div
            class="grid-container"
            style="
              margin-top: 50px;
              display: flex;
              align-items: center;
              gap: 80px;
            "
          >
            <div
              class="grid-item"
              style="align-self: center; text-align: right"
            >
              <img
                *ngIf="OfferCustomData.Account1Img"
                src="{{ OfferCustomData.Account1Img }}"
                style="width: 110px; height: 65px"
              />
            </div>
            <div
              class="grid-item"
              style="align-self: center; text-align: center"
            >
              <p>{{ OfferCustomData.Account1Bank }}</p>
            </div>
          </div>

          <div
            class="grid-container"
            style="
              padding-top: 12px;
              display: flex;
              align-items: center;
              gap: 80px;
            "
          >
            <div
              class="grid-item"
              style="align-self: center; text-align: right"
            >
              <img
                *ngIf="OfferCustomData.Account2Img"
                src="{{ OfferCustomData.Account2Img }}"
                style="width: 110px; height: 65px"
              />
            </div>
            <div
              class="grid-item"
              style="align-self: center; text-align: center"
            >
              <p>{{ OfferCustomData.Account2Bank }}</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="modal-footer">
    <button
      (click)="printDiv('report')"
      class="min-w-max p-2 bg-sky-100 hover:bg-sky-500 rounded-lg duration-300 hover:text-white aspect-square w-10"
    >
      <i class="fa fa-print"></i>
    </button>
    <button
      type="button"
      (click)="modal.dismiss()"
      mat-raised-button
      color="basic"
    >
      {{ "No" | translate }}
    </button>
  </div>
</ng-template>

<!-- addProjectModal  -->
<ng-template #addProjectModal let-modal>
  <div
    style="background-color: var(--base-color)"
    class="modal-header text-white flex justify-between items-center"
  >
    <h4 class="m-0">
      <span class="text-2xl">{{ "new project" | translate }}</span>
    </h4>
    <button
      type="button"
      class="text-2xl text-white m-0"
      (click)="modal.dismiss()"
    >
      <i class="fa-solid fa-xmark"></i>
    </button>
  </div>
  <div class="modal-body">
    <form #form="ngForm">
      <div class="row">
        <div class="col-sm-6 col-xl-2 mb-3">
          <div class="form-group">
            <label for="projectNo" class="text-right col-form-label block">
              {{ "project number" | translate }}
            </label>
            <input
              type="text"
              class="form-control"
              id="projectNo"
              autocomplete="off"
              (keyup)="ProjectNoTxtChenged()"
              #projectNo="ngModel"
              required
              class="form-control{{
                projectNo.invalid && projectNo.touched ? 'errorInput' : ''
              }}"
              name="projectNo"
              placeholder=" {{ 'project number' | translate }}"
              [(ngModel)]="modalDetailsProject.projectNo"
            />
          </div>
        </div>
        <div class="col-sm-6 col-xl-2 mb-3">
          <div class="form-group">
            <label
              for="projectDuration"
              class="text-right col-form-label block"
            >
              {{ "Project duration" | translate }}
            </label>
            <div class="form-group timeInput">
              <input
                [(ngModel)]="modalDetailsProject.projectDuration"
                name="projectDuration"
                type="text"
                class="form-control duration-input"
                disabled
              />
            </div>
          </div>
        </div>
        <div class="col-sm-6 col-xl-3 mb-3">
          <div class="form-group">
            <label class="text-right col-form-label block">
              {{ "Branch" | translate }}</label
            >
            <ng-select
              disabled
              id="branch"
              #branch="ngModel"
              required
              class="w-full p-0 h-100 {{
                branch.invalid && branch.touched ? 'errorInput' : ''
              }}"
              name="branch"
              placeholder=" {{ 'Chose' | translate }}"
              [(ngModel)]="modalDetailsProject.branch"
              [ngModelOptions]="{ standalone: true }"
              [readonly]="modalDetailsProject.id"
              (change)="branchChange()"
            >
              <ng-option *ngFor="let user of Branches" [value]="user.id">{{
                user.name
              }}</ng-option>
            </ng-select>
          </div>
        </div>
        <div class="col-sm-6 col-xl-3 mb-3">
          <div class="form-group">
            <label class="text-right col-form-label block">
              {{ "costCenter" | translate }}</label
            >
            <ng-select
              id="center"
              #center="ngModel"
              required
              class="w-full p-0 h-100 {{
                center.invalid && center.touched ? 'errorInput' : ''
              }}"
              name="center"
              placeholder=" {{ 'Chose' | translate }}"
              [(ngModel)]="modalDetailsProject.center"
              [ngModelOptions]="{ standalone: true }"
            >
              <ng-option *ngFor="let user of CostCenters" [value]="user.id">{{
                user.name
              }}</ng-option>
            </ng-select>
          </div>
        </div>

        <div class="col-sm-6 col-xl-2 mb-3">
          <div
            *ngIf="modalDetailsProject.user"
            class="manager-image w-full w-max"
          >
            <img
              src="/assets/images/login-img.png"
              alt="manager image"
              class="img-fluid"
              width="100px"
              height="100px"
              style="border-radius: 50%"
            />
          </div>
        </div>

        <div class="col-sm-6 col-lg-4 col-xl-3 mb-3">
          <div class="form-group">
            <label class="text-right col-form-label block">
              {{ "ProjectStartDate" | translate }}
            </label>
            <div class="form-group timeInput">
              <input
                type="text"
                class="form-control"
                id="from"
                bsDatepicker
                autocomplete="off"
                (ngModelChange)="CheckStartDate($event)"
                #from="ngModel"
                required
                class="form-control {{
                  from.invalid && from.touched ? 'errorInput' : ''
                }}"
                name="from"
                placeholder=" {{ 'Date' | translate }}"
                [(ngModel)]="modalDetailsProject.from"
              />
            </div>
          </div>
        </div>
        <div class="col-sm-6 col-lg-4 col-xl-3 mb-3">
          <div class="form-group">
            <label class="text-right col-form-label block">
              {{ "ProjectEndDate" | translate }}
            </label>
            <div class="form-group timeInput">
              <input
                type="text"
                class="form-control"
                id="to"
                bsDatepicker
                autocomplete="off"
                (ngModelChange)="CheckEndDate($event)"
                #to="ngModel"
                required
                class="form-control {{
                  to.invalid && to.touched ? 'errorInput' : ''
                }}"
                name="to"
                placeholder=" {{ 'Date' | translate }}"
                [(ngModel)]="modalDetailsProject.to"
              />
            </div>
          </div>
        </div>
        <div class="col-sm-6 col-lg-4 col-xl-3 mb-3">
          <div class="form-group">
            <label class="text-right col-form-label block">
              {{ "Project Type" | translate }}</label
            >
            <div class="flex">
              <ng-select
                id="projectType"
                #projectType="ngModel"
                style="min-width: max-content !important"
                required
                class="w-full p-0 h-100 {{
                  projectType.invalid && projectType.touched ? 'errorInput' : ''
                }}"
                name="projectType"
                placeholder=" {{ 'Chose' | translate }}"
                [(ngModel)]="modalDetailsProject.projectType"
                [ngModelOptions]="{ standalone: true }"
                (change)="TypeProjectChange()"
              >
                <ng-option
                  *ngFor="let user of ProjectTypes"
                  [value]="user.id"
                  >{{ user.name }}</ng-option
                >
              </ng-select>
              <button
                type="button"
                class="btn bg-base text-white"
                style="padding: 5px 10px"
                (click)="resetGoalsProjectType(); open(projectTypeModal)"
              >
                <i class="fa fa-plus"></i>
              </button>
            </div>
          </div>
        </div>
        <div class="col-sm-6 col-lg-4 col-xl-3 mb-3">
          <div class="form-group">
            <label class="text-right col-form-label block">
              {{ "Subproject type" | translate }}</label
            >
            <div class="flex">
              <ng-select
                id="subProjectDetails"
                style="min-width: max-content !important"
                #subProjectDetails="ngModel"
                required
                class="w-full p-0 h-100 {{
                  subProjectDetails.invalid && subProjectDetails.touched
                    ? 'errorInput'
                    : ''
                }}"
                name="subProjectDetails"
                placeholder=" {{ 'Chose' | translate }}"
                [(ngModel)]="modalDetailsProject.subProjectDetails"
                [ngModelOptions]="{ standalone: true }"
                (change)="subTypeProjectChange(projectRequirementsModal)"
              >
                <ng-option
                  *ngFor="let user of ProjectSubTypes"
                  [value]="user.id"
                  >{{ user.name }}</ng-option
                >
              </ng-select>
              <button
                type="button"
                class="btn bg-base text-white"
                style="padding: 5px 10px"
                (click)="open(subprojectTypeModal)"
              >
                <i class="fa fa-plus"></i>
              </button>
            </div>
          </div>
        </div>
        <div class="col-sm-6 col-lg-4 col-xl-3 mb-3">
          <div class="form-types checkbox h-full flex-column">
            <div
              class="checkbox-contentCustom relative {{ 'dir' | translate }}"
            >
              <!-- [checked]="item.status == 2" -->
              <input
                type="checkbox"
                name="check"
                [ngModel]="modalDetailsProject.ProjectFlag"
                #checkbox="ngModel"
                (change)="changeRequestStatusProject($event)"
              />
              <div
                class="box {{
                  modalDetailsProject.ProjectFlag ? 'checked' : 'blur'
                }}"
              >
                <span class="absolute">{{
                  "without walking" | translate
                }}</span>
                <span class="absolute">{{ "a walk" | translate }}</span>
                <div class="cycle"></div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-sm-6 col-lg-4 col-xl-3 mb-3">
          <div class="form-group">
            <label class="text-right col-form-label block">
              {{ "Customer" | translate }}</label
            >
            <ng-select
              disabled
              id="customer"
              #customer="ngModel"
              required
              class="w-full p-0 h-100 {{
                customer.invalid && customer.touched ? 'errorInput' : ''
              }}"
              name="customer"
              placeholder=" {{ 'Chose' | translate }}"
              [(ngModel)]="modalDetailsProject.customer"
              [ngModelOptions]="{ standalone: true }"
              (change)="customerChange()"
            >
              <ng-option *ngFor="let user of Customers" [value]="user.id">{{
                user.name
              }}</ng-option>
            </ng-select>
          </div>
        </div>
        <div class="col-sm-6 col-lg-4 col-xl-3 mb-3">
          <div class="form-group">
            <label class="text-right col-form-label block">
              {{ "buildingType" | translate }}</label
            >
            <div class="flex">
              <ng-select
                id="buildingType"
                style="min-width: max-content !important"
                #buildingType="ngModel"
                required
                class="w-full p-0 h-100 {{
                  buildingType.invalid && buildingType.touched
                    ? 'errorInput'
                    : ''
                }}"
                name="buildingType"
                placeholder=" {{ 'Chose' | translate }}"
                [(ngModel)]="modalDetailsProject.buildingType"
                [ngModelOptions]="{ standalone: true }"
              >
                <ng-option *ngFor="let user of BuildTypes" [value]="user.id">{{
                  user.name
                }}</ng-option>
              </ng-select>
              <button
                type="button"
                class="btn bg-base text-white"
                style="padding: 5px 10px"
                (click)="open(BuildTypeModal)"
              >
                <i class="fa fa-plus"></i>
              </button>
            </div>
          </div>
        </div>
        <div
          class="col-sm-6 col-lg-4 col-xl-3 mb-3"
          *ngIf="modalDetailsProject.projectId == 0"
        >
          <div class="form-group">
            <label class="text-right col-form-label block">
              {{ "servicesProject" | translate }}</label
            >
            <ng-select
              class="w-full p-0"
              placeholder="{{ 'Chose' | translate }}"
              [(ngModel)]="modalDetailsProject.service"
              [ngModelOptions]="{ standalone: true }"
              (change)="ChangeService()"
            >
              <ng-option *ngFor="let user of serviceList" [value]="user.id">{{
                user.name
              }}</ng-option>
            </ng-select>
          </div>
        </div>
        <!--
        <div
          *ngIf="modalDetailsProject.walk"
          class="col-sm-6 d-none d-sm-flex col-md-3"
        ></div> -->
        <div *ngIf="modalDetailsProject.ProjectFlag" class="col-sm-6 col-md-5">
          <div class="form-group">
            <label
              for="ProjectSettingNo"
              class="text-right col-form-label block"
            >
              {{ "Bios number" | translate }}
            </label>
            <input
              required
              #ProjectSettingNo="ngModel"
              [(ngModel)]="modalDetailsProject.ProjectSettingNo"
              ngModel
              class="form-control"
              type="text"
              id="ProjectSettingNo"
              name="ProjectSettingNo"
              disabled
            />
          </div>
        </div>
        <div *ngIf="modalDetailsProject.ProjectFlag" class="col-sm-6 col-md-7">
          <div class="form-group">
            <label
              for="ProjectSettingNote"
              class="text-right col-form-label block"
            >
              {{ "Bios description" | translate }}
            </label>
            <input
              required
              #ProjectSettingNote="ngModel"
              [(ngModel)]="modalDetailsProject.ProjectSettingNote"
              ngModel
              class="form-control"
              type="text"
              id="ProjectSettingNote"
              name="ProjectSettingNote"
              disabled
            />
          </div>
        </div>

        <div class="col-sm-6 col-lg-4 col-xl-3 mb-3">
          <div class="form-group">
            <label class="text-right col-form-label block">
              {{ "project manager" | translate }}</label
            >
            <ng-select
              id="user"
              #user="ngModel"
              required
              class="w-full p-0 h-100 {{
                user.invalid && user.touched ? 'errorInput' : ''
              }}"
              name="user"
              placeholder=" {{ 'Chose' | translate }}"
              [(ngModel)]="modalDetailsProject.user"
              [ngModelOptions]="{ standalone: true }"
            >
              <ng-option *ngFor="let user of Managers" [value]="user.id">{{
                user.name
              }}</ng-option>
            </ng-select>
          </div>
        </div>
        <div class="col-sm-6 col-lg-4 col-xl-3 mb-3">
          <div class="form-group">
            <label class="text-right col-form-label block">
              {{ "Region" | translate }}</label
            >
            <div class="flex">
              <ng-select
                id="region"
                #region="ngModel"
                style="min-width: max-content !important"
                required
                class="w-full p-0 h-100 {{
                  region.invalid && region.touched ? 'errorInput' : ''
                }}"
                name="region"
                placeholder=" {{ 'Chose' | translate }}"
                [(ngModel)]="modalDetailsProject.region"
                [ngModelOptions]="{ standalone: true }"
              >
                <ng-option *ngFor="let user of City" [value]="user.id">{{
                  user.name
                }}</ng-option>
              </ng-select>
              <button
                type="button"
                class="btn bg-base text-white"
                style="padding: 5px 10px"
                (click)="open(CityTypeModal)"
              >
                <i class="fa fa-plus"></i>
              </button>
            </div>
          </div>
        </div>
        <div class="col-sm-6 mb-3">
          <div class="form-group">
            <label
              for="projectDescription"
              class="text-right col-form-label block"
            >
              {{ "projectName" | translate }}
            </label>
            <input
              type="text"
              class="form-control"
              id="projectDescription"
              autocomplete="off"
              #projectDescription="ngModel"
              maxlength="25"
              required
              class="form-control text-center {{
                projectDescription.invalid && projectDescription.touched
                  ? 'errorInput'
                  : ''
              }}"
              name="projectDescription"
              placeholder=" {{ 'projectName' | translate }}"
              [(ngModel)]="modalDetailsProject.projectDescription"
            />
          </div>
        </div>
        <div
          class="col-sm-6 col-lg-4 col-xl-3 mb-3"
          *ngIf="modalDetailsProject.projectId == 0"
        >
          <label class="text-right col-form-label block">
            {{ "Powers" | translate }}
          </label>
          <button
            type="button"
            (click)="
              open(modifyPermissionsModal, null, 'modifyPermissionsModal')
            "
            class="btn bg-base text-white"
          >
            {{ "The powers of the staff on the project" | translate }}
          </button>
        </div>
        <div class="col-sm-6 col-lg-4 col-xl-3 mb-3">
          <label class="text-right col-form-label block">
            {{ "Project goals" | translate }}
          </label>
          <button
            type="button"
            (click)="open(projectGoalsModal, null, 'projectGoalsModal')"
            class="btn bg-base text-white"
          >
            {{ "Determine project goals" | translate }}
          </button>
        </div>
        <div class="col-sm-6 col-lg-4 col-xl-3 mb-3">
          <div class="form-group">
            <label class="text-right col-form-label block">
              {{ "offerPriceNoProject" | translate }}</label
            >
            <ng-select
              disabled
              class="w-full p-0"
              placeholder="{{ 'Chose' | translate }}"
              [(ngModel)]="modalDetailsProject.offerPriceNumber"
              [ngModelOptions]="{ standalone: true }"
            >
              <ng-option
                *ngFor="let user of offerpriceList"
                [value]="user.id"
                >{{ user.name }}</ng-option
              >
            </ng-select>
          </div>
        </div>
        <div class="col-sm-6 col-lg-4 col-xl-3 mb-3">
          <div class="form-group">
            <label class="text-right col-form-label block">
              {{ "DepartmentProject" | translate }}</label
            >
            <ng-select
              id="projectDepartment"
              #projectDepartment="ngModel"
              required
              class="w-full p-0 h-100 {{
                projectDepartment.invalid && projectDepartment.touched
                  ? 'errorInput'
                  : ''
              }}"
              name="projectDepartment"
              placeholder=" {{ 'Chose' | translate }}"
              [(ngModel)]="modalDetailsProject.projectDepartment"
              [ngModelOptions]="{ standalone: true }"
            >
              <ng-option *ngFor="let user of Department" [value]="user.id">{{
                user.name
              }}</ng-option>
            </ng-select>
          </div>
        </div>
      </div>
    </form>
    <div
      class="flex gap-2 justify-end pt-3 border-t border-neutral-300 col-span-1 md:col-span-2 mt-2"
    >
      <button
        *ngIf="modalDetailsProject.projectId == 0"
        [disabled]="disableButtonSave_Project"
        class="btn bg-base text-white"
        type="submit"
        (click)="addProject()"
      >
        {{ "save" | translate }}
      </button>
      <button (click)="modal?.dismiss()" class="btn btn-secondary">
        {{ "Back" | translate }}
      </button>
    </div>
  </div>
</ng-template>

<!-- modify Permissions -->
<ng-template #modifyPermissionsModal let-modal>
  <div
    style="background-color: var(--base-color)"
    class="modal-header text-white flex justify-between items-center"
  >
    <h4 class="m-0">
      <span class="text-2xl">{{ "modifyPerms" | translate }}</span>
    </h4>
    <button
      type="button"
      class="text-2xl text-white m-0"
      (click)="modal.dismiss()"
    >
      <i class="fa-solid fa-xmark"></i>
    </button>
  </div>

  <div class="modal-body">
    <form #form="ngForm">
      <div class="flex align-items-end flex-wrap">
        <div
          class="form-group"
          style="min-width: 240px; margin-inline-end: 30px"
        >
          <label class="text-right col-form-label block">
            {{ "userName" | translate }}</label
          >
          <ng-select
            class="w-full p-0"
            placeholder="{{ 'Chose' | translate }}"
            ngModel
            name="user"
            [(ngModel)]="selectedUserPermissions.userid"
          >
            <ng-option *ngFor="let user of UserperFill" [value]="user.id">{{
              user.name
            }}</ng-option>
          </ng-select>
        </div>

        <div class="checkboxs flex align-items-end justify-between flex-wrap">
          <div class="form-group">
            <input
              ngModel
              type="checkbox"
              id="Watch"
              name="Watch"
              [checked]="selectAllValue"
              [(ngModel)]="selectedUserPermissions.watch"
            />
            <label for="Watch" class="text-right col-form-label mx-2">
              {{ "Watch" | translate }}
            </label>
          </div>
          <div class="form-group">
            <input
              ngModel
              type="checkbox"
              id="Add"
              name="Add"
              [checked]="selectAllValue"
              [(ngModel)]="selectedUserPermissions.add"
            />
            <label for="Add" class="text-right col-form-label mx-2">
              {{ "Add" | translate }}
            </label>
          </div>
          <div class="form-group">
            <input
              ngModel
              type="checkbox"
              id="edit"
              name="edit"
              [checked]="selectAllValue"
              [(ngModel)]="selectedUserPermissions.edit"
            />
            <label for="edit" class="text-right col-form-label mx-2">
              {{ "edit" | translate }}
            </label>
          </div>
          <div class="form-group">
            <input
              ngModel
              type="checkbox"
              id="delete"
              name="delete"
              [checked]="selectAllValue"
              [(ngModel)]="selectedUserPermissions.delete"
            />
            <label for="delete" class="text-right col-form-label mx-2">
              {{ "delete" | translate }}
            </label>
          </div>
        </div>
        <div class="form-group">
          <input
            ngModel
            type="checkbox"
            id="SelectAll"
            name="SelectAll"
            [(ngModel)]="selectAllValue"
            (change)="setValues($event)"
          />
          <label for="SelectAll" class="text-right col-form-label mx-2">
            {{ "SelectAll" | translate }}
          </label>
        </div>
      </div>

      <div class="flex gap-2 justify-end mt-3">
        <button
          type="button"
          mat-raised-button
          class="bg-success text-white"
          (click)="form.reset(); resetPrivProject()"
        >
          {{ "new" | translate }}
        </button>
        <button
          type="button"
          mat-raised-button
          class="bg-base text-white"
          (click)="addNewUserPermissions()"
        >
          {{ "add" | translate }}
        </button>
        <button
          type="button"
          (click)="modal.dismiss()"
          mat-raised-button
          color="basic"
        >
          {{ "close" | translate }}
        </button>
      </div>
    </form>

    <mat-form-field class="w-full">
      <mat-label>{{ "search" | translate }}</mat-label>
      <input matInput (keyup)="applyFilterPerm($event)" #input />
    </mat-form-field>

    <div class="table">
      <div class="table">
        <table
          mat-table
          [dataSource]="userPermissionsDataSource"
          class="mat-elevation-z8 table table-responsive table-striped table-bordered text-center"
          style="vertical-align: middle; font-size: 14px"
        >
          <!-- userName Column -->
          <ng-container matColumnDef="userName">
            <th mat-header-cell *matHeaderCellDef>
              {{ "userName" | translate }}
            </th>
            <td mat-cell *matCellDef="let element">{{ element.userName }}</td>
          </ng-container>

          <!-- watch Column -->
          <ng-container matColumnDef="watch">
            <th mat-header-cell *matHeaderCellDef>{{ "Watch" | translate }}</th>
            <td mat-cell *matCellDef="let element; let i = index">
              <i class="fa fa-check text-success" *ngIf="element.watch"></i>
              <i class="fa fa-close text-danger" *ngIf="!element.watch"></i>
            </td>
          </ng-container>
          <!-- add Column -->
          <ng-container matColumnDef="add">
            <th mat-header-cell *matHeaderCellDef>{{ "add" | translate }}</th>
            <td mat-cell *matCellDef="let element; let i = index">
              <i class="fa fa-check text-success" *ngIf="element.add"></i>
              <i class="fa fa-close text-danger" *ngIf="!element.add"></i>
            </td>
          </ng-container>
          <!-- edit Column -->
          <ng-container matColumnDef="edit">
            <th mat-header-cell *matHeaderCellDef>{{ "edit" | translate }}</th>
            <td mat-cell *matCellDef="let element; let i = index">
              <i class="fa fa-check text-success" *ngIf="element.edit"></i>
              <i class="fa fa-close text-danger" *ngIf="!element.edit"></i>
            </td>
          </ng-container>
          <!-- delete Column -->
          <ng-container matColumnDef="delete">
            <th mat-header-cell *matHeaderCellDef>
              {{ "delete" | translate }}
            </th>
            <td mat-cell *matCellDef="let element; let i = index">
              <i class="fa fa-check text-success" *ngIf="element.delete"></i>
              <i class="fa fa-close text-danger" *ngIf="!element.delete"></i>
            </td>
          </ng-container>

          <!-- operations Column -->
          <ng-container matColumnDef="operations">
            <th mat-header-cell *matHeaderCellDef>
              {{ "operations" | translate }}
            </th>
            <!-- " -->
            <td mat-cell *matCellDef="let element; let i = index">
              <button
                class="p-2 bg-orange-100 hover:bg-orange-500 rounded-lg duration-300 hover:text-white w-10 mx-1"
                (click)="setSelectedUserPermissions(element.idRow)"
              >
                <i class="fa-regular fa-pen-to-square"></i>
              </button>
              <button
                class="p-2 bg-red-100 hover:bg-red-500 rounded-lg duration-300 hover:text-white w-10"
                (click)="open(deleteModalPerm, element, 'deleteModalPerm')"
              >
                <i class="fa-solid fa-trash-can"></i>
              </button>
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="userPermissionsColumns"></tr>
          <tr
            mat-row
            *matRowDef="let row; let i = index; columns: userPermissionsColumns"
          ></tr>

          <!-- Row shown when there is no matching data. -->
          <tr class="mat-row" *matNoDataRow>
            <td class="mat-cell" colspan="4">
              {{ "noResult" | translate }} "{{ input.value }}"
            </td>
          </tr>
        </table>
      </div>
    </div>
  </div>
</ng-template>

<!-- deleteModalPerm -->
<ng-template #deleteModalPerm let-modal>
  <div class="modal-body text-center">
    <p
      [translate]="'name'"
      [translateParams]="{
        ar: 'هل تريد بالتأكيد حذف هذا الصف',
        en: 'Are you sure to delete this row ?'
      }"
    ></p>
    <div class="flex gap-2 justify-center mt-3">
      <button
        type="button"
        mat-raised-button
        color="warn"
        (click)="deletePermissions(); modal.dismiss()"
      >
        {{ "Yes" | translate }}
      </button>
      <button
        type="button"
        (click)="modal.dismiss()"
        mat-raised-button
        color="basic"
      >
        {{ "No" | translate }}
      </button>
    </div>
  </div>
</ng-template>

<!-- projectGoalsModal -->
<ng-template #projectGoalsModal let-modal>
  <div
    style="background-color: var(--base-color)"
    class="modal-header text-white flex justify-between items-center"
  >
    <h4 class="m-0">
      <span class="text-2xl">{{ "Project goals" | translate }}</span>
    </h4>
    <button
      type="button"
      class="text-2xl text-white m-0"
      (click)="modal.dismiss()"
    >
      <i class="fa-solid fa-xmark"></i>
    </button>
  </div>

  <div class="modal-body text-center">
    <mat-form-field class="w-full">
      <mat-label>{{ "search" | translate }}</mat-label>
      <input matInput (keyup)="applyGoalsFilter($event)" #input />
    </mat-form-field>

    <div class="table">
      <table
        mat-table
        [dataSource]="projectGoalsDataSource"
        class="mat-elevation-z8 table table-responsive table-striped table-bordered text-center"
        style="vertical-align: middle; font-size: 14px"
      >
        <!-- serial Column -->
        <ng-container matColumnDef="serial">
          <th mat-header-cell *matHeaderCellDef>
            {{ "serial" | translate }}
          </th>
          <td mat-cell *matCellDef="let element">{{ element.serial }}</td>
        </ng-container>

        <!-- requirements Column -->
        <ng-container matColumnDef="requirements">
          <th mat-header-cell *matHeaderCellDef>
            {{ "requirements and goals" | translate }}
          </th>
          <td mat-cell *matCellDef="let element; let i = index">
            {{ element.requirements }}
          </td>
        </ng-container>
        <!-- name/department Column -->
        <ng-container matColumnDef="name">
          <th mat-header-cell *matHeaderCellDef>
            {{ "name/department" | translate }}
          </th>
          <td mat-cell *matCellDef="let element; let i = index">
            {{ element.name }}
          </td>
        </ng-container>
        <!-- expected duration Column -->
        <ng-container matColumnDef="duration">
          <th mat-header-cell *matHeaderCellDef>
            {{ "expected duration" | translate }}
          </th>
          <td mat-cell *matCellDef="let element; let i = index">
            {{ element.duration }}
          </td>
        </ng-container>
        <!-- choose Column -->
        <ng-container matColumnDef="choose">
          <th mat-header-cell *matHeaderCellDef>
            {{ "to choose" | translate }}
          </th>
          <td mat-cell *matCellDef="let element; let i = index">
            <input
              type="checkbox"
              name="{{ 'checkbox_' + i + 1 }}"
              [(ngModel)]="element.choose"
              (change)="selectGoalForProject(i)"
            />
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="projectGoalsColumns"></tr>
        <tr
          mat-row
          *matRowDef="let row; let i = index; columns: projectGoalsColumns"
        ></tr>
        <!-- Row shown when there is no matching data. -->
        <tr class="mat-row" *matNoDataRow>
          <td class="mat-cell" colspan="4">
            {{ "noResult" | translate }} "{{ input.value }}"
          </td>
        </tr>
      </table>
    </div>
  </div>
</ng-template>

<ng-template #projectTypeModal let-modal>
  <div class="modal-header bg-base text-white">
    <h4
      class="modal-title mb-0"
      id="modal-basic-title"
      [translate]="'name'"
      [translateParams]="{ ar: 'اضافة جديدة', en: 'Add New' }"
    ></h4>
    <button
      type="button"
      class="text-2xl text-white m-0"
      (click)="modal.dismiss('Cross click')"
    >
      <i class="fa-solid fa-xmark"></i>
    </button>
  </div>
  <div class="modal-body text-center">
    <form
      #addProjectType="ngForm"
      class="grid grid-cols-1 md:grid-cols-2 gap-2"
    >
      <div class="form-group">
        <label for="ProjectNameArtxt" class="text-right col-form-label block">
          {{ "nameAr" | translate }}
          <span class="text-danger">*</span></label
        >
        <input
          required
          #ProjectNameAr="ngModel"
          ngModel
          [(ngModel)]="dataAdd.projecttype.nameAr"
          class="form-control"
          type="text"
          id="ProjectNameArtxt"
          name="ProjectNameArtxt"
          autocomplete="off"
          [placeholder]="('Write' | translate) + ' ' + ('nameAr' | translate)"
        />
      </div>
      <div class="form-group">
        <label for="ProjectNameEntxt" class="text-right col-form-label block">
          {{ "nameEn" | translate }}
          <span class="text-danger">*</span></label
        >
        <div style="display: inline-flex; width: 100%">
          <input
            required
            #ProjectNameEnValue
            #ProjectNameEn="ngModel"
            [(ngModel)]="dataAdd.projecttype.nameEn"
            ngModel
            class="form-control"
            type="text"
            id="ProjectNameEntxt"
            name="ProjectNameEntxt"
            autocomplete="off"
            [placeholder]="('Write' | translate) + ' ' + ('nameEn' | translate)"
          />
          <a
            class="btn"
            id="CopyProjectName2"
            (click)="dataAdd.projecttype.nameEn = dataAdd.projecttype.nameAr"
            ><i class="fa fa-copy"></i
          ></a>
        </div>
      </div>
      <div class="col-sm-8 col-lg-8 col-xl-8 mb-3">
        <label class="text-right col-form-label block">
          {{ "Project strategies and objectives" | translate }}
        </label>
        <button
          type="button"
          (click)="
            open(
              projectGoalsProjectTypeModal,
              null,
              'projectGoalsProjectTypeModal'
            )
          "
          class="btn bg-base text-white"
        >
          {{ "Project strategies and objectives" | translate }}
        </button>
      </div>
    </form>
    <div class="max-h-80 overflow-auto px-2">
      <table class="table table-hover">
        <thead>
          <tr>
            <th>{{ "nameAr" | translate }}</th>
            <th>{{ "nameEn" | translate }}</th>
            <th
              [translate]="'name'"
              [translateParams]="{
                ar: 'خيارات',
                en: 'Operations'
              }"
            ></th>
          </tr>
        </thead>
        <tbody>
          <tr
            *ngFor="let type of ProjectTypesPopup"
            (dblclick)="
              setProjectTypeInSelect(type, projectTypeModal);
              modal.dismiss('Cross click')
            "
          >
            <td>{{ type.name }}</td>
            <td>{{ type.nameEn }}</td>
            <td class="flex gap-2 justify-center">
              <button
                class="p-2 bg-orange-100 hover:bg-orange-500 rounded-lg duration-300 hover:text-white aspect-square w-10"
                (click)="
                  getallreq_ProGoals(type);
                  dataAdd.projecttype.nameAr = type.name;
                  dataAdd.projecttype.nameEn = type.nameEn;
                  dataAdd.projecttype.id = type.id
                "
              >
                <i class="fa-regular fa-pen-to-square"></i>
              </button>
              <button
                (click)="getProjecttypeRow(type); open(deleteProjectType)"
                class="p-2 bg-red-100 hover:bg-red-500 rounded-lg duration-300 hover:text-white aspect-square w-10"
              >
                <i class="fa-solid fa-trash-can"></i>
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    <div class="flex gap-2 mt-3 pt-3 border-t border-neutral-300">
      <button
        class="btn bg-base text-white"
        type="submit"
        [disabled]="addProjectType.invalid"
        (click)="saveProjectType()"
      >
        {{ "Save" | translate }}
      </button>
      <button (click)="modal.dismiss('Cross click')" class="btn btn-secondary">
        {{ "Back" | translate }}
      </button>
      <button (click)="resetProjectType()" class="btn bg-base text-white">
        {{ "جديد" | translate }}
      </button>
    </div>
  </div>
</ng-template>

<ng-template #deleteProjectType let-modal>
  <div class="modal-body text-center">
    <p
      [translate]="'name'"
      [translateParams]="{
        ar: 'هل تريد بالتأكيد حذف هذا الصف',
        en: 'Are you sure to delete this row ?'
      }"
    ></p>
    <div class="flex gap-2 justify-center mt-3">
      <button
        type="button"
        mat-raised-button
        color="warn"
        (click)="confirmProjecttypeDelete(); modal.dismiss()"
      >
        {{ "Yes" | translate }}
      </button>
      <button
        type="button"
        (click)="modal.dismiss()"
        mat-raised-button
        color="basic"
      >
        {{ "No" | translate }}
      </button>
    </div>
  </div>
</ng-template>

<ng-template #subprojectTypeModal let-modal>
  <div class="modal-header bg-base text-white">
    <h4
      class="modal-title mb-0"
      id="modal-basic-title"
      [translate]="'name'"
      [translateParams]="{ ar: 'اضافة جديدة', en: 'Add New' }"
    ></h4>
    <button
      type="button"
      class="text-2xl text-white m-0"
      (click)="modal.dismiss('Cross click')"
    >
      <i class="fa-solid fa-xmark"></i>
    </button>
  </div>
  <div class="modal-body text-center">
    <form
      #addsubProjectType="ngForm"
      class="grid grid-cols-1 md:grid-cols-2 gap-2"
    >
      <div class="form-group">
        <label
          for="subProjectNameArtxt"
          class="text-right col-form-label block"
        >
          {{ "nameAr" | translate }}
          <span class="text-danger">*</span></label
        >
        <input
          required
          #subProjectNameAr="ngModel"
          ngModel
          [(ngModel)]="dataAdd.subprojecttype.nameAr"
          class="form-control"
          type="text"
          id="subProjectNameArtxt"
          name="subProjectNameArtxt"
          autocomplete="off"
          [placeholder]="('Write' | translate) + ' ' + ('nameAr' | translate)"
        />
      </div>
      <div class="form-group">
        <label
          for="subProjectNameEntxt"
          class="text-right col-form-label block"
        >
          {{ "nameEn" | translate }}
          <span class="text-danger">*</span></label
        >
        <div style="display: inline-flex; width: 100%">
          <input
            required
            #subProjectNameEnValue
            #subProjectNameEn="ngModel"
            [(ngModel)]="dataAdd.subprojecttype.nameEn"
            ngModel
            class="form-control"
            type="text"
            id="subProjectNameEntxt"
            name="subProjectNameEntxt"
            autocomplete="off"
            [placeholder]="('Write' | translate) + ' ' + ('nameEn' | translate)"
          />
          <a
            class="btn"
            id="subprojecttypecopy"
            (click)="
              dataAdd.subprojecttype.nameEn = dataAdd.subprojecttype.nameAr
            "
            ><i class="fa fa-copy"></i
          ></a>
        </div>
      </div>
      <div class="form-group">
        <label for="TimePeriodtxt" class="text-right col-form-label block">
          {{ "TimePeriod" | translate }}
          <span class="text-danger">*</span></label
        >
        <input
          required
          #TimePeriodAr="ngModel"
          ngModel
          [(ngModel)]="dataAdd.subprojecttype.timePeriod"
          class="form-control"
          type="number"
          id="TimePeriodArtxt"
          name="TimePeriodArtxt"
          autocomplete="off"
          [placeholder]="
            ('Write' | translate) + ' ' + ('TimePeriod' | translate)
          "
        />
      </div>
    </form>
    <div class="max-h-80 overflow-auto px-2">
      <table class="table table-hover">
        <thead>
          <tr>
            <th>{{ "nameAr" | translate }}</th>
            <th>{{ "nameEn" | translate }}</th>
            <th>{{ "TimePeriodStr" | translate }}</th>
            <th
              [translate]="'name'"
              [translateParams]="{
                ar: 'خيارات',
                en: 'Operations'
              }"
            ></th>
          </tr>
        </thead>
        <tbody>
          <tr
            *ngFor="let type of ProjectSubTypesPopup"
            (dblclick)="
              setSubProjectTypeInSelect(type, subprojectTypeModal);
              modal.dismiss('Cross click')
            "
          >
            <td>{{ type.name }}</td>
            <td>{{ type.nameEn }}</td>
            <td>{{ type.timePeriodStr }}</td>
            <td class="flex gap-2 justify-center">
              <button
                class="p-2 bg-orange-100 hover:bg-orange-500 rounded-lg duration-300 hover:text-white aspect-square w-10"
                (click)="
                  dataAdd.subprojecttype.nameAr = type.name;
                  dataAdd.subprojecttype.nameEn = type.nameEn;
                  dataAdd.subprojecttype.timePeriod = type.timePeriod;
                  dataAdd.subprojecttype.id = type.id
                "
              >
                <i class="fa-regular fa-pen-to-square"></i>
              </button>
              <button
                (click)="open(deletesubProjectType); getSubProjecttypeRow(type)"
                class="p-2 bg-red-100 hover:bg-red-500 rounded-lg duration-300 hover:text-white aspect-square w-10"
              >
                <i class="fa-solid fa-trash-can"></i>
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    <div class="flex gap-2 mt-3 pt-3 border-t border-neutral-300">
      <button
        class="btn bg-base text-white"
        type="submit"
        [disabled]="addsubProjectType.invalid"
        (click)="saveSubProjectType()"
      >
        {{ "Save" | translate }}
      </button>
      <button (click)="modal.dismiss('Cross click')" class="btn btn-secondary">
        {{ "Back" | translate }}
      </button>
      <button (click)="resetProjectType()" class="btn bg-base text-white">
        {{ "جديد" | translate }}
      </button>
    </div>
  </div>
</ng-template>

<ng-template #deletesubProjectType let-modal>
  <div class="modal-body text-center">
    <p
      [translate]="'name'"
      [translateParams]="{
        ar: 'هل تريد بالتأكيد حذف هذا الصف',
        en: 'Are you sure to delete this row ?'
      }"
    ></p>
    <div class="flex gap-2 justify-center mt-3">
      <button
        type="button"
        mat-raised-button
        color="warn"
        (click)="confirmSubProjecttypeDelete(); modal.dismiss()"
      >
        {{ "Yes" | translate }}
      </button>
      <button
        type="button"
        (click)="modal.dismiss()"
        mat-raised-button
        color="basic"
      >
        {{ "No" | translate }}
      </button>
    </div>
  </div>
</ng-template>

<ng-template #BuildTypeModal let-modal>
  <div class="modal-header bg-base text-white">
    <h4
      class="modal-title mb-0"
      id="modal-basic-title"
      [translate]="'name'"
      [translateParams]="{ ar: 'اضافة جديدة', en: 'Add New' }"
    ></h4>
    <button
      type="button"
      class="text-2xl text-white m-0"
      (click)="modal.dismiss('Cross click')"
    >
      <i class="fa-solid fa-xmark"></i>
    </button>
  </div>
  <div class="modal-body text-center">
    <form #addBuildType="ngForm" class="grid grid-cols-1 md:grid-cols-2 gap-2">
      <div class="form-group">
        <label for="BuildNameArtxt" class="text-right col-form-label block">
          {{ "nameAr" | translate }}
          <span class="text-danger">*</span></label
        >
        <input
          required
          #BuildNameAr="ngModel"
          ngModel
          [(ngModel)]="dataAdd.buildtype.nameAr"
          class="form-control"
          type="text"
          id="BuildNameArtxt"
          name="BuildNameArtxt"
          autocomplete="off"
          [placeholder]="('Write' | translate) + ' ' + ('nameAr' | translate)"
        />
      </div>
      <div class="form-group">
        <label for="BuildNameEntxt" class="text-right col-form-label block">
          {{ "nameEn" | translate }}
          <span class="text-danger">*</span></label
        >
        <div style="display: inline-flex; width: 100%">
          <input
            required
            #BuildNameEnValue
            #BuildNameEn="ngModel"
            [(ngModel)]="dataAdd.buildtype.nameEn"
            ngModel
            class="form-control"
            type="text"
            id="BuildNameEntxt"
            name="BuildNameEntxt"
            autocomplete="off"
            [placeholder]="('Write' | translate) + ' ' + ('nameEn' | translate)"
          />
          <a
            class="btn"
            id="CopyBuildName2"
            (click)="dataAdd.buildtype.nameEn = dataAdd.buildtype.nameAr"
            ><i class="fa fa-copy"></i
          ></a>
        </div>
      </div>
    </form>
    <div class="max-h-80 overflow-auto px-2">
      <table class="table table-hover">
        <thead>
          <tr>
            <th>{{ "nameAr" | translate }}</th>
            <th>{{ "nameEn" | translate }}</th>
            <th
              [translate]="'name'"
              [translateParams]="{
                ar: 'خيارات',
                en: 'Operations'
              }"
            ></th>
          </tr>
        </thead>
        <tbody>
          <tr
            *ngFor="let type of BuildTypesPopup"
            (dblclick)="
              setbuildTypeInSelect(type, BuildTypeModal);
              modal.dismiss('Cross click')
            "
          >
            <td>{{ type.name }}</td>
            <td>{{ type.nameEn }}</td>
            <td class="flex gap-2 justify-center">
              <button
                class="p-2 bg-orange-100 hover:bg-orange-500 rounded-lg duration-300 hover:text-white aspect-square w-10"
                (click)="
                  dataAdd.buildtype.nameAr = type.name;
                  dataAdd.buildtype.nameEn = type.nameEn;
                  dataAdd.buildtype.id = type.id
                "
              >
                <i class="fa-regular fa-pen-to-square"></i>
              </button>
              <button
                (click)="getbuildypeRow(type); open(deleteBuildType)"
                class="p-2 bg-red-100 hover:bg-red-500 rounded-lg duration-300 hover:text-white aspect-square w-10"
              >
                <i class="fa-solid fa-trash-can"></i>
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    <div class="flex gap-2 mt-3 pt-3 border-t border-neutral-300">
      <button
        class="btn bg-base text-white"
        type="submit"
        [disabled]="addBuildType.invalid"
        (click)="savebuildType()"
      >
        {{ "Save" | translate }}
      </button>
      <button (click)="modal.dismiss('Cross click')" class="btn btn-secondary">
        {{ "Back" | translate }}
      </button>
      <button (click)="resetbuildType()" class="btn bg-base text-white">
        {{ "جديد" | translate }}
      </button>
    </div>
  </div>
</ng-template>

<ng-template #deleteBuildType let-modal>
  <div class="modal-body text-center">
    <p
      [translate]="'name'"
      [translateParams]="{
        ar: 'هل تريد بالتأكيد حذف هذا الصف',
        en: 'Are you sure to delete this row ?'
      }"
    ></p>
    <div class="flex gap-2 justify-center mt-3">
      <button
        type="button"
        mat-raised-button
        color="warn"
        (click)="confirmbuildtypeDelete(); modal.dismiss()"
      >
        {{ "Yes" | translate }}
      </button>
      <button
        type="button"
        (click)="modal.dismiss()"
        mat-raised-button
        color="basic"
      >
        {{ "No" | translate }}
      </button>
    </div>
  </div>
</ng-template>

<ng-template #CityTypeModal let-modal>
  <div class="modal-header bg-base text-white">
    <h4
      class="modal-title mb-0"
      id="modal-basic-title"
      [translate]="'name'"
      [translateParams]="{ ar: 'اضافة جديدة', en: 'Add New' }"
    ></h4>
    <button
      type="button"
      class="text-2xl text-white m-0"
      (click)="modal.dismiss('Cross click')"
    >
      <i class="fa-solid fa-xmark"></i>
    </button>
  </div>
  <div class="modal-body text-center">
    <form #addCityType="ngForm" class="grid grid-cols-1 md:grid-cols-2 gap-2">
      <div class="form-group">
        <label for="CityNameArtxt" class="text-right col-form-label block">
          {{ "nameAr" | translate }}
          <span class="text-danger">*</span></label
        >
        <input
          required
          #CityNameAr="ngModel"
          ngModel
          [(ngModel)]="dataAdd.citytype.nameAr"
          class="form-control"
          type="text"
          id="CityNameArtxt"
          name="CityNameArtxt"
          autocomplete="off"
          [placeholder]="('Write' | translate) + ' ' + ('nameAr' | translate)"
        />
      </div>
      <div class="form-group">
        <label for="CityNameEntxt" class="text-right col-form-label block">
          {{ "nameEn" | translate }}
          <span class="text-danger">*</span></label
        >
        <div style="display: inline-flex; width: 100%">
          <input
            required
            #CityNameEnValue
            #CityNameEn="ngModel"
            [(ngModel)]="dataAdd.citytype.nameEn"
            ngModel
            class="form-control"
            type="text"
            id="CityNameEntxt"
            name="CityNameEntxt"
            autocomplete="off"
            [placeholder]="('Write' | translate) + ' ' + ('nameEn' | translate)"
          />
          <a
            class="btn"
            id="CopyCityName2"
            (click)="dataAdd.citytype.nameEn = dataAdd.citytype.nameAr"
            ><i class="fa fa-copy"></i
          ></a>
        </div>
      </div>
    </form>
    <div class="max-h-80 overflow-auto px-2">
      <table class="table table-hover">
        <thead>
          <tr>
            <th>{{ "nameAr" | translate }}</th>
            <th>{{ "nameEn" | translate }}</th>
            <th
              [translate]="'name'"
              [translateParams]="{
                ar: 'خيارات',
                en: 'Operations'
              }"
            ></th>
          </tr>
        </thead>
        <tbody>
          <tr
            *ngFor="let type of CityTypesPopup"
            (dblclick)="
              setcityTypeInSelect(type, CityTypeModal);
              modal.dismiss('Cross click')
            "
          >
            <td>{{ type.name }}</td>
            <td>{{ type.nameEn }}</td>
            <td class="flex gap-2 justify-center">
              <button
                class="p-2 bg-orange-100 hover:bg-orange-500 rounded-lg duration-300 hover:text-white aspect-square w-10"
                (click)="
                  dataAdd.citytype.nameAr = type.name;
                  dataAdd.citytype.nameEn = type.nameEn;
                  dataAdd.citytype.id = type.id
                "
              >
                <i class="fa-regular fa-pen-to-square"></i>
              </button>
              <button
                (click)="getcitytypeRow(type); open(deleteCityType)"
                class="p-2 bg-red-100 hover:bg-red-500 rounded-lg duration-300 hover:text-white aspect-square w-10"
              >
                <i class="fa-solid fa-trash-can"></i>
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    <div class="flex gap-2 mt-3 pt-3 border-t border-neutral-300">
      <button
        class="btn bg-base text-white"
        type="submit"
        [disabled]="addCityType.invalid"
        (click)="savecityType()"
      >
        {{ "Save" | translate }}
      </button>
      <button (click)="modal.dismiss('Cross click')" class="btn btn-secondary">
        {{ "Back" | translate }}
      </button>
      <button (click)="resetcityType()" class="btn bg-base text-white">
        {{ "جديد" | translate }}
      </button>
    </div>
  </div>
</ng-template>

<ng-template #deleteCityType let-modal>
  <div class="modal-body text-center">
    <p
      [translate]="'name'"
      [translateParams]="{
        ar: 'هل تريد بالتأكيد حذف هذا الصف',
        en: 'Are you sure to delete this row ?'
      }"
    ></p>
    <div class="flex gap-2 justify-center mt-3">
      <button
        type="button"
        mat-raised-button
        color="warn"
        (click)="confirmcitytypeDelete(); modal.dismiss()"
      >
        {{ "Yes" | translate }}
      </button>
      <button
        type="button"
        (click)="modal.dismiss()"
        mat-raised-button
        color="basic"
      >
        {{ "No" | translate }}
      </button>
    </div>
  </div>
</ng-template>

<ng-template #projectGoalsProjectTypeModal let-modal>
  <div
    class="modal-header bg-base text-white flex justify-between items-center modal-xxl"
  >
    <h4 class="m-0">
      <span class="text-2xl">{{
        "Project strategies and objectives" | translate
      }}</span>
    </h4>
    <button
      type="button"
      class="text-2xl text-white m-0"
      (click)="modal?.dismiss()"
    >
      <i class="fa-solid fa-xmark"></i>
    </button>
  </div>
  <div class="modal-body text-center max-h-[400px] overflow-auto">
    <div class="text-start my-3">
      <button class="btn btn-primary" (click)="addNewRowProjectGoal()">
        +
      </button>
    </div>
    <div class="overflow-auto" style="height: 244px">
      <table class="custome-table overflow-auto max-h-[60vh]">
        <thead>
          <tr>
            <td
              [translate]="'name'"
              [translateParams]="{
                ar: 'اسم المتطلب والهدف',
                en: 'Name of the requirement and goal'
              }"
            ></td>
            <td
              [translate]="'name'"
              [translateParams]="{
                ar: 'موظف/قسم',
                en: 'Employee/department'
              }"
            ></td>
            <td
              [translate]="'name'"
              [translateParams]="{
                ar: 'الاسم / القسم',
                en: 'Name/Department'
              }"
            ></td>
            <td
              [translate]="'name'"
              [translateParams]="{
                ar: 'نوع المدة ',
                en: 'duration Type'
              }"
            ></td>
            <td
              [translate]="'name'"
              [translateParams]="{
                ar: 'المدة المتوقعة',
                en: 'Expected duration'
              }"
            ></td>
            <td
              [translate]="'name'"
              [translateParams]="{
                ar: 'خيارات',
                en: 'Options'
              }"
            ></td>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let task of ProjectTypeGoals">
            <!-- <td>{{task.idRow}}</td> -->
            <td>
              <input
                type="text"
                id="RequirmentName{{ task.idRow }}"
                name="RequirmentName{{ task.idRow }}"
                [(ngModel)]="task.RequirmentName"
                class="form-control"
                autocomplete="off"
              />
            </td>
            <td>
              <select
                class="form-select"
                aria-label="Default select example"
                [(ngModel)]="task.EmpDepType"
              >
                <option value="1" selected>موظف</option>
                <option value="2">قسم</option>
              </select>
            </td>
            <td>
              <ng-select
                *ngIf="task.EmpDepType == 1"
                [items]="Employee_ProGoals"
                bindLabel="name"
                bindValue="id"
                [clearable]="true"
                class="w-full p-0"
                [(ngModel)]="task.EmployeeId"
                placeholder="{{ 'Chose' | translate }}"
              >
              </ng-select>

              <ng-select
                *ngIf="task.EmpDepType == 2"
                [items]="Department_ProGoals"
                bindLabel="name"
                bindValue="id"
                [clearable]="true"
                class="w-full p-0"
                [(ngModel)]="task.DepartmentId"
                placeholder="{{ 'Chose' | translate }}"
              >
              </ng-select>
            </td>
            <td>
              <select
                class="form-select"
                aria-label="Default select example"
                (ngModelChange)="
                  timeTypemodelChangeFn($event, task.idRow); calctotal()
                "
                [(ngModel)]="task.timeType"
              >
                <option value="4" selected>ساعه</option>
                <option value="1">يوم</option>
                <option value="2">أسبوع</option>
                <option value="3">شهر</option>
              </select>
            </td>
            <td>
              <input
                type="number"
                (ngModelChange)="
                  timeNomodelChangeFn($event, task.idRow); calctotal()
                "
                min="0"
                [(ngModel)]="task.timeNo"
                class="form-control"
                autocomplete="off"
              />
            </td>
            <td>
              <button
                class="p-2 rounded-lg text-red-500 bg-red-50"
                (click)="deleteRow(task.idRow)"
              >
                <i class="fa-solid fa-trash"></i>
              </button>
            </td>
          </tr>
        </tbody>
        <tr *ngIf="ProjectTypeGoals?.length > 0">
          <td colspan="3">
            {{ "Project strategies Total" | translate }}
          </td>
          <td colspan="2">
            {{ Totaltimestr_ProGoals }}
          </td>
          <td></td>
        </tr>
      </table>
    </div>
    <div
      class="flex gap-2 pt-3 border-t border-neutral-300 col-span-1 md:col-span-2 mt-2"
    >
      <!-- <button
          class="btn btn-primary"
          type="submit"
          (click)="SaveTask(modal)"
          [translate]="'save'"
          [translateParams]="{ ar: 'حفظ', en: 'save' }"
        ></button> -->
      <button (click)="modal?.dismiss()" class="btn btn-secondary">
        {{ "Back" | translate }}
      </button>
    </div>
  </div>
</ng-template>
<!-- projectRequirementsModal -->
<ng-template #projectRequirementsModal let-modal>
  <div
    style="background-color: var(--base-color)"
    class="modal-header text-white flex justify-between items-center"
  >
    <h4 class="m-0">
      <span class="text-2xl">{{ "Project requirements" | translate }}</span>
    </h4>
    <button
      type="button"
      class="text-2xl text-white m-0"
      (click)="modal.dismiss()"
    >
      <i class="fa-solid fa-xmark"></i>
    </button>
  </div>

  <div class="modal-body text-center">
    <mat-form-field class="w-full">
      <mat-label>{{ "search" | translate }}</mat-label>
      <input matInput (keyup)="applyRequirementsFilter($event)" #input />
    </mat-form-field>

    <div class="table">
      <table
        mat-table
        [dataSource]="projectRequirementsDataSource"
        class="mat-elevation-z8 table table-responsive table-striped table-bordered text-center"
        style="vertical-align: middle; font-size: 14px"
      >
        <!-- serial Column -->
        <ng-container matColumnDef="File Name">
          <th mat-header-cell *matHeaderCellDef>
            {{ "File Name" | translate }}
          </th>
          <td mat-cell *matCellDef="let element; let i = index">
            {{ element.nameAr }}
          </td>
        </ng-container>

        <!-- requirements Column -->
        <ng-container matColumnDef="cost">
          <th mat-header-cell *matHeaderCellDef>
            {{ "cost" | translate }}
          </th>
          <td mat-cell *matCellDef="let element; let i = index">
            {{ element.cost }}
          </td>
        </ng-container>
        <ng-container matColumnDef="Attachments">
          <th mat-header-cell *matHeaderCellDef>
            {{ "Attachments" | translate }}
          </th>
          <td mat-cell *matCellDef="let element">
            <div class="flex items-center justify-center gap-1">
              <button
                *ngIf="element.attachmentUrl"
                (click)="downloadFile(element)"
                class="min-w-max p-2 bg-sky-100 hover:bg-sky-500 rounded-lg duration-300 hover:text-white aspect-square w-10"
              >
                <i class="fa-solid fa-eye"></i>
              </button>
            </div>
          </td>
        </ng-container>
        <tr mat-header-row *matHeaderRowDef="projectRequirementsColumns"></tr>
        <tr
          mat-row
          *matRowDef="
            let row;
            let i = index;
            columns: projectRequirementsColumns
          "
        ></tr>
        <!-- Row shown when there is no matching data. -->
        <tr class="mat-row" *matNoDataRow>
          <td class="mat-cell" colspan="3">
            {{ "noResult" | translate }} "{{ input.value }}"
          </td>
        </tr>
      </table>
    </div>
  </div>
</ng-template>
<!-- NewInvoiceModal  -->
<ng-template #NewInvoiceModal let-modal>
  <div
    style="background-color: var(--base-color)"
    class="modal-header text-white flex justify-between items-center"
  >
    <h4 class="m-0">
      <span *ngIf="invoicepop == 2" class="text-2xl">{{
        "NewsSalesInvoice" | translate
      }}</span>
      <span *ngIf="invoicepop == 1" class="text-2xl">{{
        "NewInvoice" | translate
      }}</span>
    </h4>
    <button
      type="button"
      class="text-2xl text-white m-0"
      (click)="modal?.dismiss()"
    >
      <i class="fa-solid fa-xmark"></i>
    </button>
  </div>

  <div class="modal-body">
    <ng-container>
      <form class="" #InvoiceForm="ngForm">
        <div class="row align-items-end mb-2 mx-3">
          <div class="col-sm-6 col-md-3 col-lg-2 mb-0">
            <div class="form-group">
              <label for="date" class="text-right col-form-label block">
                {{ "date" | translate }}
              </label>
              <input
                placeholder="{{ 'Chose' | translate }}"
                name="date"
                type="text"
                class="form-control"
                bsDatepicker
                #dpr="bsDatepicker"
                [bsConfig]="{ dateInputFormat: 'DD/MM/YYYY' }"
                autocomplete="off"
                [(ngModel)]="modalInvoice.Date"
                [ngModelOptions]="{ standalone: true }"
                [disabled]="modalInvoice.AddOrView != 1"
              />
            </div>
          </div>

          <div class="col-sm-6 col-md-3 col-lg-2 mb-0">
            <div class="form-group">
              <label for="customerEn" class="text-right col-form-label block">
                {{ "invoice number" | translate }}
              </label>
              <input
                required
                placeholder="{{ 'invoice number' | translate }}"
                class="form-control"
                type="text"
                disabled
                autocomplete="off"
                [(ngModel)]="modalInvoice.InvoiceNumber"
                [ngModelOptions]="{ standalone: true }"
              />
            </div>
          </div>

          <!-- <div class="col-sm-6 col-md-3 col-lg-2 mb-0">
            <div class="form-group">
              <input
                required
                placeholder="{{ 'Registration number' | translate }}"
                class="form-control"
                type="text"
                disabled
                autocomplete="off"
                [(ngModel)]="modalInvoice.JournalNumber"
                [ngModelOptions]="{standalone: true}"
              />
            </div>
          </div> -->

          <div class="col-sm-6 col-md-3 col-lg-2 mb-0" style="display: none;">
            <div class="form-group">
              <input
                required
                placeholder="{{ 'SR' | translate }}"
                class="form-control"
                type="text"
                disabled
                autocomplete="off"
                [(ngModel)]="modalInvoice.Currency"
                [ngModelOptions]="{ standalone: true }"
              />
            </div>
          </div>

          <div class="col-sm-6 col-md-3 col-lg-2 mb-0">
            <div class="form-group">
              <input
                required
                placeholder="{{ 'Registration number' | translate }}"
                class="form-control"
                type="text"
                disabled
                autocomplete="off"
                [(ngModel)]="modalInvoice.JournalNumber"
                [ngModelOptions]="{ standalone: true }"
              />
            </div>
          </div>

          <div class="col-sm-6 col-md-3 col-lg-2 mb-0">
            <div class="form-group">
              <input
                placeholder="{{ 'mainCenter' | translate }}"
                required
                class="form-control"
                type="text"
                disabled
                autocomplete="off"
                [(ngModel)]="modalInvoice.BranchSelect"
                [ngModelOptions]="{ standalone: true }"
              />
            </div>
          </div>

          <div class="col-sm-10 col-md-5 col-lg-4 mb-0">
            <div class="form-group">
              <ng-select
                class="w-full p-0"
                style="min-width: max-content"
                placeholder="{{ 'Chose' | translate }}"
                [(ngModel)]="modalInvoice.CostCenterId"
                [ngModelOptions]="{ standalone: true }"
                name="CostCenterId"
                [disabled]="modalInvoice.AddOrView != 1"
              >
                <ng-option
                  *ngFor="let user of load_CostCenter"
                  [value]="user.id"
                  >{{ user.name }}</ng-option
                >
              </ng-select>
            </div>
          </div>
          <!-- 2 line-->

          <div class="col-sm-6 col-md-3 col-lg-2 mb-0">
            <div class="form-group">
              <label
                for="Corresponding"
                class="text-right col-form-label block"
              >
                {{ "Corresponding" | translate }}
              </label>
              <input
                id="Corresponding"
                placeholder="{{ 'Chose' | translate }}"
                name="date"
                type="text"
                class="form-control"
                bsDatepicker
                #dpr="bsDatepicker"
                autocomplete="off"
                [(ngModel)]="modalInvoice.HijriDate"
                [ngModelOptions]="{ standalone: true }"
                disabled
              />
            </div>
          </div>

          <div class="col-sm-6 col-md-3 col-lg-2 mb-0">
            <div class="form-group">
              <label for="Paytype" class="text-right col-form-label block">
                {{ "Type" | translate }}
              </label>
              <ng-select
                class="w-full p-0"
                style="min-width: max-content"
                placeholder="{{ 'Chose' | translate }}"
                name="Paytype"
                [clearable]="false"
                (change)="PayTypeChange()"
                [(ngModel)]="modalInvoice.PayType"
                [ngModelOptions]="{ standalone: true }"
                [disabled]="modalInvoice.AddOrView != 1"
              >
                <ng-option
                  *ngFor="let type of Paytype"
                  [value]="type.id"
                  [translate]="'name'"
                  [translateParams]="{ ar: type.name?.ar, en: type.name?.en }"
                >
                </ng-option>
              </ng-select>
            </div>
          </div>

          <div class="col-sm-8 col-md-6 col-lg-6 mb-0">
            <div class="form-group">
              <ng-select
                class="w-full p-0"
                style="min-width: max-content"
                placeholder="{{ 'Chose' | translate }}"
                [(ngModel)]="modalInvoice.ToAccountId"
                [ngModelOptions]="{ standalone: true }"
                name="ToAccountId"
                [disabled]="modalInvoice.AddOrView != 1"
              >
                <ng-option
                  *ngFor="let user of load_Accounts"
                  [value]="user.id"
                  >{{ user.name }}</ng-option
                >
              </ng-select>
            </div>
          </div>

          <div class="col-sm-6 col-md-3 col-lg-2 mb-0">
            <div class="form-group">
              <input
                placeholder="{{ 'thePhone' | translate }}"
                required
                class="form-control"
                type="text"
                [(ngModel)]="modalInvoice.OrganizationsMobile"
                [ngModelOptions]="{ standalone: true }"
                disabled
              />
            </div>
          </div>


          <!-- 3 line -->

          <div class="col-sm-6 col-md-3 col-lg-3 mb-0">
            <div class="form-group">
              <label for="customerId" class="text-right col-form-label block">
                {{ "Client" | translate }}
              </label>
              <ng-select
                class="w-full p-0"
                placeholder="{{ 'Chose' | translate }}"
                id="customerId"
                disabled
                name="customerId"
                (change)="customerIdChange()"
                [(ngModel)]="modalInvoice.customerId"
                [ngModelOptions]="{ standalone: true }"
              >
                <ng-option
                  *ngFor="let user of load_Customer"
                  [value]="user.id"
                  >{{ user.name }}</ng-option
                >
              </ng-select>
            </div>
          </div>

          <div
            class="col-sm-6 col-md-3 col-lg-2 mb-0"
            *ngIf="modalInvoice.popuptype != 2 && invoicepop != 2"
          >
            <div class="form-group">
              <label for="ProjectId" class="text-right col-form-label block">
                {{ "Project" | translate }}
              </label>
              <ng-select
                class="w-full p-0"
                placeholder="{{ 'Chose' | translate }}"
                id="ProjectId"
                name="ProjectId"
                (change)="ProjectIdChange()"
                [(ngModel)]="modalInvoice.ProjectId"
                [ngModelOptions]="{ standalone: true }"
                [disabled]="modalInvoice.AddOrView != 1"
              >
                <ng-option
                  *ngFor="let user of load_Projects"
                  [value]="user.id"
                  >{{ user.name }}</ng-option
                >
              </ng-select>
            </div>
          </div>

          <div class="col-sm-6 col-md-3 col-lg-2 mb-0" *ngIf="invoicepop == 2">
            <div class="form-group">
              <input
                placeholder="{{ 'Project' | translate }}"
                required
                class="form-control"
                type="text"
                [(ngModel)]="modalDetailsProject.projectNo"
                [ngModelOptions]="{ standalone: true }"
                disabled
              />
            </div>
          </div>

          <div
            class="col-sm-6 col-md-3 col-lg-2 mb-0"
            *ngIf="modalInvoice.popuptype == 2 && invoicepop != 2"
          >
            <div class="d-flex">
              <input
                type="checkbox"
                name="AllCustomer"
                id="AllCustomer"
                id="AllCustomerCheck"
                disabled
                name="AllCustomerCheck"
                [(ngModel)]="modalInvoice.AllCustomerCheck"
                [ngModelOptions]="{ standalone: true }"
                (change)="AllCustomerCheckChange()"
              />
              <label for="AllCustomerCheck" class="mx-2">{{
                "AllCustomer" | translate
              }}</label>
            </div>
          </div>

          <div class="col-sm-6 col-md-3 col-lg-3 mb-0">
            <div class="form-group">
              <label for="CustomerTax" class="text-right col-form-label block">
                {{ "Tax Number" | translate }}
              </label>
              <input
                required
                placeholder="{{ '' | translate }}"
                class="form-control"
                type="text"
                id="CustomerTax"
                name="CustomerTax"
                disabled
                [(ngModel)]="modalInvoice.CustomerTax"
                [ngModelOptions]="{ standalone: true }"
              />
            </div>
          </div>
          <div class="col-sm-6 col-md-3 col-lg-3 mb-0" style="display: none">
            <div class="form-group">
              <label
                for="CustomerAddress"
                class="text-right col-form-label block"
              >
                {{ "Address" | translate }}
              </label>
              <input
                required
                placeholder="{{ '' | translate }}"
                class="form-control"
                id="CustomerAddress"
                name="CustomerAddress"
                type="text"
                disabled
                [(ngModel)]="modalInvoice.CustomerAddress"
                [ngModelOptions]="{ standalone: true }"
              />
            </div>
          </div>

          <div class="col-sm-8 col-md-4 col-lg-3 mb-0 text-end">
            <div class="form-check form-switch position-relative">
              <label
                class="form-check-label priceOffer"
                for="flexSwitchCheckDefault"
                style="width: max-content"
              >
                {{ "OfferPriceActiveNew" | translate }}
              </label>
              <input
                style="inset-inline-start: 0"
                class="form-check-input px-3 priceOfferInput position-absolute left-100"
                (change)="showPrice = !showPrice; offerpriceChange()"
                type="checkbox"
                role="switch"
                id="flexSwitchCheckDefault"
                [(ngModel)]="modalInvoice.OfferPriceNoCheck"
                [ngModelOptions]="{ standalone: true }"
                [disabled]="modalInvoice.AddOrView != 1"
              />
            </div>
          </div>

          <div
            class="col-sm-4 col-md-2 col-lg-1 mb-0"
            style="padding: 0 !important"
            *ngIf="showPrice && load_OfferPrices.length > 0"
          >
            <div class="form-group">
              <label for="OfferPriceNo" class="text-right col-form-label block">
                {{ "OfferPrice" | translate }}
              </label>
              <ng-select
                style="min-width: 79px !important"
                class="w-full p-0"
                style="min-width: max-content"
                id="OfferPriceNo"
                name="OfferPriceNo"
                placeholder="{{ 'Chose' | translate }}"
                (change)="offerpriceChange()"
                [(ngModel)]="modalInvoice.OfferPriceNo"
                [ngModelOptions]="{ standalone: true }"
                [disabled]="modalInvoice.AddOrView != 1"
              >
                <ng-option
                  *ngFor="let user of load_OfferPrices"
                  [value]="user.id"
                  >{{ user.name }}</ng-option
                >
              </ng-select>
            </div>
          </div>
          <div class="col-sm-4 col-md-2 col-lg-1 mb-3" *ngIf="!showPrice">
            <span style="color: red"> {{ "shifta" | translate }}</span>
          </div>
          <div class="col-sm-6 col-md-3 col-lg-3 mb-0">
            <div class="form-group">
              <label for="StorehouseId" class="text-right col-form-label block">
                {{ "Storehouse" | translate }}</label
              >
              <div class="flex">
                <ng-select
                class="w-full p-0"
                placeholder="{{ 'Chose' | translate }}"
                [(ngModel)]="modalInvoice.storehouseId"
                [ngModelOptions]="{ standalone: true }"
                [disabled]="modalInvoice.AddOrView != 1"
                name="storehouseId"
                >
                  <ng-option *ngFor="let user of Storehouse" [value]="user.id">{{
                    user.name
                  }}</ng-option>
                </ng-select>
                <button
                  type="button"
                  [disabled]="modalInvoice.AddOrView != 1"
                  class="btn bg-base text-white"
                  style="padding: 5px 10px"
                  (click)="open(StorehouseModal)"
                >
                  <i class="fa fa-plus"></i>
                </button>
              </div>
            </div>
          </div>
        </div>

        <div class="row mb-3">
          <h3
            class="flex items-center justify-start fw-bold"
            style="display: none"
          >
            {{ "services" | translate }}
            <button
              *ngIf="modalInvoice.AddOrView == 1"
              type="button "
              class="add-btn mx-2"
              (click)="addInvoiceRow()"
            >
              <i class="fa fa-plus"></i>
            </button>
          </h3>
          <div
            class="editable shadow mb-2 block customTable"
            style="overflow: auto"
          >
            <table
              class="table table-responsive table-striped table-bordered text-center"
              style="
                vertical-align: middle;
                font-size: 14px;
                min-width: max-content;
              "
            >
              <thead
                class="bg-base text-white"
                style="line-height: 30px; font-size: 13px"
              >
                <tr>
                  <th>{{ "ServiceNo" | translate }}</th>
                  <th style="width: 30% !important">
                    {{ "ServiceName" | translate }}
                  </th>
                  <th>{{ "Unit" | translate }}</th>
                  <th>{{ "Quantity" | translate }}</th>
                  <th>{{ "price" | translate }}</th>
                  <th>{{ "Discount" | translate }}</th>
                  <th>{{ "discountPercentage" | translate }}</th>
                  <th>{{ "totalBeforeTax" | translate }}</th>
                  <th>{{ "VATTax" | translate }}</th>
                  <th>{{ "Net_taxes" | translate }}</th>
                  <th>{{ "delete" | translate }}</th>
                </tr>
              </thead>
              <tbody>
                <tr
                  *ngFor="let item of InvoiceDetailsRows; let i = index"
                  style="line-height: 5px"
                >
                  <td>{{ item.idRow }}</td>
                  <td
                    (click)="
                      modalInvoice.AddOrView == 1 &&
                        open(
                          servicesListModal,
                          null,
                          'servicesList',
                          item.idRow
                        )
                    "
                  >
                    <input
                      type="text"
                      name="os-name{{ item.idRow }}"
                      [(ngModel)]="item.accountJournaltxt"
                      readonly
                    />
                  </td>
                  <td>
                    <input
                      type="text"
                      name="os-Unit{{ item.idRow }}"
                      [(ngModel)]="item.UnitConst"
                      disabled
                    />
                  </td>
                  <td>
                    <input
                      type="number"
                      min="0"
                      name="os-Qty{{ item.idRow }}"
                      [(ngModel)]="item.QtyConst"
                      [disabled]="modalInvoice.AddOrView != 1"
                      (keyup)="CalculateTotal2(1)"
                    />
                  </td>
                  <td>
                    <input
                      type="number"
                      min="0"
                      name="os-Amount{{ item.idRow }}"
                      [(ngModel)]="item.Amounttxt"
                      [disabled]="modalInvoice.AddOrView != 1"
                      (keyup)="CalculateTotal2(1)"
                    />
                  </td>
                  <td>
                    <input
                      type="number"
                      min="0"
                      name="os-DiscountValue{{ item.idRow }}"
                      [(ngModel)]="item.DiscountValueConst"
                      [disabled]="modalInvoice.AddOrView != 1"
                      (keyup)="CalculateTotal2(1)"
                    />
                  </td>
                  <td>
                    <input
                      type="number"
                      min="0"
                      name="os-DiscountPercentage{{ item.idRow }}"
                      [(ngModel)]="item.DiscountPercentageConst"
                      [disabled]="modalInvoice.AddOrView != 1"
                      (keyup)="CalculateTotal2(2)"
                    />
                  </td>
                  <td>
                    <input
                      type="text"
                      name="os-AmountBefore{{ item.idRow }}"
                      [(ngModel)]="item.AmountBeforeTaxtxt"
                      [disabled]="modalInvoice.AddOrView != 1"
                      readonly
                    />
                  </td>
                  <td>
                    <input
                      type="text"
                      name="os-taxAmount{{ item.idRow }}"
                      [(ngModel)]="item.taxAmounttxt"
                      [disabled]="modalInvoice.AddOrView != 1"
                      readonly
                    />
                  </td>
                  <td>
                    <input
                      type="text"
                      name="os-TotalAmount{{ item.idRow }}"
                      [(ngModel)]="item.TotalAmounttxt"
                      [disabled]="modalInvoice.AddOrView != 1"
                      readonly
                    />
                  </td>

                  <td class="flex">
                    <button
                      title=""
                      class="p-2 bg-orange-100 hover:bg-orange-500 rounded-lg duration-300 hover:text-white w-10"
                      style="margin-inline-end: 6px"
                      (click)="
                        open(
                          serviceDetailsModal_Invoice,
                          item,
                          'serviceDetails_Invoice'
                        )
                      "
                    >
                      <i class="fa-solid fa-info"></i>
                    </button>
                    <button
                      *ngIf="modalInvoice.AddOrView == 1"
                      (click)="
                        RemoveServicesparent_invoice(item);
                        deleteInvoiceRow(item.idRow)
                      "
                      class="p-2 bg-red-100 hover:bg-red-500 rounded-lg duration-300 hover:text-white w-10"
                    >
                      <i class="fa-solid fa-trash-can"></i>
                    </button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>

          <div class="row">
            <div class="col-md-6">
              <div class="box w-100 p-3">
                <div>
                  <label for="include_tax">{{ "tax type" | translate }}</label>
                  <ng-select
                    class="w-100"
                    placeholder="{{ 'Chose' | translate }}"
                    name="include_tax"
                    [(ngModel)]="modalInvoice.taxtype"
                    [ngModelOptions]="{ standalone: true }"
                    [disabled]="modalInvoice.AddOrView != 1"
                    [clearable]="false"
                    (change)="taxtypeChange()"
                  >
                    <ng-option [value]="2">{{
                      "Excluding tax" | translate
                    }}</ng-option>
                    <ng-option [value]="3">{{
                      "Taxes included" | translate
                    }}</ng-option>
                  </ng-select>
                </div>

                <div>
                  <label for="paid" class="text-right col-form-label block">
                    {{ "paid" | translate }}
                  </label>
                  <input
                    id="paid"
                    required
                    class="form-control bg-green"
                    type="text"
                    [(ngModel)]="modalInvoice.PaidValue"
                    [ngModelOptions]="{ standalone: true }"
                    [disabled]="modalInvoice.AddOrView != 1"
                    (keyup)="checkRemainder()"
                  />
                </div>

                <div>
                  <label for="remaining">{{ "remaining" | translate }}</label>
                  <input
                    type="text"
                    id="remaining"
                    name="remaining"
                    class="form-control bg-red"
                    [(ngModel)]="modalInvoice.remainder"
                    [ngModelOptions]="{ standalone: true }"
                    disabled
                  />
                </div>
              </div>

              <div class="d-flex me-3">
                <input
                  type="checkbox"
                  name="printBankAccount"
                  id="printBankAccount"
                  [(ngModel)]="modalInvoice.printBankAccount"
                  [ngModelOptions]="{ standalone: true }"
                  [disabled]="modalInvoice.AddOrView != 1"
                />
                <label for="date" class="mx-2">{{
                  "hideAccount" | translate
                }}</label>
              </div>

              <div class="form-group row me-3">
                <label for="Statement" class="col-sm-2 col-form-label">{{
                  "Statement" | translate
                }}</label>
                <div class="col-sm-10">
                  <input
                    [disabled]="modalInvoice.AddOrView != 1"
                    type="text"
                    id="Statement"
                    name="Statement"
                    class="form-control"
                    placeholder="{{ 'Statement' | translate }}"
                    [(ngModel)]="modalInvoice.InvoiceNotes"
                    [ngModelOptions]="{ standalone: true }"
                  />
                </div>
              </div>

              <div class="form-group row me-3">
                <label for="theNotes" class="col-sm-2 col-form-label">{{
                  "theNotes" | translate
                }}</label>
                <div class="col-sm-10">
                  <input
                    [disabled]="modalInvoice.AddOrView != 1"
                    type="text"
                    id="theNotes"
                    name="theNotes"
                    class="form-control"
                    placeholder="{{ 'theNotes' | translate }}"
                    [(ngModel)]="modalInvoice.Notes"
                    [ngModelOptions]="{ standalone: true }"
                  />
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="box w-100 px-2 py-2 mx-3">
                <div>
                  <label
                    for="totalAmount"
                    class="text-right col-form-label block"
                  >
                    {{ "totalAmount" | translate }}
                  </label>
                  <input
                    id="totalAmount"
                    required
                    class="form-control"
                    type="text"
                    [(ngModel)]="modalInvoice.totalAmount"
                    [ngModelOptions]="{ standalone: true }"
                    disabled
                  />
                </div>
                <div>
                  <label
                    for="TotalDiscount"
                    class="text-right col-form-label block"
                  >
                    {{ "TotalDiscount" | translate }}
                  </label>
                  <input
                    id="TotalDiscount"
                    required
                    class="form-control"
                    type="text"
                    [(ngModel)]="modalInvoice.discounMoneytVal"
                    [ngModelOptions]="{ standalone: true }"
                    disabled
                  />
                </div>

                <div>
                  <label
                    for="netAmount"
                    class="text-right col-form-label block"
                  >
                    {{ "netAmount" | translate }}
                  </label>
                  <input
                    id="netAmount"
                    required
                    class="form-control"
                    type="text"
                    [(ngModel)]="modalInvoice.totalWithDiscount"
                    [ngModelOptions]="{ standalone: true }"
                    disabled
                  />
                </div>

                <div>
                  <label for="AllTotal" class="text-right col-form-label block">
                    {{ "AllTotal" | translate }}
                  </label>
                  <input
                    id="AllTotal"
                    required
                    class="form-control"
                    type="text"
                    [(ngModel)]="modalInvoice.total_"
                    [ngModelOptions]="{ standalone: true }"
                    disabled
                  />
                </div>

                <div>
                  <label for="netBill">{{ "netBill" | translate }}</label>
                  <input
                    type="text"
                    id="netBill"
                    name="netBill"
                    class="form-control"
                    [(ngModel)]="modalInvoice.VoucherValue"
                    [ngModelOptions]="{ standalone: true }"
                    disabled
                  />
                </div>

                <div>
                  <label
                    for="TotalTaxes"
                    class="text-right col-form-label block"
                  >
                    {{ "TotalTaxes" | translate }}
                  </label>
                  <input
                    id="TotalTaxes"
                    required
                    class="form-control bg-yellow"
                    type="text"
                    [(ngModel)]="modalInvoice.taxAmountLbl"
                    [ngModelOptions]="{ standalone: true }"
                    disabled
                  />
                </div>

                <div>
                  <label for="CreditNoteTotal">{{
                    "CreditNoteTotal" | translate
                  }}</label>
                  <input
                    type="text"
                    id="CreditNoteTotal"
                    name="CreditNoteTotal"
                    class="form-control"
                    [(ngModel)]="modalInvoice.CreditNotiLbl"
                    [ngModelOptions]="{ standalone: true }"
                    disabled
                  />
                </div>

                <div style="display: none">
                  <label for="TotalDebtorNotice">{{
                    "TotalDebtorNotice" | translate
                  }}</label>
                  <input
                    type="text"
                    id="TotalDebtorNotice"
                    name="TotalDebtorNotice"
                    class="form-control"
                    [(ngModel)]="modalInvoice.DepitNotiLbl"
                    [ngModelOptions]="{ standalone: true }"
                    disabled
                  />
                </div>

                <div>
                  <label
                    for="Net_taxes"
                    class="text-right col-form-label block"
                  >
                    {{ "Net_taxes" | translate }}
                  </label>
                  <input
                    id="Net_taxes"
                    required
                    class="form-control bg-black"
                    type="text"
                    [(ngModel)]="modalInvoice.TotalVoucherValueLbl"
                    [ngModelOptions]="{ standalone: true }"
                    disabled
                  />
                </div>
              </div>
            </div>
          </div>
        </div>
      </form>

      <!-- footer -->
    </ng-container>

    <div class="d-flex justify-content-end" *ngIf="modalInvoice.AddOrView == 1">
      <div class="pt-3 m-3" *ngIf="invoicepop != 2">
        <button
          [disabled]="disableButtonSave_Invoice"
          *ngIf="userG?.userPrivileges.includes(13100107)"

          (click)="
            modalInvoice.WhichClick = 2;
            open(
              SaveInvoiceConfirmModal,
              null,
              'SaveInvoiceConfirmModal',
              null,
              modal
            )
          "
          class="btn text-white"
          style="background-color: var(--base-color)"
        >
          {{ "Save_CarryOver" | translate }}
        </button>
      </div>

      <div class="pt-3 m-3" *ngIf="invoicepop != 2">
        <button (click)="modal?.dismiss()" class="btn btn-secondary">
          {{ "close" | translate }}
        </button>
      </div>
      <div class="pt-3 m-3" *ngIf="invoicepop == 2">
        <button (click)="modal?.dismiss()" class="btn btn-secondary">
          {{ "continuou" | translate }}
        </button>
      </div>

      <div class="pt-3 m-3" *ngIf="invoicepop != 2">
        <button
          [disabled]="disableButtonSave_Invoice"
          (click)="
            modalInvoice.WhichClick = 1;
            open(
              SaveInvoiceConfirmModal,
              null,
              'SaveInvoiceConfirmModal',
              null,
              modal
            )
          "
          class="btn text-white"
          style="background-color: var(--base-color)"
        >
          {{ "save" | translate }}
        </button>
      </div>
    </div>
  </div>
</ng-template>

<!-- servicesListModal -->
<ng-template #servicesListModal let-modal>
  <div
    style="background-color: var(--base-color)"
    class="modal-header text-white flex justify-between items-center"
  >
    <h4 class="m-0">
      <span class="text-2xl">{{ "servicesList" | translate }}</span>
    </h4>
    <button
      type="button"
      class="text-2xl text-white m-0"
      (click)="modal.dismiss()"
    >
      <i class="fa-solid fa-xmark"></i>
    </button>
  </div>
  <div class="modal-body" style="overflow-y: scroll; max-height: 600px">
    <mat-form-field class="w-full">
      <mat-label>{{ "search" | translate }}</mat-label>
      <input matInput (keyup)="applyFilterServiceList($event)" #input />
    </mat-form-field>

    <div class="table">
      <table
        mat-table
        [dataSource]="serviceListDataSource"
        class="mat-elevation-z8 table table-responsive table-striped table-bordered text-center"
        style="vertical-align: middle; font-size: 14px"
      >
        <!-- Name Column -->
        <ng-container matColumnDef="name">
          <th mat-header-cell *matHeaderCellDef>
            {{ "ServiceName" | translate }}
          </th>
          <td mat-cell *matCellDef="let element">{{ element.servicesName }}</td>
        </ng-container>

        <!-- price Column -->
        <ng-container matColumnDef="price">
          <th mat-header-cell *matHeaderCellDef>{{ "price" | translate }}</th>
          <td mat-cell *matCellDef="let element">{{ element.amount }}</td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="servicesListdisplayedColumns"></tr>
        <tr
          mat-row
          *matRowDef="
            let row;
            let i = index;
            columns: servicesListdisplayedColumns
          "
          (dblclick)="setServiceRowValue(row); modal.dismiss()"
        ></tr>

        <!-- Row shown when there is no matching data. -->
        <tr class="mat-row" *matNoDataRow>
          <td class="mat-cell" colspan="4">
            {{ "noResult" | translate }} "{{ input.value }}"
          </td>
        </tr>
      </table>
      <mat-paginator
        #paginatorServices
        [pageSizeOptions]="[10, 25, 100, serviceListDataSource.data.length]"
      >
      </mat-paginator>
    </div>

    <div class="text-end mt-2">
      <button (click)="modal?.dismiss()" class="btn btn-secondary">
        {{ "Back" | translate }}
      </button>
    </div>
  </div>
</ng-template>

<!-- --------------Add Services------------------- -->
<!-- addSerivceModal / edit -->
<ng-template #addSerivceModal let-modal>
  <div
    style="background-color: var(--base-color)"
    class="modal-header text-white flex justify-between items-center"
  >
    <h4 class="m-0">
      <span class="text-2xl">
        {{ "AddNewService" | translate }}
      </span>
    </h4>
    <button
      type="button"
      class="text-2xl text-white m-0"
      (click)="modal.dismiss()"
    >
      <i class="fa-solid fa-xmark"></i>
    </button>
  </div>
  <!-- modal-body -->
  <div class="modal-body">
    <form [formGroup]="SerivceModalForm" >
      <div class="row items-center">
        <div class="col-sm-6 col-md-3 mb-3" style="display: none;">
          <div class="form-group">
            <label class="col-form-label">
              {{ "Project Type" | translate }}</label
            >
            <span class="text-danger">*</span>
            <ng-select
              name="Project Type"
              class="w-full p-0"
              placeholder="{{ 'Chose' | translate }}" autocomplete="off"
              formControlName="ProjectType"
              (change)="ChangeProjectType()"
            >
              <ng-option *ngFor="let user of ProjectTypeList" [value]="user.id">{{
                user.name
              }}</ng-option>
            </ng-select>
            <div class="fieldrequired" *ngIf="
                      SerivceModalForm.controls['ProjectType']?.hasError('required') &&
                      SerivceModalForm.controls['ProjectType'].touched
                    ">
                    {{ "This field is required" | translate }}
                  </div>
          </div>
        </div>

        <div class="col-sm-6 col-md-3 mb-3" style="display: none;">
          <button
            type="button"

            class="btn btn-success  mt-5 mb-2"
            (click)="open(NewProjectType , null , 'NewProjectType')"
            >
            {{ "AddNewProjectType" | translate }}
            <i class="fa-solid fa-plus"></i>
          </button>
        </div>

        <div class="col-sm-6 col-md-3 mb-3" style="display: none;">
          <div class="form-group">
            <label class="col-form-label">
              {{ "Subproject type" | translate }}</label
            >
            <span class="text-danger">*</span>
            <ng-select
              name="Subproject type"
              class="w-full p-0"
              placeholder="{{ 'Chose' | translate }}"
              formControlName="SubprojectType" autocomplete="off"
            >

              <ng-option *ngFor="let user of SubprojecttypeList" [value]="user.id">{{
                user.name
              }}</ng-option>
            </ng-select>
            <div class="fieldrequired" *ngIf="
                      SerivceModalForm.controls['SubprojectType']?.hasError('required') &&
                      SerivceModalForm.controls['SubprojectType'].touched
                    ">
                    {{ "This field is required" | translate }}
                  </div>
          </div>
        </div>

        <div class="col-sm-6 col-md-3 mb-3" style="display: none;">
          <button
            type="button"

            class="btn btn-success  mt-5 mb-2"
            (click)="open(SubprojectTypeModal , null , 'SubprojectTypeModal')"
            >
            {{ "AddNewSubgenre" | translate }}
            <i class="fa-solid fa-plus"></i>
          </button>
        </div>
        <div class="col-sm-6 col-md-3 mb-3" *ngIf="this.SerivceModalForm.controls['ProjectType'].value == 1">
          <div class="form-group">
            <label class="col-form-label">
              {{ "Packages" | translate }}</label
            >
            <ng-select
              name="Packages"
              class="w-full p-0"
              placeholder="{{ 'Chose' | translate }}"
              formControlName="PackageId" autocomplete="off"
            >

              <ng-option *ngFor="let user of packageList" [value]="user.id">{{
                user.name
              }}</ng-option>
            </ng-select>
            <!-- <div class="fieldrequired" *ngIf="
                      SerivceModalForm.controls['PackageId']?.hasError('required') &&
                      SerivceModalForm.controls['PackageId'].touched
                    ">
                    {{ "This field is required" | translate }}
                  </div> -->
          </div>
        </div>

        <div class="col-sm-6 col-md-3 mb-3" style="display: none;">
          <button
            type="button"

            class="btn btn-success  mt-5 mb-2"
            (click)="open(PackagesModal , null , 'PackagesModal')"
            >
            {{ "AddNewPackages" | translate }}
            <i class="fa-solid fa-plus"></i>
          </button>
        </div>
        <!-- 2 -->
        <div class="col-sm-6 col-md-3 mb-3">
          <div class="form-group">
            <label class="col-form-label">
              {{ "ServiceName" | translate }}</label
            >
            <span class="text-danger">*</span>
            <input
              name="ServiceName"
              placeholder="{{ 'ServiceName' | translate }}"
              type="text"
              class="form-control"
              formControlName="ServiceName" autocomplete="off"
            />
            <div class="fieldrequired" *ngIf="
                      SerivceModalForm.controls['ServiceName']?.hasError('required') &&
                      SerivceModalForm.controls['ServiceName'].touched
                    ">
                    {{ "This field is required" | translate }}
                  </div>
          </div>
        </div>

        <div class="col-sm-6 col-md-3 mb-3">
          <div class="form-group">
            <label class="col-form-label">
              {{ "ServiceNameEN" | translate }}</label
            >
            <span class="text-danger">*</span>
            <input
              name="ServiceNameEN"
              placeholder="{{ 'ServiceNameEN' | translate }}"
              type="text"
              class="form-control"
              formControlName="ServiceNameEN" autocomplete="off"
            />
            <div class="fieldrequired" *ngIf="
                      SerivceModalForm.controls['ServiceNameEN']?.hasError('required') &&
                      SerivceModalForm.controls['ServiceNameEN'].touched
                    ">
                    {{ "This field is required" | translate }}
                  </div>
          </div>
        </div>

        <div class="col-sm-6 col-md-2 mb-3" >
          <div class="form-group">
            <label class="col-form-label">
              {{ "ServiceType" | translate }}</label
            >
            <span class="text-danger">*</span>
            <div class="flex">
              <ng-select
              name="ServiceType"
              class="w-full p-0"
              placeholder="{{ 'Chose' | translate }}" autocomplete="off"
              formControlName="ServiceType"
            >
              <ng-option *ngFor="let user of ServiceType" [value]="user.id">{{
                user.name
              }}</ng-option>
            </ng-select>
            <button
            type="button"
            class="btn bg-base text-white"
            style="padding: 5px 10px"
            (click)="open(ServiceTypeModal)"
            >
            <i class="fa fa-plus"></i>
           </button>
            <div class="fieldrequired" *ngIf="
                      SerivceModalForm.controls['ServiceType']?.hasError('required') &&
                      SerivceModalForm.controls['ServiceType'].touched
                    ">
                    {{ "This field is required" | translate }}
           </div>
            </div>
          </div>
        </div>

        <div class="col-sm-1 col-md-1 mb-3" >

        </div>

        <div class="col-sm-6 col-md-3 mb-3" *ngIf="SerivceModalForm.controls['PackageId'].value ==  null">
          <div class="form-group">
            <label class="col-form-label"> {{ "PriceRev" | translate }}</label>
            <span class="text-danger">*</span>
            <div class="d-flex">
              <input
                name="price"
                placeholder="{{ 'PriceRev' | translate }}"
                type="text"
                class="form-control" autocomplete="off"
                formControlName="amount"
              />
              <SPAN class="me-1"> {{ "RS" | translate }}</SPAN>
            </div>
            <div class="fieldrequired" *ngIf="
                      SerivceModalForm.controls['amount']?.hasError('required') &&
                      SerivceModalForm.controls['amount'].touched
                    ">
                    {{ "This field is required" | translate }}
                  </div>
          </div>
        </div>

        <!-- 3 -->
        <div class="col-sm-6 col-md-3 mb-3" style="display: none;">
          <div class="form-group">
            <label class="col-form-label">
              {{ "costCenter" | translate }}</label
            >
            <ng-select
              name="costCenter"
              class="w-full p-0"
              placeholder="{{ 'Chose' | translate }}"
              formControlName="costCenter" autocomplete="off"
            >
              <ng-option *ngFor="let user of CostCenterSelectlist" [value]="user.id">{{
                user.name
              }}</ng-option>
            </ng-select>
          </div>
        </div>
        <div class="col-sm-6 col-md-3 mb-3">
          <div class="form-group">
            <label class="col-form-label">
              {{ "AddServiceDetails" | translate }}</label
            >
          <button
            type="button"

            class="btn btn-outline-success "
            (click)="open(costCenterModal ,null , 'costCenterModal')"
            >
            {{ "AddServiceDetails" | translate }}
            <i class="fa-solid fa-plus"></i>
          </button>
        </div>
      </div>

        <div class="col-sm-6 col-md-3 mb-3">
          <div class="form-group">
            <label class="col-form-label">
              {{ "ServiceRevenueAccount" | translate }}</label
            >
            <span class="text-danger">*</span>
            <ng-select
              name="ServiceRevenueAccount"
              class="w-full p-0"
              placeholder="{{ 'Chose' | translate }}" autocomplete="off"
              formControlName="ServiceRevenueAccount"
            >
              <ng-option *ngFor="let user of ServiceAccountlist" [value]="user.id">{{
                user.name
              }}</ng-option>
            </ng-select>
            <div class="fieldrequired" *ngIf="
                      SerivceModalForm.controls['ServiceRevenueAccount']?.hasError('required') &&
                      SerivceModalForm.controls['ServiceRevenueAccount'].touched
                    ">
                    {{ "This field is required" | translate }}
                  </div>
          </div>
        </div>

        <div class="col-sm-6 col-md-3 mb-3" *ngIf="SerivceModalForm.controls['PackageId'].value ==  null">
          <div class="form-group">
            <label class="col-form-label"> {{ "PricePur" | translate }}</label>
            <span class="text-danger">*</span>
            <div class="d-flex">
              <input
                name="AmountPur"
                placeholder="{{ 'PricePur' | translate }}"
                type="text"
                class="form-control" autocomplete="off"
                formControlName="AmountPur"
              />
              <SPAN class="me-1"> {{ "RS" | translate }}</SPAN>
            </div>
            <div class="fieldrequired" *ngIf="
                      SerivceModalForm.controls['AmountPur']?.hasError('required') &&
                      SerivceModalForm.controls['AmountPur'].touched
                    ">
                    {{ "This field is required" | translate }}
                  </div>
          </div>
        </div>

        <div class="col-sm-6 col-md-3 mb-3">
          <div class="form-group">
            <label class="col-form-label">
              {{ "ServicePurAccount" | translate }}</label
            >
            <span class="text-danger">*</span>
            <ng-select
              name="AccountIdPur"
              class="w-full p-0"
              placeholder="{{ 'Chose' | translate }}" autocomplete="off"
              formControlName="AccountIdPur"
            >
              <ng-option *ngFor="let user of ServiceAccountPurlist" [value]="user.id">{{
                user.name
              }}</ng-option>
            </ng-select>
            <div class="fieldrequired" *ngIf="
                      SerivceModalForm.controls['AccountIdPur']?.hasError('required') &&
                      SerivceModalForm.controls['AccountIdPur'].touched
                    ">
                    {{ "This field is required" | translate }}
                  </div>
          </div>
        </div>

        <div class="col-sm-6 col-md-3 mb-3">
          <div class="form-group">
            <label class="col-form-label">
              {{ "Beginningbalance" | translate }}</label
            >
            <span class="text-danger">*</span>
            <input
              name="Begbalance"
              placeholder="{{ 'Beginningbalance' | translate }}"
              type="text"
              class="form-control"
              formControlName="Begbalance" autocomplete="off"
            />
            <div class="fieldrequired" *ngIf="
                      SerivceModalForm.controls['Begbalance']?.hasError('required') &&
                      SerivceModalForm.controls['Begbalance'].touched
                    ">
                    {{ "This field is required" | translate }}
                  </div>
          </div>
        </div>

        <div class="col-sm-6 col-md-3 mb-3">
          <div class="form-group">
            <label class="col-form-label">
              {{ "SerialNumber" | translate }}</label
            >
            <span class="text-danger">*</span>
            <input
              name="SerialNumber"
              placeholder="{{ 'SerialNumber' | translate }}"
              type="text"
              class="form-control"
              formControlName="SerialNumber" autocomplete="off"
            />
            <div class="fieldrequired" *ngIf="
                      SerivceModalForm.controls['SerialNumber']?.hasError('required') &&
                      SerivceModalForm.controls['SerialNumber'].touched
                    ">
                    {{ "This field is required" | translate }}
                  </div>
          </div>
        </div>

        <div class="col-sm-6 col-md-3 mb-3">
          <div class="form-group">
            <label class="col-form-label">
              {{ "ItemCode" | translate }}</label
            >
            <span class="text-danger">*</span>
            <input
              name="ItemCode"
              placeholder="{{ 'ItemCode' | translate }}"
              type="text"
              class="form-control"
              formControlName="ItemCode" autocomplete="off"
            />
            <div class="fieldrequired" *ngIf="
                      SerivceModalForm.controls['ItemCode']?.hasError('required') &&
                      SerivceModalForm.controls['ItemCode'].touched
                    ">
                    {{ "This field is required" | translate }}
                  </div>
          </div>
        </div>
        <div class="col-sm-6 col-md-2 mb-3">
          <div class="form-group">
            <label for="StorehouseId" class="text-right col-form-label block">
              {{ "Storehouse" | translate }}</label
            >
            <div class="flex">
              <ng-select
              class="w-full p-0"
              placeholder="{{ 'Chose' | translate }}"
              formControlName="storehouseId"
              name="storehouseId"
              >
                <ng-option *ngFor="let user of Storehouse" [value]="user.id">{{
                  user.name
                }}</ng-option>
              </ng-select>
              <button
                type="button"
                class="btn bg-base text-white"
                style="padding: 5px 10px"
                (click)="open(StorehouseModal)"
              >
                <i class="fa fa-plus"></i>
              </button>
            </div>
          </div>
        </div>

      </div>
    </form>
    <p class="w-fit bg-red-100 text-danger mx-auto my-3 p-1">
      {{ "AttentionAddService" | translate }}
    </p>
    <div
      class="flex gap-2 justify-end pt-3 border-t border-neutral-300 col-span-1 md:col-span-2 mt-2"
    >
    <button class="btn bg-base text-white" type="submit"(click)="SaveServicePriceWithDetails(modal)"   [disabled]='
    this.SerivceModalForm.controls["ServiceName"].value ==null|| this.SerivceModalForm.controls["ServiceName"].value ==""||
    this.SerivceModalForm.controls["ServiceNameEN"].value ==null|| this.SerivceModalForm.controls["ServiceNameEN"].value ==""||
    this.SerivceModalForm.controls["AmountPur"].value ==null|| this.SerivceModalForm.controls["AmountPur"].value ==""||
    this.SerivceModalForm.controls["amount"].value ==null|| this.SerivceModalForm.controls["amount"].value ==""||
    this.SerivceModalForm.controls["ServiceRevenueAccount"].value ==null || 
    this.SerivceModalForm.controls["ItemCode"].value ==null || this.SerivceModalForm.controls["ItemCode"].value ==""||
    this.SerivceModalForm.controls["AccountIdPur"].value ==null'>
        {{ "Save" | translate }}
      </button>
      <button (click)="modal?.dismiss()" class="btn btn-secondary">
        {{ "close" | translate }}
      </button>
    </div>
  </div>
</ng-template>

<!-- NewProjectType -->
<ng-template #NewProjectType let-modal>
  <div
    style="background-color: var(--base-color)"
    class="modal-header text-white flex justify-between items-center"
  >
    <h4 class="m-0">
      <span class="text-2xl">
        <span>{{ "NewProjectType" | translate }}</span>
        <!-- <span *ngIf="modalDetails?.type == 'newSub'">{{ "NewSubprojectType" | translate }}</span>
        <span *ngIf="modalDetails?.type == 'ServiceDetails'">{{ "Add New Item" | translate }}</span> -->
      </span>
    </h4>
    <button
      type="button"
      class="text-2xl text-white m-0"
      (click)="modal.dismiss()"
    >
      <i class="fa-solid fa-xmark"></i>
    </button>
  </div>
  <div class="modal-body max-h-100 overflow-x-scroll overflow-y-scroll p-4">
    <form class="" #smsForm="ngForm">
      <div class="row align-items-end mb-4 mx-3">
        <!-- 1 line -->

        <div class="col-sm-6 col-md-3 col-lg-6 mb-0 mb-sm-3">
          <div class="form-group">
            <label for="nameAr" class="text-right col-form-label block">
              {{ "nameAr" | translate }}
              <span class="text-danger">*</span>
            </label>
            <input
              required
              class="form-control"
              autocomplete="off"
              [placeholder]="
                ('Write' | translate) + ' ' + ('nameAr' | translate)
              "
              [(ngModel)]="ProjectTypenameAr"
              type="text"
              [ngModelOptions]="{ standalone: true }"
            />
          </div>
        </div>
        <div class="col-sm-6 col-md-3 col-lg-6 mb-0 mb-sm-3">
          <div class="form-group">
            <label class="text-right col-form-label block">
              {{ "nameEn" | translate }}
              <span class="text-danger">*</span></label
            >
            <input
              class="form-control"
              [(ngModel)]="ProjectTypenameEn"
              autocomplete="off"
              type="text"
              [ngModelOptions]="{ standalone: true }"
              [placeholder]="
                ('Write' | translate) + ' ' + ('nameEn' | translate)
              "
            />
          </div>
        </div>

        <div class="col-sm-6 col-md-3 col-lg-12 mb-0 mb-sm-3 text-center">
          <button
            type="button"
            (click)="SaveProjectType()"
            [disabled]="ProjectTypenameEn == null || ProjectTypenameAr == null"
            class="flex gap-1 btn text-white mb-3 col-md-2 me-3"
            style="background-color: var(--base-color)"
          >
            {{ "save" | translate }}
          </button>

          <button
            type="button"
            (click)="modal.dismiss()"
            class="flex gap-1 btn btn-secondary mb-3 col-md-2"
          >
            {{ "close" | translate }}
          </button>
        </div>

        <div class="col-sm-6 col-md-3 col-lg-12 mb-0 mb-sm-3 text-center">
          <input
            name="dateCheck_transfer"
            (keyup)="applyFilterProjectType($event)"
            placeholder="{{ 'search' | translate }}"
            type="text"
            class="form-control"
          />
        </div>
      </div>

      <div class="editable shadow mb-4">
        <table
          class="table table-responsive table-striped table-bordered text-center"
          style="vertical-align: middle; font-size: 14px"
        >
          <thead
            class="bg-base text-white"
            style="line-height: 30px; font-size: 13px"
          >
            <tr>
              <th>{{ "nameAr" | translate }}</th>
              <th>{{ "nameEn" | translate }}</th>
              <th>{{ "operations" | translate }}</th>
              <!-- <th   *ngIf="modalDetails?.type == 'newSub'" >{{ "ApproximatePeriod" | translate }}</th> -->
            </tr>
          </thead>
          <tbody>
            <tr
              *ngFor="let item of AllProjectTypelist; let i = index"
              style="line-height: 5px"
            >
              <td>{{ item.nameAr }}</td>
              <td>{{ item.nameEn }}</td>
              <td>
                <button
                  (click)="updateProjectType(item)"
                  class="p-2 bg-orange-100 hover:bg-orange-500 rounded-lg duration-300 hover:text-white w-10"
                >
                  <i class="fa-regular fa-pen-to-square"></i>
                </button>

                <button
                  class="p-2 bg-red-100 hover:bg-red-500 rounded-lg duration-300 hover:text-white w-10 me-3"
                  (click)="
                    open(deleteProjectTypeModal, item, 'deleteProjectTypeModal')
                  "
                >
                  <i class="fa-solid fa-trash-can"></i>
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </form>
  </div>
</ng-template>

<!-- deleteProjectTypeModal -->
<ng-template #deleteProjectTypeModal let-modal>
  <div class="modal-body text-center">
    <p
      [translate]="'name'"
      [translateParams]="{
        ar: 'هل تريد حذف هذا العنصر ؟',
        en: 'Do you want to delete this item?'
      }"
    ></p>
    <div class="flex gap-2 justify-center">
      <button
        type="button"
        (click)="modal.dismiss()"
        mat-raised-button
        color="basic"
      >
        {{ "close" | translate }}
      </button>

      <button
        type="button"
        mat-raised-button
        color="warn"
        (click)="DeleteProjectType(modal)"
      >
        {{ "confirem" | translate }}
      </button>
    </div>
  </div>
</ng-template>

<!-- SubprojectTypeModal -->
<ng-template #SubprojectTypeModal let-modal>
  <div
    style="background-color: var(--base-color)"
    class="modal-header text-white flex justify-between items-center"
  >
    <h4 class="m-0">
      <span class="text-2xl">
        <span>{{ "NewSubprojectType" | translate }}</span>
        <!--  <span *ngIf="modalDetails?.type == 'ServiceDetails'">{{ "Add New Item" | translate }}</span> -->
      </span>
    </h4>
    <button
      type="button"
      class="text-2xl text-white m-0"
      (click)="modal.dismiss()"
    >
      <i class="fa-solid fa-xmark"></i>
    </button>
  </div>
  <div class="modal-body max-h-100 overflow-x-scroll overflow-y-scroll p-4">
    <form class="" #smsForm="ngForm">
      <div class="row align-items-end mb-4 mx-3">
        <!-- 1 line -->

        <div class="col-sm-6 col-md-3 col-lg-6 mb-0 mb-sm-3">
          <div class="form-group">
            <label for="nameAr" class="text-right col-form-label block">
              {{ "nameAr" | translate }}
              <span class="text-danger">*</span>
            </label>
            <input
              required
              class="form-control"
              autocomplete="off"
              [placeholder]="
                ('Write' | translate) + ' ' + ('nameAr' | translate)
              "
              [(ngModel)]="SubprojectTypenameAr"
              type="text"
              [ngModelOptions]="{ standalone: true }"
            />
          </div>
        </div>

        <div class="col-sm-6 col-md-3 col-lg-6 mb-0 mb-sm-3">
          <div class="form-group">
            <label class="text-right col-form-label block">
              {{ "nameEn" | translate }}
              <span class="text-danger">*</span></label
            >
            <input
              class="form-control"
              [(ngModel)]="SubprojectTypenameEn"
              autocomplete="off"
              type="text"
              [ngModelOptions]="{ standalone: true }"
              [placeholder]="
                ('Write' | translate) + ' ' + ('nameEn' | translate)
              "
            />
          </div>
        </div>
        <div class="col-sm-6 col-md-3 col-lg-6 mb-0 mb-sm-3">
          <div class="form-group">
            <label class="text-right col-form-label block">
              {{ "TimePeriodStr" | translate }}</label
            >
            <input
              class="form-control"
              [(ngModel)]="TimePeriodStr"
              autocomplete="off"
              type="text"
              [ngModelOptions]="{ standalone: true }"
              [placeholder]="
                ('Write' | translate) + ' ' + ('TimePeriodStr' | translate)
              "
            />
          </div>
        </div>

        <div class="col-sm-6 col-md-3 col-lg-12 mb-0 mb-sm-3 text-center">
          <button
            type="button"
            (click)="SaveSubprojectType()"
            [disabled]="
              SubprojectTypenameAr == null || SubprojectTypenameEn == null
            "
            class="flex gap-1 btn text-white mb-3 col-md-2 me-3"
            style="background-color: var(--base-color)"
          >
            {{ "save" | translate }}
          </button>

          <button
            type="button"
            (click)="modal.dismiss()"
            class="flex gap-1 btn btn-secondary mb-3 col-md-2"
          >
            {{ "close" | translate }}
          </button>
        </div>

        <div class="col-sm-6 col-md-3 col-lg-12 mb-0 mb-sm-3 text-center">
          <input
            name="dateCheck_transfer"
            (keyup)="applyFilterSubsByProjectTypeId($event)"
            placeholder="{{ 'search' | translate }}"
            type="text"
            class="form-control"
          />
        </div>
      </div>

      <div class="editable shadow mb-4">
        <table
          class="table table-responsive table-striped table-bordered text-center"
          style="vertical-align: middle; font-size: 14px"
        >
          <thead
            class="bg-base text-white"
            style="line-height: 30px; font-size: 13px"
          >
            <tr>
              <th>{{ "nameAr" | translate }}</th>
              <th>{{ "nameEn" | translate }}</th>
              <th>{{ "TimePeriodStr" | translate }}</th>
              <th>{{ "operations" | translate }}</th>
              <!-- <th   *ngIf="modalDetails?.type == 'newSub'" >{{ "ApproximatePeriod" | translate }}</th> -->
            </tr>
          </thead>
          <tbody>
            <tr
              *ngFor="
                let item of AllProjectSubsByProjectTypelist;
                let i = index
              "
              style="line-height: 5px"
            >
              <td>{{ item.nameAr }}</td>
              <td>{{ item.nameEn }}</td>
              <td>
                {{ item.timePeriodStr }}
              </td>
              <td>
                <button
                  (click)="updateSubprojectType(item)"
                  class="p-2 bg-orange-100 hover:bg-orange-500 rounded-lg duration-300 hover:text-white w-10"
                >
                  <i class="fa-regular fa-pen-to-square"></i>
                </button>

                <button
                  class="p-2 bg-red-100 hover:bg-red-500 rounded-lg duration-300 hover:text-white w-10 me-3"
                  (click)="
                    open(
                      deleteSubprojectTypeModal,
                      item,
                      'deleteSubprojectTypeModal'
                    )
                  "
                >
                  <i class="fa-solid fa-trash-can"></i>
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </form>
  </div>

  <!-- <div class="flex justify-end p-3">
    <button
      (click)="modal?.dismiss()"
      class="btn text-white"
      style="background-color: var(--base-color)"
    >
      {{ "save" | translate }}
    </button>

    <button class="btn me-2 btn-secondary">
      {{ "close" | translate }}
    </button>
  </div> -->
</ng-template>
<!-- deleteSubprojectTypeModal -->
<ng-template #deleteSubprojectTypeModal let-modal>
  <div class="modal-body text-center">
    <p
      [translate]="'name'"
      [translateParams]="{
        ar: 'هل تريد حذف هذا العنصر ؟',
        en: 'Do you want to delete this item?'
      }"
    ></p>
    <div class="flex gap-2 justify-center">
      <button
        type="button"
        (click)="modal.dismiss()"
        mat-raised-button
        color="basic"
      >
        {{ "close" | translate }}
      </button>

      <button
        type="button"
        mat-raised-button
        color="warn"
        (click)="DeleteProjectSubTypes(modal)"
      >
        {{ "confirem" | translate }}
      </button>
    </div>
  </div>
</ng-template>

<!-- PackagesModal -->
<ng-template #PackagesModal let-modal>
  <div
    style="background-color: var(--base-color)"
    class="modal-header text-white flex justify-between items-center"
  >
    <h4 class="m-0">
      <span class="text-2xl">
        <span>{{ "Packages" | translate }}</span>
      </span>
    </h4>
    <button
      type="button"
      class="text-2xl text-white m-0"
      (click)="modal.dismiss()"
    >
      <i class="fa-solid fa-xmark"></i>
    </button>
  </div>
  <div class="modal-body max-h-100 overflow-x-scroll overflow-y-scroll p-4">
    <form class="" #smsForm="ngForm">
      <div class="row align-items-end mb-4 mx-3">
        <!-- 1 line -->

        <div class="col-sm-6 col-md-3 col-lg-6 mb-0 mb-sm-3">
          <div class="form-group">
            <label for="nameAr" class="text-right col-form-label block">
              {{ "PackageName" | translate }}
              <span class="text-danger">*</span>
            </label>
            <input
              required
              class="form-control"
              autocomplete="off"
              [placeholder]="
                ('Write' | translate) + ' ' + ('PackageName' | translate)
              "
              [(ngModel)]="PackageName"
              type="text"
              [ngModelOptions]="{ standalone: true }"
            />
          </div>
        </div>

        <div class="col-sm-6 col-md-3 col-lg-6 mb-0 mb-sm-3">
          <div class="form-group">
            <label class="text-right col-form-label block">
              {{ "MeterPrice1" | translate }}
              <span class="text-danger">*</span></label
            >
            <input
              class="form-control"
              [(ngModel)]="MeterPrice1"
              autocomplete="off"
              type="text"
              [ngModelOptions]="{ standalone: true }"
              [placeholder]="
                ('Write' | translate) + ' ' + ('MeterPrice1' | translate)
              "
            />
          </div>
        </div>
        <div class="col-sm-6 col-md-3 col-lg-6 mb-0 mb-sm-3">
          <div class="form-group">
            <label class="text-right col-form-label block">
              {{ "MeterPrice2" | translate }}</label
            >
            <input
              class="form-control"
              [(ngModel)]="MeterPrice2"
              autocomplete="off"
              type="text"
              [ngModelOptions]="{ standalone: true }"
              [placeholder]="
                ('Write' | translate) + ' ' + ('MeterPrice2' | translate)
              "
            />
          </div>
        </div>
        <div class="col-sm-6 col-md-3 col-lg-6 mb-0 mb-sm-3">
          <div class="form-group">
            <label class="text-right col-form-label block">
              {{ "MeterPrice3" | translate }}</label
            >
            <input
              class="form-control"
              [(ngModel)]="MeterPrice3"
              autocomplete="off"
              type="text"
              [ngModelOptions]="{ standalone: true }"
              [placeholder]="
                ('Write' | translate) + ' ' + ('MeterPrice3' | translate)
              "
            />
          </div>
        </div>
        <div class="col-sm-6 col-md-3 col-lg-6 mb-0 mb-sm-3">
          <div class="form-group">
            <label class="text-right col-form-label block">
              {{ "PackageRatio1" | translate }}</label
            >
            <input
              class="form-control"
              [(ngModel)]="PackageRatio1"
              autocomplete="off"
              type="text"
              [ngModelOptions]="{ standalone: true }"
              [placeholder]="
                ('Write' | translate) + ' ' + ('PackageRatio1' | translate)
              "
            />
          </div>
        </div>
        <div class="col-sm-6 col-md-3 col-lg-6 mb-0 mb-sm-3">
          <div class="form-group">
            <label class="text-right col-form-label block">
              {{ "PackageRatio2" | translate }}</label
            >
            <input
              class="form-control"
              [(ngModel)]="PackageRatio2"
              autocomplete="off"
              type="text"
              [ngModelOptions]="{ standalone: true }"
              [placeholder]="
                ('Write' | translate) + ' ' + ('PackageRatio2' | translate)
              "
            />
          </div>
        </div>
        <div class="col-sm-6 col-md-3 col-lg-6 mb-0 mb-sm-3">
          <div class="form-group">
            <label class="text-right col-form-label block">
              {{ "PackageRatio3" | translate }}</label
            >
            <input
              class="form-control"
              [(ngModel)]="PackageRatio3"
              autocomplete="off"
              type="text"
              [ngModelOptions]="{ standalone: true }"
              [placeholder]="
                ('Write' | translate) + ' ' + ('PackageRatio3' | translate)
              "
            />
          </div>
        </div>
        <div class="col-sm-6 col-md-3 col-lg-12 mb-0 mb-sm-3 text-center">
          <button
            type="button"
            (click)="SavePackages()"
            [disabled]="
              PackageRatio3 == null ||
              PackageRatio2 == null ||
              PackageRatio1 == null ||
              MeterPrice3 == null ||
              MeterPrice2 == null ||
              MeterPrice1 == null ||
              PackageName == null
            "
            class="flex gap-1 btn text-white mb-3 col-md-2 me-3"
            style="background-color: var(--base-color)"
          >
            {{ "save" | translate }}
          </button>

          <button
            type="button"
            (click)="modal.dismiss()"
            class="flex gap-1 btn btn-secondary mb-3 col-md-2"
          >
            {{ "close" | translate }}
          </button>
        </div>

        <div class="col-sm-6 col-md-3 col-lg-12 mb-0 mb-sm-3 text-center">
          <input
            name="dateCheck_transfer"
            (keyup)="applyFilterPackages($event)"
            placeholder="{{ 'search' | translate }}"
            type="text"
            class="form-control"
          />
        </div>
      </div>

      <div class="editable shadow mb-4">
        <table
          class="table table-responsive table-striped table-bordered text-center"
          style="vertical-align: middle; font-size: 14px"
        >
          <thead
            class="bg-base text-white"
            style="line-height: 30px; font-size: 13px"
          >
            <tr>
              <th>{{ "PackageName" | translate }}</th>
              <th>{{ "operations" | translate }}</th>
              <!-- <th   *ngIf="modalDetails?.type == 'newSub'" >{{ "ApproximatePeriod" | translate }}</th> -->
            </tr>
          </thead>
          <tbody>
            <tr
              *ngFor="let item of AllPackageslist; let i = index"
              style="line-height: 5px"
            >
              <td>{{ item.packageName }}</td>
              <td>
                <button
                  (click)="updatePackages(item)"
                  class="p-2 bg-orange-100 hover:bg-orange-500 rounded-lg duration-300 hover:text-white w-10"
                >
                  <i class="fa-regular fa-pen-to-square"></i>
                </button>

                <button
                  class="p-2 bg-red-100 hover:bg-red-500 rounded-lg duration-300 hover:text-white w-10 me-3"
                  (click)="
                    open(deletePackagesModal, item, 'deletePackagesModal')
                  "
                >
                  <i class="fa-solid fa-trash-can"></i>
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </form>
  </div>

  <!-- <div class="flex justify-end p-3">
    <button
      (click)="modal?.dismiss()"
      class="btn text-white"
      style="background-color: var(--base-color)"
    >
      {{ "save" | translate }}
    </button>

    <button class="btn me-2 btn-secondary">
      {{ "close" | translate }}
    </button>
  </div> -->
</ng-template>
<!-- deletePackagesModal -->
<ng-template #deletePackagesModal let-modal>
  <div class="modal-body text-center">
    <p
      [translate]="'name'"
      [translateParams]="{
        ar: 'هل تريد حذف هذا العنصر ؟',
        en: 'Do you want to delete this item?'
      }"
    ></p>
    <div class="flex gap-2 justify-center">
      <button
        type="button"
        (click)="modal.dismiss()"
        mat-raised-button
        color="basic"
      >
        {{ "close" | translate }}
      </button>

      <button
        type="button"
        mat-raised-button
        color="warn"
        (click)="DeletePackages(modal)"
      >
        {{ "confirem" | translate }}
      </button>
    </div>
  </div>
</ng-template>

<!-- costCenterModal -->
<ng-template #costCenterModal let-modal>
  <div
    style="background-color: var(--base-color)"
    class="modal-header text-white flex justify-between items-center"
  >
    <h4 class="m-0">
      <span class="text-2xl">
        <span>{{ "AddServiceDetails" | translate }}</span>
      </span>
    </h4>
    <button
      type="button"
      class="text-2xl text-white m-0"
      (click)="modal.dismiss()"
    >
      <i class="fa-solid fa-xmark"></i>
    </button>
  </div>
  <div class="modal-body max-h-100 overflow-x-scroll overflow-y-scroll p-4">
    <form class="" #smsForm="ngForm">
      <div class="row align-items-end mb-4 mx-3">
        <!-- 1 line -->

        <div class="col-sm-6 col-md-3 col-lg-6 mb-0 mb-sm-3">
          <div class="form-group">
            <label for="nameAr" class="text-right col-form-label block">
              {{ "nameAr" | translate }}
              <span class="text-danger">*</span>
            </label>
            <input
              required
              class="form-control"
              autocomplete="off"
              [placeholder]="
                ('Write' | translate) + ' ' + ('nameAr' | translate)
              "
              [(ngModel)]="servicesName"
              type="text"
              [ngModelOptions]="{ standalone: true }"
            />
          </div>
        </div>
        <div class="col-sm-6 col-md-3 col-lg-6 mb-0 mb-sm-3">
          <div class="form-group">
            <label class="text-right col-form-label block">
              {{ "nameEn" | translate }}
              <span class="text-danger">*</span></label
            >
            <input
              class="form-control"
              [(ngModel)]="accountName"
              autocomplete="off"
              type="text"
              [ngModelOptions]="{ standalone: true }"
              [placeholder]="
                ('Write' | translate) + ' ' + ('nameEn' | translate)
              "
            />
          </div>
        </div>

        <div class="col-sm-6 col-md-3 col-lg-12 mb-0 mb-sm-3 text-center">
          <button
            type="button"
            (click)="SavecostCenter()"
            [disabled]="accountName == null || servicesName == null"
            class="flex gap-1 btn text-white mb-3 col-md-2 me-3"
            style="background-color: var(--base-color)"
          >
            {{ "add" | translate }}
          </button>

          <button
            type="button"
            (click)="modal.dismiss()"
            class="flex gap-1 btn btn-secondary mb-3 col-md-2"
          >
            {{ "close" | translate }}
          </button>
        </div>

        <!-- <div class="col-sm-6 col-md-3 col-lg-12 mb-0 mb-sm-3 text-center">
          <input
            name="dateCheck_transfer"(keyup)="applyFiltercostCenter($event)"
            placeholder="{{ 'search' | translate }}"
            type="text"
            class="form-control"
          />
        </div> -->
      </div>

      <div class="editable shadow mb-4">
        <table
          class="table table-responsive table-striped table-bordered text-center"
          style="vertical-align: middle; font-size: 14px"
        >
          <thead
            class="bg-base text-white"
            style="line-height: 30px; font-size: 13px"
          >
            <tr>
              <th>{{ "nameAr" | translate }}</th>
              <th>{{ "nameEn" | translate }}</th>
              <th>{{ "operations" | translate }}</th>
              <!-- <th   *ngIf="modalDetails?.type == 'newSub'" >{{ "ApproximatePeriod" | translate }}</th> -->
            </tr>
          </thead>
          <tbody>
            <tr
              *ngFor="let item of AllcostCenterlist; let i = index"
              style="line-height: 5px"
            >
              <td>{{ item.servicesName }}</td>
              <td>{{ item.accountName }}</td>
              <td>
                <button
                  (click)="updatecostCenter(item)"
                  class="p-2 bg-orange-100 hover:bg-orange-500 rounded-lg duration-300 hover:text-white w-10"
                >
                  <i class="fa-regular fa-pen-to-square"></i>
                </button>

                <button
                  class="p-2 bg-red-100 hover:bg-red-500 rounded-lg duration-300 hover:text-white w-10 me-3"
                  (click)="
                    open(
                      deletecostCenterModal,
                      item,
                      'deletecostCenterModal',
                      i
                    )
                  "
                >
                  <i class="fa-solid fa-trash-can"></i>
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </form>
  </div>

  <!-- <div class="flex justify-end p-3">
    <button
      (click)="modal?.dismiss()"
      class="btn text-white"
      style="background-color: var(--base-color)"
    >
      {{ "save" | translate }}
    </button>

    <button class="btn me-2 btn-secondary">
      {{ "close" | translate }}
    </button>
  </div> -->
</ng-template>
<!-- deletecostCenterModal -->
<ng-template #deletecostCenterModal let-modal>
  <div class="modal-body text-center">
    <p
      [translate]="'name'"
      [translateParams]="{
        ar: 'هل تريد حذف هذا العنصر ؟',
        en: 'Do you want to delete this item?'
      }"
    ></p>
    <div class="flex gap-2 justify-center">
      <button
        type="button"
        (click)="modal.dismiss()"
        mat-raised-button
        color="basic"
      >
        {{ "close" | translate }}
      </button>

      <button
        type="button"
        mat-raised-button
        color="warn"
        (click)="DeleteService(modal)"
      >
        {{ "confirem" | translate }}
      </button>
    </div>
  </div>
</ng-template>
<!-- SaveInvoiceConfirmModal -->
<ng-template #SaveInvoiceConfirmModal let-modal>
  <div
    class="modal-body text-center"
    style="background-color: #cdcdcd !important"
  >
    <p
      [translate]="'name'"
      [translateParams]="{
        ar: 'هل تريد الحفظ ',
        en: 'Are you sure to save ?'
      }"
    ></p>
    <div class="flex gap-2 justify-center mt-3">
      <button
        type="button"
        mat-raised-button
        color="warn"
        (click)="checkPayTypeAndSave(); modal.dismiss()"
      >
        {{ "Yes" | translate }}
      </button>
      <button
        type="button"
        (click)="modal.dismiss()"
        mat-raised-button
        color="basic"
      >
        {{ "No" | translate }}
      </button>
    </div>
  </div>
</ng-template>

<!-- serviceDetails -->
<ng-template #serviceDetailsModal_Invoice let-modal>
  <div
    style="background-color: var(--base-color)"
    class="modal-header text-white flex justify-between items-center"
  >
    <h4 class="m-0">
      <span class="text-2xl">{{ "servicesList" | translate }}</span>
    </h4>
    <button
      type="button"
      class="text-2xl text-white m-0"
      (click)="modal.dismiss()"
    >
      <i class="fa-solid fa-xmark"></i>
    </button>
  </div>
  <div class="modal-body">
    <div
      cdkDropList
      [cdkDropListData]="serviceDetails_Invoice"
      class="example-list"
      (cdkDropListDropped)="drop_Invoice($event)"
    >
      <div
        *ngFor="let item of serviceDetails_Invoice"
        class="example-box"
        cdkDrag
      >
        <div class="col-md-11" style="font-size: 20px">
          <i
            *ngIf="
              (item?.SureService ?? 0) != 1 && OfferPopupAddorEdit_Invoice == 0
            "
            class="fa fa-xmark text-danger"
          ></i>
          <i
            *ngIf="
              (item?.SureService ?? 0) == 1 && OfferPopupAddorEdit_Invoice == 0
            "
            class="fa fa-check text-success"
          ></i>
          <i
            *ngIf="OfferPopupAddorEdit_Invoice == 1"
            class="fa fa-check text-success"
          ></i>
          <span class="text-base mx-2">{{ item?.name }}</span>
        </div>
        <div class="serviceBtns" *ngIf="OfferPopupAddorEdit_Invoice == 0">
          <button
            *ngIf="(item?.SureService ?? 0) != 1"
            (click)="MarkServiceDetails_Invoice(item)"
            type="button"
            class="btn btn-outline-success"
          >
            {{ "Insert" | translate }}
          </button>
          <button
            *ngIf="(item?.SureService ?? 0) == 1"
            (click)="UnMarkServiceDetails_Invoice(item)"
            type="button"
            class="btn btn-outline-danger"
          >
            {{ "delete" | translate }}
          </button>
        </div>
      </div>
    </div>
    <div
      class="flex gap-2 pt-3 border-t border-neutral-300 col-span-1 md:col-span-2 mt-2"
    >
      <button (click)="modal?.dismiss()" class="btn btn-secondary">
        {{ "close" | translate }}
      </button>
    </div>
  </div>
</ng-template>

<ng-template #printServiceForm_GenDivModal let-modal>
  <div class="modal-body">
    <div id="reportServiceForm_Gen" style="direction: rtl">
      <!--Header-->
      <div
        class="report-header"
        style="display: flex; align-items: center; gap: 100px; padding: 3px 0px"
      >
        <div class="headerNe-right-side">
          <img
            *ngIf="ServiceFormCustomData.OrgImg"
            src="{{ ServiceFormCustomData.OrgImg }}"
            alt="logo"
            style="
              height: 155px;
              width: 192px;
              max-width: 200px;
              object-fit: fill;
            "
          />
        </div>

        <div class="headerNe-lefy-side" style="width: 100%">
          <h1
            style="
              letter-spacing: 0.25px;
              font-size: 19px;
              margin: 0;
              margin-bottom: 0px;
            "
          >
            {{ ServiceFormPrintData?.org_VD?.nameAr }}
          </h1>
          <h1
            style="
              letter-spacing: 0.25px;
              font-size: 19px;
              margin: 0;
              margin-bottom: 0px;
            "
          >
            {{ ServiceFormPrintData?.org_VD?.nameEn }}
          </h1>
          <div class="line" style="position: relative; padding: 5px 0px 10px">
            <span
              style="
                position: absolute;
                right: 0;
                width: 100%;
                height: 2px;
                background-color: #e5e5e5;
                z-index: 1;
              "
            ></span>
            <span
              style="
                position: absolute;
                right: 0;
                width: 70%;
                height: 2px;
                background-color: #ec1c24;
                z-index: 2;
              "
            ></span>
          </div>

          <h1
            class="text-center"
            style="color: #096dcb; font-size: 35px; margin-top: 5px"
          >
            طلب تسعيرة عامه
          </h1>
          <p style="margin: 0">
            التاريخ: {{ ServiceFormPrintData?.dateTimeNow }}
          </p>
        </div>
      </div>
      <!--/Header-->

      <div
        class="services"
        style="width: 100%; overflow: auto; margin-bottom: 10px"
      >
        <div class="content" style="min-width: max-content">
          <h3 style="margin-bottom: 10px">معلومات الأتصال</h3>
          <table
            style="
              text-align: center;
              vertical-align: middle;
              width: 100%;
              min-width: max-content;
            "
          >
            <thead>
              <tr>
                <td
                  style="
                    font-size: 14px;
                    background-color: #0f9c9b;
                    padding: 3px;
                    text-align: center;
                    color: #000;
                    word-wrap: break-word;
                  "
                >
                  الإسم بالكامل
                </td>

                <td
                  style="
                    font-size: 14px;
                    background-color: #0f9c9b;
                    padding: 3px;
                    text-align: center;
                    color: #000;
                    word-wrap: break-word;
                  "
                >
                  رقم الجوال
                </td>

                <td
                  style="
                    font-size: 14px;
                    background-color: #0f9c9b;
                    padding: 3px;
                    text-align: center;
                    color: #000;
                    word-wrap: break-word;
                  "
                >
                  البريد الألكتروني
                </td>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td
                  style="
                    background-color: #fff;
                    font-size: 14px;
                    padding: 3px;
                    color: #000;
                    border-inline-start: 2px dashed #0c8191;
                    border-bottom: 2px dashed #0c8191;
                  "
                >
                  {{ ServiceFormPrintData?.formVM_VD.name }}
                </td>
                <td
                  style="
                    background-color: #fff;
                    font-size: 14px;
                    padding: 3px;
                    color: #000;
                    border-inline-start: 2px dashed #0c8191;
                    border-bottom: 2px dashed #0c8191;
                  "
                >
                  {{ ServiceFormPrintData?.formVM_VD.mobile }}
                </td>
                <td
                  style="
                    background-color: #fff;
                    font-size: 14px;
                    padding: 3px;
                    color: #000;
                    border-inline-start: 2px dashed #0c8191;
                    border-bottom: 2px dashed #0c8191;
                  "
                >
                  {{ ServiceFormPrintData?.formVM_VD.email }}
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <div
        class="services"
        style="width: 100%; overflow: auto; margin-bottom: 10px"
      >
        <div class="content" style="min-width: max-content">
          <h3 style="margin-bottom: 10px">معلومات الأرض</h3>
          <table
            style="
              text-align: center;
              vertical-align: middle;
              width: 100%;
              min-width: max-content;
            "
          >
            <thead>
              <tr>
                <td
                  style="
                    font-size: 14px;
                    background-color: #0f9c9b;
                    padding: 3px;
                    text-align: center;
                    color: #000;
                    word-wrap: break-word;
                  "
                >
                  مساحة الأرض
                </td>

                <td
                  style="
                    font-size: 14px;
                    background-color: #0f9c9b;
                    padding: 3px;
                    text-align: center;
                    color: #000;
                    word-wrap: break-word;
                  "
                >
                  عدد الشوارع
                </td>

                <td
                  style="
                    font-size: 14px;
                    background-color: #0f9c9b;
                    padding: 3px;
                    text-align: center;
                    color: #000;
                    word-wrap: break-word;
                  "
                >
                  الطول
                </td>

                <td
                  style="
                    font-size: 14px;
                    background-color: #0f9c9b;
                    padding: 3px;
                    text-align: center;
                    color: #000;
                    word-wrap: break-word;
                  "
                >
                  العرض
                </td>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td
                  style="
                    background-color: #fff;
                    font-size: 14px;
                    padding: 3px;
                    color: #000;
                    border-inline-start: 2px dashed #0c8191;
                    border-bottom: 2px dashed #0c8191;
                  "
                >
                  {{ ServiceFormPrintData?.formVM_VD.landArea }}
                </td>
                <td
                  style="
                    background-color: #fff;
                    font-size: 14px;
                    padding: 3px;
                    color: #000;
                    border-inline-start: 2px dashed #0c8191;
                    border-bottom: 2px dashed #0c8191;
                  "
                >
                  {{ ServiceFormPrintData?.formVM_VD.numofStreetsAdjacent }}
                </td>
                <td
                  style="
                    background-color: #fff;
                    font-size: 14px;
                    padding: 3px;
                    color: #000;
                    border-inline-start: 2px dashed #0c8191;
                    border-bottom: 2px dashed #0c8191;
                  "
                >
                  {{ ServiceFormPrintData?.formVM_VD.height }}
                </td>
                <td
                  style="
                    background-color: #fff;
                    font-size: 14px;
                    padding: 3px;
                    color: #000;
                    border-inline-start: 2px dashed #0c8191;
                    border-bottom: 2px dashed #0c8191;
                  "
                >
                  {{ ServiceFormPrintData?.formVM_VD.width }}
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <div
        class="services"
        style="width: 100%; overflow: auto; margin-bottom: 10px"
      >
        <div class="content" style="min-width: max-content">
          <h3 style="margin-bottom: 10px">الخدمة المطلوبة</h3>
          <table
            style="
              text-align: center;
              vertical-align: middle;
              width: 100%;
              min-width: max-content;
            "
          >
            <thead>
              <tr>
                <td
                  style="
                    font-size: 14px;
                    background-color: #0f9c9b;
                    padding: 3px;
                    text-align: center;
                    color: #000;
                    word-wrap: break-word;
                  "
                >
                  الخدمة المطلوبة
                </td>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td
                  style="
                    background-color: #fff;
                    font-size: 14px;
                    padding: 3px;
                    color: #000;
                    border-inline-start: 2px dashed #0c8191;
                    border-bottom: 2px dashed #0c8191;
                  "
                >
                  {{ ServiceFormPrintData?.formVM_VD.serviceNotes }}
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
  <div class="modal-footer">
    <button
      (click)="printDiv('reportServiceForm_Gen')"
      class="min-w-max p-2 bg-sky-100 hover:bg-sky-500 rounded-lg duration-300 hover:text-white aspect-square w-10"
    >
      <i class="fa fa-print"></i>
    </button>
    <button
      type="button"
      (click)="modal.dismiss()"
      mat-raised-button
      color="basic"
    >
      {{ "No" | translate }}
    </button>
  </div>
</ng-template>

<ng-template #printServiceForm_DesDivModal let-modal>
  <div class="modal-body">
    <div id="reportServiceForm_Des" style="direction: rtl">
      <!--Header-->
      <div
        class="report-header"
        style="display: flex; align-items: center; gap: 100px; padding: 3px 0px"
      >
        <div class="headerNe-right-side">
          <img
            *ngIf="ServiceFormCustomData.OrgImg"
            src="{{ ServiceFormCustomData.OrgImg }}"
            alt="logo"
            style="
              height: 155px;
              width: 192px;
              max-width: 200px;
              object-fit: fill;
            "
          />
        </div>

        <div class="headerNe-lefy-side" style="width: 100%">
          <h1
            style="
              letter-spacing: 0.25px;
              font-size: 19px;
              margin: 0;
              margin-bottom: 0px;
            "
          >
            {{ ServiceFormPrintData?.org_VD?.nameAr }}
          </h1>
          <h1
            style="
              letter-spacing: 0.25px;
              font-size: 19px;
              margin: 0;
              margin-bottom: 0px;
            "
          >
            {{ ServiceFormPrintData?.org_VD?.nameEn }}
          </h1>
          <div class="line" style="position: relative; padding: 5px 0px 10px">
            <span
              style="
                position: absolute;
                right: 0;
                width: 100%;
                height: 2px;
                background-color: #e5e5e5;
                z-index: 1;
              "
            ></span>
            <span
              style="
                position: absolute;
                right: 0;
                width: 70%;
                height: 2px;
                background-color: #ec1c24;
                z-index: 2;
              "
            ></span>
          </div>

          <h1
            class="text-center"
            style="color: #096dcb; font-size: 35px; margin-top: 5px"
          >
            طلب تسعيرة تصميم
          </h1>
          <p style="margin: 0">
            التاريخ: {{ ServiceFormPrintData?.dateTimeNow }}
          </p>
        </div>
      </div>
      <!--/Header-->

      <div
        class="services"
        style="width: 100%; overflow: auto; margin-bottom: 10px"
      >
        <div class="content" style="min-width: max-content">
          <h3 style="margin-bottom: 10px">معلومات الأتصال</h3>
          <table
            style="
              text-align: center;
              vertical-align: middle;
              width: 100%;
              min-width: max-content;
            "
          >
            <thead>
              <tr>
                <td
                  style="
                    font-size: 14px;
                    background-color: #0f9c9b;
                    padding: 3px;
                    text-align: center;
                    color: #000;
                    word-wrap: break-word;
                  "
                >
                  الإسم بالكامل
                </td>

                <td
                  style="
                    font-size: 14px;
                    background-color: #0f9c9b;
                    padding: 3px;
                    text-align: center;
                    color: #000;
                    word-wrap: break-word;
                  "
                >
                  رقم الجوال
                </td>

                <td
                  style="
                    font-size: 14px;
                    background-color: #0f9c9b;
                    padding: 3px;
                    text-align: center;
                    color: #000;
                    word-wrap: break-word;
                  "
                >
                  البريد الألكتروني
                </td>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td
                  style="
                    background-color: #fff;
                    font-size: 14px;
                    padding: 3px;
                    color: #000;
                    border-inline-start: 2px dashed #0c8191;
                    border-bottom: 2px dashed #0c8191;
                  "
                >
                  {{ ServiceFormPrintData?.formVM_VD.name }}
                </td>
                <td
                  style="
                    background-color: #fff;
                    font-size: 14px;
                    padding: 3px;
                    color: #000;
                    border-inline-start: 2px dashed #0c8191;
                    border-bottom: 2px dashed #0c8191;
                  "
                >
                  {{ ServiceFormPrintData?.formVM_VD.mobile }}
                </td>
                <td
                  style="
                    background-color: #fff;
                    font-size: 14px;
                    padding: 3px;
                    color: #000;
                    border-inline-start: 2px dashed #0c8191;
                    border-bottom: 2px dashed #0c8191;
                  "
                >
                  {{ ServiceFormPrintData?.formVM_VD.email }}
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <div
        class="services"
        style="width: 100%; overflow: auto; margin-bottom: 10px"
      >
        <div class="content" style="min-width: max-content">
          <h3 style="margin-bottom: 10px">معلومات الأرض</h3>
          <table
            style="
              text-align: center;
              vertical-align: middle;
              width: 100%;
              min-width: max-content;
            "
          >
            <thead>
              <tr>
                <td
                  style="
                    font-size: 14px;
                    background-color: #0f9c9b;
                    padding: 3px;
                    text-align: center;
                    color: #000;
                    word-wrap: break-word;
                  "
                >
                  مساحة الأرض
                </td>

                <td
                  style="
                    font-size: 14px;
                    background-color: #0f9c9b;
                    padding: 3px;
                    text-align: center;
                    color: #000;
                    word-wrap: break-word;
                  "
                >
                  عدد الشوارع
                </td>

                <td
                  style="
                    font-size: 14px;
                    background-color: #0f9c9b;
                    padding: 3px;
                    text-align: center;
                    color: #000;
                    word-wrap: break-word;
                  "
                >
                  الطول
                </td>

                <td
                  style="
                    font-size: 14px;
                    background-color: #0f9c9b;
                    padding: 3px;
                    text-align: center;
                    color: #000;
                    word-wrap: break-word;
                  "
                >
                  العرض
                </td>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td
                  style="
                    background-color: #fff;
                    font-size: 14px;
                    padding: 3px;
                    color: #000;
                    border-inline-start: 2px dashed #0c8191;
                    border-bottom: 2px dashed #0c8191;
                  "
                >
                  {{ ServiceFormPrintData?.formVM_VD.landArea }}
                </td>
                <td
                  style="
                    background-color: #fff;
                    font-size: 14px;
                    padding: 3px;
                    color: #000;
                    border-inline-start: 2px dashed #0c8191;
                    border-bottom: 2px dashed #0c8191;
                  "
                >
                  {{ ServiceFormPrintData?.formVM_VD.numofStreetsAdjacent }}
                </td>
                <td
                  style="
                    background-color: #fff;
                    font-size: 14px;
                    padding: 3px;
                    color: #000;
                    border-inline-start: 2px dashed #0c8191;
                    border-bottom: 2px dashed #0c8191;
                  "
                >
                  {{ ServiceFormPrintData?.formVM_VD.height }}
                </td>
                <td
                  style="
                    background-color: #fff;
                    font-size: 14px;
                    padding: 3px;
                    color: #000;
                    border-inline-start: 2px dashed #0c8191;
                    border-bottom: 2px dashed #0c8191;
                  "
                >
                  {{ ServiceFormPrintData?.formVM_VD.width }}
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <div
        class="services"
        style="width: 100%; overflow: auto; margin-bottom: 10px"
      >
        <div class="content" style="min-width: max-content">
          <h3 style="margin-bottom: 10px">الخدمة المطلوبة</h3>
          <table
            style="
              text-align: center;
              vertical-align: middle;
              width: 100%;
              min-width: max-content;
              font-size: 14px !important;
              font-weight: 600 !important;
              border-collapse: separate;
              border-spacing: 0 0.6em;
            "
          >
            <tbody>
              <tr colspan="4">
                <td
                  style="
                    font-size: 14px;
                    background-color: #0f9c9b;
                    padding: 3px;
                    text-align: center;
                    color: #000;
                    word-wrap: break-word;
                  "
                >
                  القبو
                </td>
              </tr>

              <tr>
                <td *ngIf="ServiceFormPrintData?.formVM_VD.bas_storehouse">
                  مستودع :
                  <i
                    style="color: green; font-size: 19px"
                    class="fas fa-check"
                  ></i>
                </td>
                <td *ngIf="!ServiceFormPrintData?.formVM_VD.bas_storehouse">
                  مستودع :
                  <i
                    style="color: red; font-size: 19px"
                    class="fas fa-close"
                  ></i>
                </td>

                <td *ngIf="ServiceFormPrintData?.formVM_VD.bas_LaundryRoom">
                  غرفة غسيل :
                  <i
                    style="color: green; font-size: 19px"
                    class="fas fa-check"
                  ></i>
                </td>
                <td *ngIf="!ServiceFormPrintData?.formVM_VD.bas_LaundryRoom">
                  غرفة غسيل :
                  <i
                    style="color: red; font-size: 19px"
                    class="fas fa-close"
                  ></i>
                </td>

                <td *ngIf="ServiceFormPrintData?.formVM_VD.bas_garden">
                  حديقة :
                  <i
                    style="color: green; font-size: 19px"
                    class="fas fa-check"
                  ></i>
                </td>
                <td *ngIf="!ServiceFormPrintData?.formVM_VD.bas_garden">
                  حديقة :
                  <i
                    style="color: red; font-size: 19px"
                    class="fas fa-close"
                  ></i>
                </td>

                <td *ngIf="ServiceFormPrintData?.formVM_VD.bas_board">
                  مجلس :
                  <i
                    style="color: green; font-size: 19px"
                    class="fas fa-check"
                  ></i>
                </td>
                <td *ngIf="!ServiceFormPrintData?.formVM_VD.bas_board">
                  مجلس :
                  <i
                    style="color: red; font-size: 19px"
                    class="fas fa-close"
                  ></i>
                </td>
              </tr>

              <tr>
                <td *ngIf="ServiceFormPrintData?.formVM_VD.bas_Bedandbathroom">
                  غرفة نوم + دورة مياة :
                  <i
                    style="color: green; font-size: 19px"
                    class="fas fa-check"
                  ></i>
                </td>
                <td *ngIf="!ServiceFormPrintData?.formVM_VD.bas_Bedandbathroom">
                  غرفة نوم + دورة مياة :
                  <i
                    style="color: red; font-size: 19px"
                    class="fas fa-close"
                  ></i>
                </td>

                <td *ngIf="ServiceFormPrintData?.formVM_VD.bas_bedroomonly">
                  غرقة نوم فقط :
                  <i
                    style="color: green; font-size: 19px"
                    class="fas fa-check"
                  ></i>
                </td>
                <td *ngIf="!ServiceFormPrintData?.formVM_VD.bas_bedroomonly">
                  غرقة نوم فقط :
                  <i
                    style="color: red; font-size: 19px"
                    class="fas fa-close"
                  ></i>
                </td>

                <td *ngIf="ServiceFormPrintData?.formVM_VD.bas_openkitchen">
                  مطبخ مفتوح :
                  <i
                    style="color: green; font-size: 19px"
                    class="fas fa-check"
                  ></i>
                </td>
                <td *ngIf="!ServiceFormPrintData?.formVM_VD.bas_openkitchen">
                  مطبخ مفتوح :
                  <i
                    style="color: red; font-size: 19px"
                    class="fas fa-close"
                  ></i>
                </td>

                <td *ngIf="ServiceFormPrintData?.formVM_VD.bas_Desk">
                  مكتب :
                  <i
                    style="color: green; font-size: 19px"
                    class="fas fa-check"
                  ></i>
                </td>
                <td *ngIf="!ServiceFormPrintData?.formVM_VD.bas_Desk">
                  مكتب :
                  <i
                    style="color: red; font-size: 19px"
                    class="fas fa-close"
                  ></i>
                </td>
              </tr>

              <tr>
                <td *ngIf="ServiceFormPrintData?.formVM_VD.bas_swimmingPool">
                  مسبح :
                  <i
                    style="color: green; font-size: 19px"
                    class="fas fa-check"
                  ></i>
                </td>
                <td *ngIf="!ServiceFormPrintData?.formVM_VD.bas_swimmingPool">
                  مسبح :
                  <i
                    style="color: red; font-size: 19px"
                    class="fas fa-close"
                  ></i>
                </td>

                <td *ngIf="ServiceFormPrintData?.formVM_VD.bas_carparking">
                  مواقف سيارات :
                  <i
                    style="color: green; font-size: 19px"
                    class="fas fa-check"
                  ></i>
                </td>
                <td *ngIf="!ServiceFormPrintData?.formVM_VD.bas_carparking">
                  مواقف سيارات :
                  <i
                    style="color: red; font-size: 19px"
                    class="fas fa-close"
                  ></i>
                </td>

                <td *ngIf="ServiceFormPrintData?.formVM_VD.bas_Healthclub">
                  نادي صحي :
                  <i
                    style="color: green; font-size: 19px"
                    class="fas fa-check"
                  ></i>
                </td>
                <td *ngIf="!ServiceFormPrintData?.formVM_VD.bas_Healthclub">
                  نادي صحي :
                  <i
                    style="color: red; font-size: 19px"
                    class="fas fa-close"
                  ></i>
                </td>

                <td *ngIf="ServiceFormPrintData?.formVM_VD.bas_Homecinemahall">
                  صالة سينما منزلية :
                  <i
                    style="color: green; font-size: 19px"
                    class="fas fa-check"
                  ></i>
                </td>
                <td *ngIf="!ServiceFormPrintData?.formVM_VD.bas_Homecinemahall">
                  صالة سينما منزلية :
                  <i
                    style="color: red; font-size: 19px"
                    class="fas fa-close"
                  ></i>
                </td>
              </tr>

              <tr>
                <td
                  *ngIf="ServiceFormPrintData?.formVM_VD.bas_Multipurposehall"
                >
                  صالة متعددة الاستخدامات :
                  <i
                    style="color: green; font-size: 19px"
                    class="fas fa-check"
                  ></i>
                </td>
                <td
                  *ngIf="!ServiceFormPrintData?.formVM_VD.bas_Multipurposehall"
                >
                  صالة متعددة الاستخدامات :
                  <i
                    style="color: red; font-size: 19px"
                    class="fas fa-close"
                  ></i>
                </td>

                <td *ngIf="ServiceFormPrintData?.formVM_VD.bas_Kidsplayroom">
                  غرفة العاب اطفال :
                  <i
                    style="color: green; font-size: 19px"
                    class="fas fa-check"
                  ></i>
                </td>
                <td *ngIf="!ServiceFormPrintData?.formVM_VD.bas_Kidsplayroom">
                  غرفة العاب اطفال :
                  <i
                    style="color: red; font-size: 19px"
                    class="fas fa-close"
                  ></i>
                </td>

                <td></td>
                <td></td>
              </tr>

              <tr colspan="4">
                <td
                  style="
                    font-size: 14px;
                    background-color: #d8d8d8;
                    padding: 14px;
                    text-align: center;
                    color: #000;
                    word-wrap: break-word;
                  "
                >
                  معلومات اخري : {{ ServiceFormPrintData?.formVM_VD.bas_Notes }}
                </td>
              </tr>

              <!-- <tr><hr/></tr> -->
              <tr colspan="4">
                <td
                  style="
                    font-size: 14px;
                    background-color: #0f9c9b;
                    padding: 3px;
                    text-align: center;
                    color: #000;
                    word-wrap: break-word;
                  "
                >
                  الدور الارضي
                </td>
              </tr>

              <tr>
                <td *ngIf="ServiceFormPrintData?.formVM_VD.gro_Desk">
                  مكتب :
                  <i
                    style="color: green; font-size: 19px"
                    class="fas fa-check"
                  ></i>
                </td>
                <td *ngIf="!ServiceFormPrintData?.formVM_VD.gro_Desk">
                  مكتب :
                  <i
                    style="color: red; font-size: 19px"
                    class="fas fa-close"
                  ></i>
                </td>

                <td *ngIf="ServiceFormPrintData?.formVM_VD.gro_closedkitchen">
                  مطبخ مغلق :
                  <i
                    style="color: green; font-size: 19px"
                    class="fas fa-check"
                  ></i>
                </td>
                <td *ngIf="!ServiceFormPrintData?.formVM_VD.gro_closedkitchen">
                  مطبخ مغلق :
                  <i
                    style="color: red; font-size: 19px"
                    class="fas fa-close"
                  ></i>
                </td>

                <td *ngIf="ServiceFormPrintData?.formVM_VD.gro_guestcouncil">
                  مجلس الضيوف :
                  <i
                    style="color: green; font-size: 19px"
                    class="fas fa-check"
                  ></i>
                </td>
                <td *ngIf="!ServiceFormPrintData?.formVM_VD.gro_guestcouncil">
                  مجلس الضيوف :
                  <i
                    style="color: red; font-size: 19px"
                    class="fas fa-close"
                  ></i>
                </td>

                <td *ngIf="ServiceFormPrintData?.formVM_VD.gro_guestdiningroom">
                  غرفة طعام الضيوف :
                  <i
                    style="color: green; font-size: 19px"
                    class="fas fa-check"
                  ></i>
                </td>
                <td
                  *ngIf="!ServiceFormPrintData?.formVM_VD.gro_guestdiningroom"
                >
                  غرفة طعام الضيوف :
                  <i
                    style="color: red; font-size: 19px"
                    class="fas fa-close"
                  ></i>
                </td>
              </tr>

              <tr>
                <td *ngIf="ServiceFormPrintData?.formVM_VD.gro_SubEntrance">
                  مدخل فرعي :
                  <i
                    style="color: green; font-size: 19px"
                    class="fas fa-check"
                  ></i>
                </td>
                <td *ngIf="!ServiceFormPrintData?.formVM_VD.gro_SubEntrance">
                  مدخل فرعي :
                  <i
                    style="color: red; font-size: 19px"
                    class="fas fa-close"
                  ></i>
                </td>

                <td *ngIf="ServiceFormPrintData?.formVM_VD.gro_openkitchen">
                  مطبخ مفتوح :
                  <i
                    style="color: green; font-size: 19px"
                    class="fas fa-check"
                  ></i>
                </td>
                <td *ngIf="!ServiceFormPrintData?.formVM_VD.gro_openkitchen">
                  مطبخ مفتوح :
                  <i
                    style="color: red; font-size: 19px"
                    class="fas fa-close"
                  ></i>
                </td>

                <td *ngIf="ServiceFormPrintData?.formVM_VD.gro_Store">
                  مخزن :
                  <i
                    style="color: green; font-size: 19px"
                    class="fas fa-check"
                  ></i>
                </td>
                <td *ngIf="!ServiceFormPrintData?.formVM_VD.gro_Store">
                  مخزن :
                  <i
                    style="color: red; font-size: 19px"
                    class="fas fa-close"
                  ></i>
                </td>

                <td *ngIf="ServiceFormPrintData?.formVM_VD.gro_elevator">
                  مصعد :
                  <i
                    style="color: green; font-size: 19px"
                    class="fas fa-check"
                  ></i>
                </td>
                <td *ngIf="!ServiceFormPrintData?.formVM_VD.gro_elevator">
                  مصعد :
                  <i
                    style="color: red; font-size: 19px"
                    class="fas fa-close"
                  ></i>
                </td>
              </tr>

              <tr>
                <td *ngIf="ServiceFormPrintData?.formVM_VD.gro_maindrawer">
                  درج رئيسي :
                  <i
                    style="color: green; font-size: 19px"
                    class="fas fa-check"
                  ></i>
                </td>
                <td *ngIf="!ServiceFormPrintData?.formVM_VD.gro_maindrawer">
                  درج رئيسي :
                  <i
                    style="color: red; font-size: 19px"
                    class="fas fa-close"
                  ></i>
                </td>

                <td *ngIf="ServiceFormPrintData?.formVM_VD.gro_servicedrawer">
                  درج خدمه :
                  <i
                    style="color: green; font-size: 19px"
                    class="fas fa-check"
                  ></i>
                </td>
                <td *ngIf="!ServiceFormPrintData?.formVM_VD.gro_servicedrawer">
                  درج خدمه :
                  <i
                    style="color: red; font-size: 19px"
                    class="fas fa-close"
                  ></i>
                </td>

                <td
                  *ngIf="
                    ServiceFormPrintData?.formVM_VD.gro_Extrabedandbathroom
                  "
                >
                  غرفة نوم إضافيه + حمام :
                  <i
                    style="color: green; font-size: 19px"
                    class="fas fa-check"
                  ></i>
                </td>
                <td
                  *ngIf="
                    !ServiceFormPrintData?.formVM_VD.gro_Extrabedandbathroom
                  "
                >
                  غرفة نوم إضافيه + حمام :
                  <i
                    style="color: red; font-size: 19px"
                    class="fas fa-close"
                  ></i>
                </td>

                <td *ngIf="ServiceFormPrintData?.formVM_VD.gro_Toilets">
                  دورات مياه :
                  <i
                    style="color: green; font-size: 19px"
                    class="fas fa-check"
                  ></i>
                </td>
                <td *ngIf="!ServiceFormPrintData?.formVM_VD.gro_Toilets">
                  دورات مياه :
                  <i
                    style="color: red; font-size: 19px"
                    class="fas fa-close"
                  ></i>
                </td>
              </tr>

              <tr>
                <td>
                  عدد دورات المياة :
                  {{ ServiceFormPrintData?.formVM_VD.gro_Numberoftoilets }}
                </td>
                <td>
                  عدد مجالس الضيوف :
                  {{ ServiceFormPrintData?.formVM_VD.gro_Numberofguestboards }}
                </td>
                <td
                  *ngIf="ServiceFormPrintData?.formVM_VD.gro_Extrabedroomonly"
                >
                  غرفة نوم إضافيه فقط :
                  <i
                    style="color: green; font-size: 19px"
                    class="fas fa-check"
                  ></i>
                </td>
                <td
                  *ngIf="!ServiceFormPrintData?.formVM_VD.gro_Extrabedroomonly"
                >
                  غرفة نوم إضافيه فقط :
                  <i
                    style="color: red; font-size: 19px"
                    class="fas fa-close"
                  ></i>
                </td>

                <td
                  *ngIf="
                    ServiceFormPrintData?.formVM_VD.gro_Maidsroomandbathroom
                  "
                >
                  غرفة خادمه + دوره مياه :
                  <i
                    style="color: green; font-size: 19px"
                    class="fas fa-check"
                  ></i>
                </td>
                <td
                  *ngIf="
                    !ServiceFormPrintData?.formVM_VD.gro_Maidsroomandbathroom
                  "
                >
                  غرفة خادمه + دوره مياه :
                  <i
                    style="color: red; font-size: 19px"
                    class="fas fa-close"
                  ></i>
                </td>
              </tr>

              <tr>
                <td *ngIf="ServiceFormPrintData?.formVM_VD.gro_familyliving">
                  معيشة عائلية :
                  <i
                    style="color: green; font-size: 19px"
                    class="fas fa-check"
                  ></i>
                </td>
                <td *ngIf="!ServiceFormPrintData?.formVM_VD.gro_familyliving">
                  معيشة عائلية :
                  <i
                    style="color: red; font-size: 19px"
                    class="fas fa-close"
                  ></i>
                </td>

                <td
                  *ngIf="ServiceFormPrintData?.formVM_VD.gro_familydiningroom"
                >
                  غرفة طعام العائله :
                  <i
                    style="color: green; font-size: 19px"
                    class="fas fa-check"
                  ></i>
                </td>
                <td
                  *ngIf="!ServiceFormPrintData?.formVM_VD.gro_familydiningroom"
                >
                  غرفة طعام العائله :
                  <i
                    style="color: red; font-size: 19px"
                    class="fas fa-close"
                  ></i>
                </td>

                <td *ngIf="ServiceFormPrintData?.formVM_VD.gro_MainEntrance">
                  مدخل رئيسي :
                  <i
                    style="color: green; font-size: 19px"
                    class="fas fa-check"
                  ></i>
                </td>
                <td *ngIf="!ServiceFormPrintData?.formVM_VD.gro_MainEntrance">
                  مدخل رئيسي :
                  <i
                    style="color: red; font-size: 19px"
                    class="fas fa-close"
                  ></i>
                </td>

                <td
                  *ngIf="
                    ServiceFormPrintData?.formVM_VD.gro_Laundryandironingroom
                  "
                >
                  غرفة غسيل الملابس و الكي :
                  <i
                    style="color: green; font-size: 19px"
                    class="fas fa-check"
                  ></i>
                </td>
                <td
                  *ngIf="
                    !ServiceFormPrintData?.formVM_VD.gro_Laundryandironingroom
                  "
                >
                  غرفة غسيل الملابس و الكي :
                  <i
                    style="color: red; font-size: 19px"
                    class="fas fa-close"
                  ></i>
                </td>
              </tr>

              <tr colspan="4">
                <td
                  style="
                    font-size: 14px;
                    background-color: #d8d8d8;
                    padding: 14px;
                    text-align: center;
                    color: #000;
                    word-wrap: break-word;
                  "
                >
                  معلومات اخري : {{ ServiceFormPrintData?.formVM_VD.gro_Notes }}
                </td>
              </tr>

              <tr colspan="4">
                <td
                  style="
                    font-size: 14px;
                    background-color: #0f9c9b;
                    padding: 3px;
                    text-align: center;
                    color: #000;
                    word-wrap: break-word;
                  "
                >
                  الدور الأول
                </td>
              </tr>

              <tr>
                <td
                  *ngIf="ServiceFormPrintData?.formVM_VD.firrou_familysitting"
                >
                  جلسة عائلية :
                  <i
                    style="color: green; font-size: 19px"
                    class="fas fa-check"
                  ></i>
                </td>
                <td
                  *ngIf="!ServiceFormPrintData?.formVM_VD.firrou_familysitting"
                >
                  جلسة عائلية :
                  <i
                    style="color: red; font-size: 19px"
                    class="fas fa-close"
                  ></i>
                </td>

                <td
                  *ngIf="
                    ServiceFormPrintData?.formVM_VD.firrou_Smallandopenkitchen
                  "
                >
                  مطبخ صغير و مفتوح للتخديم :
                  <i
                    style="color: green; font-size: 19px"
                    class="fas fa-check"
                  ></i>
                </td>
                <td
                  *ngIf="
                    !ServiceFormPrintData?.formVM_VD.firrou_Smallandopenkitchen
                  "
                >
                  مطبخ صغير و مفتوح للتخديم :
                  <i
                    style="color: red; font-size: 19px"
                    class="fas fa-close"
                  ></i>
                </td>

                <td
                  *ngIf="
                    ServiceFormPrintData?.formVM_VD.firrou_Masterbedroomsuite
                  "
                >
                  جناح غرفه النوم الرئيسيه :
                  <i
                    style="color: green; font-size: 19px"
                    class="fas fa-check"
                  ></i>
                </td>
                <td
                  *ngIf="
                    !ServiceFormPrintData?.formVM_VD.firrou_Masterbedroomsuite
                  "
                >
                  جناح غرفه النوم الرئيسيه :
                  <i
                    style="color: red; font-size: 19px"
                    class="fas fa-close"
                  ></i>
                </td>

                <td
                  *ngIf="ServiceFormPrintData?.formVM_VD.firrou_bedandbathroom"
                >
                  غرفة نوم + حمام :
                  <i
                    style="color: green; font-size: 19px"
                    class="fas fa-check"
                  ></i>
                </td>
                <td
                  *ngIf="!ServiceFormPrintData?.formVM_VD.firrou_bedandbathroom"
                >
                  غرفة نوم + حمام :
                  <i
                    style="color: red; font-size: 19px"
                    class="fas fa-close"
                  ></i>
                </td>
              </tr>

              <tr>
                <td>
                  عدد غرف النوم + الحمام :
                  {{
                    ServiceFormPrintData?.formVM_VD.firrou_Numofbednadbathroom
                  }}
                </td>
                <td
                  *ngIf="
                    ServiceFormPrintData?.formVM_VD.firrou_Numofbednadbathroom
                  "
                >
                  مكتب :
                  <i
                    style="color: green; font-size: 19px"
                    class="fas fa-check"
                  ></i>
                </td>
                <td
                  *ngIf="
                    !ServiceFormPrintData?.formVM_VD.firrou_Numofbednadbathroom
                  "
                >
                  مكتب :
                  <i
                    style="color: red; font-size: 19px"
                    class="fas fa-close"
                  ></i>
                </td>

                <td *ngIf="ServiceFormPrintData?.formVM_VD.firrou_serviceroom">
                  غرفة خدمات :
                  <i
                    style="color: green; font-size: 19px"
                    class="fas fa-check"
                  ></i>
                </td>
                <td *ngIf="!ServiceFormPrintData?.formVM_VD.firrou_serviceroom">
                  غرفة خدمات :
                  <i
                    style="color: red; font-size: 19px"
                    class="fas fa-close"
                  ></i>
                </td>

                <td *ngIf="ServiceFormPrintData?.formVM_VD.firrou_Gym">
                  صاله رياضيه :
                  <i
                    style="color: green; font-size: 19px"
                    class="fas fa-check"
                  ></i>
                </td>
                <td *ngIf="!ServiceFormPrintData?.formVM_VD.firrou_Gym">
                  صاله رياضيه :
                  <i
                    style="color: red; font-size: 19px"
                    class="fas fa-close"
                  ></i>
                </td>
              </tr>

              <tr>
                <td *ngIf="ServiceFormPrintData?.formVM_VD.firrou_bedroomonly">
                  غرفة نوم فقط :
                  <i
                    style="color: green; font-size: 19px"
                    class="fas fa-check"
                  ></i>
                </td>
                <td *ngIf="!ServiceFormPrintData?.formVM_VD.firrou_bedroomonly">
                  غرفة نوم فقط :
                  <i
                    style="color: red; font-size: 19px"
                    class="fas fa-close"
                  ></i>
                </td>

                <td *ngIf="ServiceFormPrintData?.formVM_VD.firrou_WC">
                  دورة مياه :
                  <i
                    style="color: green; font-size: 19px"
                    class="fas fa-check"
                  ></i>
                </td>
                <td *ngIf="!ServiceFormPrintData?.formVM_VD.firrou_WC">
                  دورة مياه :
                  <i
                    style="color: red; font-size: 19px"
                    class="fas fa-close"
                  ></i>
                </td>
                <td>
                  عدد غرف النوم :
                  {{ ServiceFormPrintData?.formVM_VD.firrou_Numofbedroomonly }}
                </td>
                <td></td>
              </tr>

              <tr colspan="4">
                <td
                  style="
                    font-size: 14px;
                    background-color: #d8d8d8;
                    padding: 14px;
                    text-align: center;
                    color: #000;
                    word-wrap: break-word;
                  "
                >
                  معلومات اخري :
                  {{ ServiceFormPrintData?.formVM_VD.firrou_Notes }}
                </td>
              </tr>

              <tr colspan="4">
                <td
                  style="
                    font-size: 14px;
                    background-color: #0f9c9b;
                    padding: 3px;
                    text-align: center;
                    color: #000;
                    word-wrap: break-word;
                  "
                >
                  ملحق السطح
                </td>
              </tr>

              <tr>
                <td
                  *ngIf="
                    ServiceFormPrintData?.formVM_VD.sur_Laundryandironingroom
                  "
                >
                  غرفة غسيل وكي :
                  <i
                    style="color: green; font-size: 19px"
                    class="fas fa-check"
                  ></i>
                </td>
                <td
                  *ngIf="
                    !ServiceFormPrintData?.formVM_VD.sur_Laundryandironingroom
                  "
                >
                  غرفة غسيل وكي :
                  <i
                    style="color: red; font-size: 19px"
                    class="fas fa-close"
                  ></i>
                </td>

                <td *ngIf="ServiceFormPrintData?.formVM_VD.sur_Maidsbedroom">
                  غرفة نوم للخادمه :
                  <i
                    style="color: green; font-size: 19px"
                    class="fas fa-check"
                  ></i>
                </td>
                <td *ngIf="!ServiceFormPrintData?.formVM_VD.sur_Maidsbedroom">
                  غرفة نوم للخادمه :
                  <i
                    style="color: red; font-size: 19px"
                    class="fas fa-close"
                  ></i>
                </td>

                <td *ngIf="ServiceFormPrintData?.formVM_VD.sur_surface">
                  جلسة سطح :
                  <i
                    style="color: green; font-size: 19px"
                    class="fas fa-check"
                  ></i>
                </td>
                <td *ngIf="!ServiceFormPrintData?.formVM_VD.sur_surface">
                  جلسة سطح :
                  <i
                    style="color: red; font-size: 19px"
                    class="fas fa-close"
                  ></i>
                </td>

                <td *ngIf="ServiceFormPrintData?.formVM_VD.sur_WC">
                  دورة مياة :
                  <i
                    style="color: green; font-size: 19px"
                    class="fas fa-check"
                  ></i>
                </td>
                <td *ngIf="!ServiceFormPrintData?.formVM_VD.sur_WC">
                  دورة مياة :
                  <i
                    style="color: red; font-size: 19px"
                    class="fas fa-close"
                  ></i>
                </td>
              </tr>

              <tr>
                <td *ngIf="ServiceFormPrintData?.formVM_VD.sur_storehouse">
                  مستودع :
                  <i
                    style="color: green; font-size: 19px"
                    class="fas fa-check"
                  ></i>
                </td>
                <td *ngIf="!ServiceFormPrintData?.formVM_VD.sur_storehouse">
                  مستودع :
                  <i
                    style="color: red; font-size: 19px"
                    class="fas fa-close"
                  ></i>
                </td>

                <td *ngIf="ServiceFormPrintData?.formVM_VD.sur_multiusehall">
                  صاله متعددة الإستخدام :
                  <i
                    style="color: green; font-size: 19px"
                    class="fas fa-check"
                  ></i>
                </td>
                <td *ngIf="!ServiceFormPrintData?.formVM_VD.sur_multiusehall">
                  صاله متعددة الإستخدام :
                  <i
                    style="color: red; font-size: 19px"
                    class="fas fa-close"
                  ></i>
                </td>
                <td></td>
                <td></td>
              </tr>

              <tr colspan="4">
                <td
                  style="
                    font-size: 14px;
                    background-color: #0f9c9b;
                    padding: 3px;
                    text-align: center;
                    color: #000;
                    word-wrap: break-word;
                  "
                >
                  الحديقة
                </td>
              </tr>

              <tr>
                <td *ngIf="ServiceFormPrintData?.formVM_VD.gar_swimmingpool">
                  مسبح :
                  <i
                    style="color: green; font-size: 19px"
                    class="fas fa-check"
                  ></i>
                </td>
                <td *ngIf="!ServiceFormPrintData?.formVM_VD.gar_swimmingpool">
                  مسبح :
                  <i
                    style="color: red; font-size: 19px"
                    class="fas fa-close"
                  ></i>
                </td>

                <td *ngIf="ServiceFormPrintData?.formVM_VD.gar_outdoorsitting">
                  جلسة خارجية :
                  <i
                    style="color: green; font-size: 19px"
                    class="fas fa-check"
                  ></i>
                </td>
                <td *ngIf="!ServiceFormPrintData?.formVM_VD.gar_outdoorsitting">
                  جلسة خارجية :
                  <i
                    style="color: red; font-size: 19px"
                    class="fas fa-close"
                  ></i>
                </td>

                <td
                  *ngIf="ServiceFormPrintData?.formVM_VD.gar_Childrensplayarea"
                >
                  منطقة للعب الأطفال :
                  <i
                    style="color: green; font-size: 19px"
                    class="fas fa-check"
                  ></i>
                </td>
                <td
                  *ngIf="!ServiceFormPrintData?.formVM_VD.gar_Childrensplayarea"
                >
                  منطقة للعب الأطفال :
                  <i
                    style="color: red; font-size: 19px"
                    class="fas fa-close"
                  ></i>
                </td>

                <td
                  *ngIf="ServiceFormPrintData?.formVM_VD.gar_Externalstaircase"
                >
                  درج خارجي للقبو :
                  <i
                    style="color: green; font-size: 19px"
                    class="fas fa-check"
                  ></i>
                </td>
                <td
                  *ngIf="!ServiceFormPrintData?.formVM_VD.gar_Externalstaircase"
                >
                  درج خارجي للقبو :
                  <i
                    style="color: red; font-size: 19px"
                    class="fas fa-close"
                  ></i>
                </td>
              </tr>

              <tr>
                <td *ngIf="ServiceFormPrintData?.formVM_VD.gar_waterbodyonly">
                  مسطح مائي فقط :
                  <i
                    style="color: green; font-size: 19px"
                    class="fas fa-check"
                  ></i>
                </td>
                <td *ngIf="!ServiceFormPrintData?.formVM_VD.gar_waterbodyonly">
                  مسطح مائي فقط :
                  <i
                    style="color: red; font-size: 19px"
                    class="fas fa-close"
                  ></i>
                </td>

                <td></td>
                <td></td>
                <td></td>
              </tr>

              <tr colspan="4">
                <td
                  style="
                    font-size: 14px;
                    background-color: #0f9c9b;
                    padding: 3px;
                    text-align: center;
                    color: #000;
                    word-wrap: break-word;
                  "
                >
                  الملحق الخارجي
                </td>
              </tr>

              <tr>
                <td *ngIf="ServiceFormPrintData?.formVM_VD.ext_WC">
                  دورة مياه :
                  <i
                    style="color: green; font-size: 19px"
                    class="fas fa-check"
                  ></i>
                </td>
                <td *ngIf="!ServiceFormPrintData?.formVM_VD.ext_WC">
                  دورة مياه :
                  <i
                    style="color: red; font-size: 19px"
                    class="fas fa-close"
                  ></i>
                </td>

                <td
                  *ngIf="ServiceFormPrintData?.formVM_VD.ext_Multipurposehall"
                >
                  صالة متعددة الإستخدامات :
                  <i
                    style="color: green; font-size: 19px"
                    class="fas fa-check"
                  ></i>
                </td>
                <td
                  *ngIf="!ServiceFormPrintData?.formVM_VD.ext_Multipurposehall"
                >
                  صالة متعددة الإستخدامات :
                  <i
                    style="color: red; font-size: 19px"
                    class="fas fa-close"
                  ></i>
                </td>

                <td *ngIf="ServiceFormPrintData?.formVM_VD.ext_Council">
                  مجلس :
                  <i
                    style="color: green; font-size: 19px"
                    class="fas fa-check"
                  ></i>
                </td>
                <td *ngIf="!ServiceFormPrintData?.formVM_VD.ext_Council">
                  مجلس :
                  <i
                    style="color: red; font-size: 19px"
                    class="fas fa-close"
                  ></i>
                </td>

                <td></td>
              </tr>

              <tr colspan="4">
                <td
                  style="
                    font-size: 14px;
                    background-color: #0f9c9b;
                    padding: 3px;
                    text-align: center;
                    color: #000;
                    word-wrap: break-word;
                  "
                >
                  مواقف السيارات
                </td>
              </tr>

              <tr>
                <td>
                  عدد السيارات :
                  {{ ServiceFormPrintData?.formVM_VD.par_NoofCars }}
                </td>

                <td *ngIf="ServiceFormPrintData?.formVM_VD.par_MoreCars">
                  أكثر :
                  <i
                    style="color: green; font-size: 19px"
                    class="fas fa-check"
                  ></i>
                </td>
                <td *ngIf="!ServiceFormPrintData?.formVM_VD.par_MoreCars">
                  أكثر :
                  <i
                    style="color: red; font-size: 19px"
                    class="fas fa-close"
                  ></i>
                </td>

                <td *ngIf="ServiceFormPrintData?.formVM_VD.par_TwoCar">
                  سيارتان :
                  <i
                    style="color: green; font-size: 19px"
                    class="fas fa-check"
                  ></i>
                </td>
                <td *ngIf="!ServiceFormPrintData?.formVM_VD.par_TwoCar">
                  سيارتان :
                  <i
                    style="color: red; font-size: 19px"
                    class="fas fa-close"
                  ></i>
                </td>

                <td *ngIf="ServiceFormPrintData?.formVM_VD.par_OneCar">
                  سياره واحده :
                  <i
                    style="color: green; font-size: 19px"
                    class="fas fa-check"
                  ></i>
                </td>
                <td *ngIf="!ServiceFormPrintData?.formVM_VD.par_OneCar">
                  سياره واحده :
                  <i
                    style="color: red; font-size: 19px"
                    class="fas fa-close"
                  ></i>
                </td>
              </tr>

              <tr colspan="4">
                <td
                  style="
                    font-size: 14px;
                    background-color: #0f9c9b;
                    padding: 3px;
                    text-align: center;
                    color: #000;
                    word-wrap: break-word;
                  "
                >
                  غرفة السائق
                </td>
              </tr>

              <tr>
                <td>
                  عدد غرف السائق :
                  {{
                    ServiceFormPrintData?.formVM_VD
                      .dri_NoofDriversroomwithtoilets
                  }}
                </td>

                <td
                  *ngIf="
                    ServiceFormPrintData?.formVM_VD
                      .dri_MoreDriversroomwithtoilets
                  "
                >
                  أكثر :
                  <i
                    style="color: green; font-size: 19px"
                    class="fas fa-check"
                  ></i>
                </td>
                <td
                  *ngIf="
                    !ServiceFormPrintData?.formVM_VD
                      .dri_MoreDriversroomwithtoilets
                  "
                >
                  أكثر :
                  <i
                    style="color: red; font-size: 19px"
                    class="fas fa-close"
                  ></i>
                </td>

                <td
                  *ngIf="
                    ServiceFormPrintData?.formVM_VD
                      .dri_TwoDriversroomwithtoilets
                  "
                >
                  غرفة سائقين مع دورات المياه :
                  <i
                    style="color: green; font-size: 19px"
                    class="fas fa-check"
                  ></i>
                </td>
                <td
                  *ngIf="
                    !ServiceFormPrintData?.formVM_VD
                      .dri_TwoDriversroomwithtoilets
                  "
                >
                  غرفة سائقين مع دورات المياه :
                  <i
                    style="color: red; font-size: 19px"
                    class="fas fa-close"
                  ></i>
                </td>

                <td
                  *ngIf="
                    ServiceFormPrintData?.formVM_VD.dri_OneDriversroomtoilet
                  "
                >
                  غرفة سائق + دورة مياه :
                  <i
                    style="color: green; font-size: 19px"
                    class="fas fa-check"
                  ></i>
                </td>
                <td
                  *ngIf="
                    !ServiceFormPrintData?.formVM_VD.dri_OneDriversroomtoilet
                  "
                >
                  غرفة سائق + دورة مياه :
                  <i
                    style="color: red; font-size: 19px"
                    class="fas fa-close"
                  ></i>
                </td>
              </tr>

              <tr colspan="4">
                <td
                  style="
                    font-size: 14px;
                    background-color: #d8d8d8;
                    padding: 14px;
                    text-align: center;
                    color: #000;
                    word-wrap: break-word;
                  "
                >
                  طلبات اخري :
                  {{ ServiceFormPrintData?.formVM_VD.anotherNotes }}
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
  <div class="modal-footer">
    <button
      (click)="printDiv('reportServiceForm_Des')"
      class="min-w-max p-2 bg-sky-100 hover:bg-sky-500 rounded-lg duration-300 hover:text-white aspect-square w-10"
    >
      <i class="fa fa-print"></i>
    </button>
    <button
      type="button"
      (click)="modal.dismiss()"
      mat-raised-button
      color="basic"
    >
      {{ "No" | translate }}
    </button>
  </div>
</ng-template>

<ng-template #sendWhatsApp let-modal>
  <!-- header -->
  <div
    style="background-color: var(--base-color)"
    class="modal-header text-white flex justify-between items-center"
  >
    <h4 class="m-0">
      <span class="text-2xl">{{ "إرسال عرض السعر عن طريق الواتس اب" | translate }}</span>
      <i style="margin-right: 10px;" class="fa-brands fa-whatsapp"></i>
    </h4>
    <button
      type="button"
      class="text-2xl text-white m-0"
      (click)="modal.dismiss()"
    >
      <i class="fa-solid fa-xmark"></i>
    </button>
  </div>

  <div class="modal-body">
    <ng-container>
      <form class="grid gap-3 grid-cols-1 md:grid-cols-2" #WhatsAppForm="ngForm">

        <div class="form-group">
          <label for="WhatsAppcustomerPhone" class="text-right col-form-label block">
            {{ "To" | translate }}
          </label>
          <input
            required
            #to234="ngModel"
            [(ngModel)]="WhatsAppModals.customerPhoneOffer"
            ngModel
            class="form-control"
            type="text"
            id="WhatsAppcustomerPhone"
            name="WhatsAppcustomerPhone"
            readonly
          />
        </div>

        <div class="form-group col-span-1 md:col-span-2">
          <label for="WhatsAppText" class="text-right col-form-label block">
            {{ "Text" | translate }}
          </label>
          <textarea
            required
            #WhatsAppText="ngModel"
            ngModel
            class="form-control"
            type="text"
            id="WhatsAppText"
            name="WhatsAppText"
          ></textarea>
        </div>

        <div class="upload col-span-1 md:col-span-2">

          <p style="text-align: center;color: red;font-weight: bold; " class="p-1 bg-red-100">
            {{ "يرجي تحميل عرض السعر PDF و ارفاقها هنا لكي تصل الي العميل بالشكل الجديد" | translate }}
          </p>

          <file-upload [(ngModel)]="uploadedFiles" name="files"></file-upload>
        </div>

        <div
          class="flex gap-2 pt-3 border-t border-neutral-300 col-span-1 md:col-span-2 mt-2"
        >
          <button
            class="btn bg-base text-white"
            type="submit"
            (click)="SendWOfferPrice(WhatsAppForm.value,modal)"
          >
            {{ "Send" | translate }}
          </button>
          <button (click)="modal?.dismiss()" class="btn btn-secondary">
            {{ "Back" | translate }}
          </button>
        </div>
      </form>
    </ng-container>
  </div>
</ng-template>

  <!-- btn add  -->
  <ng-template #StorehouseModal let-modal>
    <div class="modal-header bg-base text-white">
      <h4
        class="modal-title mb-0"
        id="modal-basic-title"
        [translate]="'name'"
        [translateParams]="{ ar: 'اضافة جديدة', en: 'Add New' }"
      ></h4>
      <button
        type="button"
        class="text-2xl text-white m-0"
        (click)="modal.dismiss('Cross click')"
      >
        <i class="fa-solid fa-xmark"></i>
      </button>
    </div>
    <div class="modal-body text-center">
      <form #addStorehouse="ngForm" class="grid grid-cols-1 md:grid-cols-2 gap-2">
        <div class="form-group">
          <label for="BuildNameArtxt" class="text-right col-form-label block">
            {{ "nameAr" | translate }}
            <span class="text-danger">*</span></label
          >
          <input
            required
            #StorehouseNameAr="ngModel"
            ngModel
            [(ngModel)]="dataAdd.Storehouse.nameAr"
            class="form-control"
            type="text"
            id="StorehouseNameArtxt"
            name="StorehouseNameArtxt"
            autocomplete="off"
            [placeholder]="('Write' | translate) + ' ' + ('nameAr' | translate)"
          />
        </div>
        <div class="form-group">
          <label for="StorehouseNameEntxt" class="text-right col-form-label block">
            {{ "nameEn" | translate }}
            <span class="text-danger">*</span></label
          >
          <div style="display: inline-flex; width: 100%">
            <input
              required
              #StorehouseNameEnValue
              #StorehouseNameEn="ngModel"
              [(ngModel)]="dataAdd.Storehouse.nameEn"
              ngModel
              class="form-control"
              type="text"
              id="StorehouseNameEntxt"
              name="StorehouseNameEntxt"
              autocomplete="off"
              [placeholder]="('Write' | translate) + ' ' + ('nameEn' | translate)"
            />
            <a
              class="btn"
              id="CopyStorehouseName2"
              (click)="dataAdd.Storehouse.nameEn = dataAdd.Storehouse.nameAr"
              ><i class="fa fa-copy"></i
            ></a>
          </div>
        </div>
      </form>
      <div class="max-h-80 overflow-auto px-2">
        <table class="table table-hover">
          <thead>
            <tr>
              <th>{{ "nameAr" | translate }}</th>
              <th>{{ "nameEn" | translate }}</th>
              <th
                [translate]="'name'"
                [translateParams]="{
                  ar: 'خيارات',
                  en: 'Operations'
                }"
              ></th>
            </tr>
          </thead>
          <tbody>
            <tr
              *ngFor="let type of StorehousePopup"
              (dblclick)="
                setStorehouseInSelect(type, StorehouseModal);
                modal.dismiss('Cross click')
              "
            >
              <td>{{ type.name }}</td>
              <td>{{ type.nameEn }}</td>
              <td class="flex gap-2 justify-center">
                <button
                  class="p-2 bg-orange-100 hover:bg-orange-500 rounded-lg duration-300 hover:text-white aspect-square w-10"
                  (click)="
                    dataAdd.Storehouse.nameAr = type.name;
                    dataAdd.Storehouse.nameEn = type.nameEn;
                    dataAdd.Storehouse.id = type.id
                  "
                >
                  <i class="fa-regular fa-pen-to-square"></i>
                </button>
                <button
                  (click)="getStorehouseRow(type); open(deleteStorehouse)"
                  class="p-2 bg-red-100 hover:bg-red-500 rounded-lg duration-300 hover:text-white aspect-square w-10"
                >
                  <i class="fa-solid fa-trash-can"></i>
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="flex gap-2 mt-3 pt-3 border-t border-neutral-300">
        <button
          class="btn bg-base text-white"
          type="submit"
          [disabled]="addStorehouse.invalid"
          (click)="saveStorehouse()"
        >
          {{ "Save" | translate }}
        </button>
        <button (click)="modal.dismiss('Cross click')" class="btn btn-secondary">
          {{ "Back" | translate }}
        </button>
        <button (click)="resetStorehouse()" class="btn bg-base text-white">
          {{ "جديد" | translate }}
        </button>
      </div>
    </div>
  </ng-template>
  
  <ng-template #deleteStorehouse let-modal>
    <div class="modal-body text-center">
      <p
        [translate]="'name'"
        [translateParams]="{
          ar: 'هل تريد بالتأكيد حذف هذا الصف',
          en: 'Are you sure to delete this row ?'
        }"
      ></p>
      <div class="flex gap-2 justify-center mt-3">
        <button
          type="button"
          mat-raised-button
          color="warn"
          (click)="confirmStorehouseDelete(); modal.dismiss()"
        >
          {{ "Yes" | translate }}
        </button>
        <button
          type="button"
          (click)="modal.dismiss()"
          mat-raised-button
          color="basic"
        >
          {{ "No" | translate }}
        </button>
      </div>
    </div>
  </ng-template>
  <ng-template #ServiceTypeModal let-modal>
    <div class="modal-header bg-base text-white">
      <h4
        class="modal-title mb-0"
        id="modal-basic-title"
        [translate]="'name'"
        [translateParams]="{ ar: 'اضافة جديدة', en: 'Add New' }"
      ></h4>
      <button
        type="button"
        class="text-2xl text-white m-0"
        (click)="modal.dismiss('Cross click')"
      >
        <i class="fa-solid fa-xmark"></i>
      </button>
    </div>
    <div class="modal-body text-center">
      <form #addServiceType="ngForm" class="grid grid-cols-1 md:grid-cols-2 gap-2">
        <div class="form-group">
          <label for="BuildNameArtxt" class="text-right col-form-label block">
            {{ "nameAr" | translate }}
            <span class="text-danger">*</span></label
          >
          <input
            required
            #ServiceTypeNameAr="ngModel"
            ngModel
            [(ngModel)]="dataAdd.ServiceType.nameAr"
            class="form-control"
            type="text"
            id="ServiceTypeNameArtxt"
            name="ServiceTypeNameArtxt"
            autocomplete="off"
            [placeholder]="('Write' | translate) + ' ' + ('nameAr' | translate)"
          />
        </div>
        <div class="form-group">
          <label for="ServiceTypeNameEntxt" class="text-right col-form-label block">
            {{ "nameEn" | translate }}
            <span class="text-danger">*</span></label
          >
          <div style="display: inline-flex; width: 100%">
            <input
              required
              #ServiceTypeNameEnValue
              #ServiceTypeNameEn="ngModel"
              [(ngModel)]="dataAdd.ServiceType.nameEn"
              ngModel
              class="form-control"
              type="text"
              id="ServiceTypeNameEntxt"
              name="ServiceTypeNameEntxt"
              autocomplete="off"
              [placeholder]="('Write' | translate) + ' ' + ('nameEn' | translate)"
            />
            <a
              class="btn"
              id="CopyServiceTypeName2"
              (click)="dataAdd.ServiceType.nameEn = dataAdd.ServiceType.nameAr"
              ><i class="fa fa-copy"></i
            ></a>
          </div>
        </div>
      </form>
      <div class="max-h-80 overflow-auto px-2">
        <table class="table table-hover">
          <thead>
            <tr>
              <th>{{ "nameAr" | translate }}</th>
              <th>{{ "nameEn" | translate }}</th>
              <th
                [translate]="'name'"
                [translateParams]="{
                  ar: 'خيارات',
                  en: 'Operations'
                }"
              ></th>
            </tr>
          </thead>
          <tbody>
            <tr
              *ngFor="let type of ServiceTypePopup"
              (dblclick)="
                setServiceTypeInSelect(type, ServiceTypeModal);
                modal.dismiss('Cross click')
              "
            >
              <td>{{ type.name }}</td>
              <td>{{ type.nameEn }}</td>
              <td class="flex gap-2 justify-center">
                <button
                  class="p-2 bg-orange-100 hover:bg-orange-500 rounded-lg duration-300 hover:text-white aspect-square w-10"
                  (click)="
                    dataAdd.ServiceType.nameAr = type.name;
                    dataAdd.ServiceType.nameEn = type.nameEn;
                    dataAdd.ServiceType.id = type.id
                  "
                >
                  <i class="fa-regular fa-pen-to-square"></i>
                </button>
                <button
                  (click)="getServiceTypeRow(type); open(deleteServiceType)"
                  class="p-2 bg-red-100 hover:bg-red-500 rounded-lg duration-300 hover:text-white aspect-square w-10"
                >
                  <i class="fa-solid fa-trash-can"></i>
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="flex gap-2 mt-3 pt-3 border-t border-neutral-300">
        <button
          class="btn bg-base text-white"
          type="submit"
          [disabled]="addServiceType.invalid"
          (click)="saveServiceType()"
        >
          {{ "Save" | translate }}
        </button>
        <button (click)="modal.dismiss('Cross click')" class="btn btn-secondary">
          {{ "Back" | translate }}
        </button>
        <button (click)="resetServiceType()" class="btn bg-base text-white">
          {{ "جديد" | translate }}
        </button>
      </div>
    </div>
  </ng-template>
  
  <ng-template #deleteServiceType let-modal>
    <div class="modal-body text-center">
      <p
        [translate]="'name'"
        [translateParams]="{
          ar: 'هل تريد بالتأكيد حذف هذا الصف',
          en: 'Are you sure to delete this row ?'
        }"
      ></p>
      <div class="flex gap-2 justify-center mt-3">
        <button
          type="button"
          mat-raised-button
          color="warn"
          (click)="confirmServiceTypeDelete(); modal.dismiss()"
        >
          {{ "Yes" | translate }}
        </button>
        <button
          type="button"
          (click)="modal.dismiss()"
          mat-raised-button
          color="basic"
        >
          {{ "No" | translate }}
        </button>
      </div>
    </div>
  </ng-template>