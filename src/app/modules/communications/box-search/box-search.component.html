<div class="add-search pb-4">
  <app-navigator [title]="title"></app-navigator>

  <div class="tables-data mt-3 overflow-hidden">


    <div class="flex gap-2 flex-wrap items-end">
      <div class="w-fit">
        <input class="form-control" placeholder="{{'search' | translate}}" #input />
      </div>
      <div class="max-w-xs">
        <label class="col-form-label" [translate]="'name'" [translateParams]="{
                    ar: ' نوع البحث',
                    en: 'Search Type'
                  }">
        </label>
        <ng-select class="w-full p-0" [(ngModel)]="data.filter.searchType" name="searchType"
          placeholder=" {{ 'Chose' | translate }}">
          <ng-option [value]="1" [translate]="'name'" [translateParams]="{
                    ar: 'الرقم',
                    en: 'Number'
                  }">

          </ng-option>
          <ng-option [value]="2" [translate]="'name'" [translateParams]="{
                    ar: 'الموضوع',
                    en: 'Topic'
                  }">

          </ng-option>
          <ng-option [value]="3" [translate]="'name'" [translateParams]="{
                    ar: 'الجهة الى',
                    en: 'Side To'
                  }">

          </ng-option>
          <ng-option [value]="4" [translate]="'name'" [translateParams]="{
                    ar: 'الجهة من',
                    en: 'Side From'
                  }">

          </ng-option>
          <ng-option [value]="5" [translate]="'name'" [translateParams]="{
                    ar: 'نوع الصادر',
                    en: 'OutBox Type'
                  }">

          </ng-option>
          <ng-option [value]="6" [translate]="'name'" [translateParams]="{
                    ar: 'نوع الوارد',
                    en: 'Inbox Type'
                  }">

          </ng-option>

        </ng-select>
      </div>

      <div class="max-w-xs" *ngIf="data.filter.searchType == 1">
        <label [translate]="'name'" [translateParams]="{
                    ar: 'الرقم',
                    en: 'Number'
                  }"> </label>
        <input type="text" class="form-control" />
      </div>
      <div class="max-w-xs" *ngIf="data.filter.searchType == 2">
        <label [translate]="'name'" [translateParams]="{
                    ar: 'الموضوع',
                    en: 'Topic'
                  }"></label>
        <input type="text" class="form-control" />
      </div>
      <div class="max-w-xs" *ngIf="data.filter.searchType == 3">
        <label [translate]="'name'" [translateParams]="{
                    ar: 'الجهة الى',
                    en: 'Side To'
                  }"></label>
        <input type="text" class="form-control" />
      </div>
      <div class="max-w-xs" *ngIf="data.filter.searchType == 4">
        <label [translate]="'name'" [translateParams]="{
                    ar: 'الجهة من',
                    en: 'Side From'
                  }"></label>
        <input type="text" class="form-control" />
      </div>

      <div class="max-w-xs" *ngIf="data.filter.searchType == 5">
        <label [translate]="'name'" [translateParams]="{
                      ar: 'نوع الصادر',
                    en: 'OutBox Type'
                  }"></label>
        <ng-select class="w-full p-0" placeholder="{{ 'Chose' | translate }}">
          <ng-option [value]="1">
            خيار
          </ng-option>

        </ng-select>
      </div>
      <div class="max-w-xs" *ngIf="data.filter.searchType == 6">
        <label [translate]="'name'" [translateParams]="{
                     ar: 'نوع الوارد',
                    en: 'Inbox Type'
                  }"></label>
        <ng-select class="w-full p-0" placeholder="{{ 'Chose' | translate }}">
          <ng-option [value]="1">
            خيار
          </ng-option>

        </ng-select>
      </div>
      <button class="btn btn-primary" (click)="data.filter.enable = !data.filter.enable" [translate]="'name'"
        [translateParams]="{
        ar: 'فلترة بالوقت',
        en: 'Time Filter'
      }"></button>
      <div class="form-group timeInput" *ngIf="data.filter.enable">
        <input placeholder="{{ 'Chose Date' | translate }}" [(ngModel)]="data.filter.date" type="text"
          class="form-control" bsDaterangepicker #dpr="bsDaterangepicker" />
      </div>
      <mat-checkbox class="example-margin mt-3" color="primary"><span [translate]="'name'" [translateParams]="{
                              ar: 'الكل',
                              en: 'All'
                            }"></span> </mat-checkbox>
    </div>



    <!-- table -->
    <div class="overflow-auto mt-4" id="data-table">
      <table mat-table [dataSource]="data.outinboxfile" matSort
        class="mat-elevation-z8 rounded-t-lg overflow-hidden w-max">
        <ng-container matColumnDef="OutInTypeName">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span [translate]="'name'" [translateParams]="{
                      ar: 'النوع',
                      en: 'Type'
                    }"></span>
          </th>
          <td mat-cell *matCellDef="let element">
            {{ element.OutInTypeName }}
          </td>
        </ng-container>
        <ng-container matColumnDef="Number">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span [translate]="'name'" [translateParams]="{
                      ar: 'الرقم',
                      en: 'Number'
                    }"></span>
          </th>
          <td mat-cell *matCellDef="let element">
            {{ element.Number }}
          </td>
        </ng-container>
        <ng-container matColumnDef="RelatedToName">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span [translate]="'name'" [translateParams]="{
                      ar: 'ربط مع (صادر/وارد)',
                      en: ' Connection With (OutBox/InBox)'
                    }"></span>
          </th>
          <td mat-cell *matCellDef="let element">
            {{ element.RelatedToName }}
          </td>
        </ng-container>
        <ng-container matColumnDef="Date">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span [translate]="'name'" [translateParams]="{
                      ar: 'التاريخ',
                      en: ' Date'
                    }"></span>
          </th>
          <td mat-cell *matCellDef="let element">
            {{ element.Date }}
          </td>
        </ng-container>
        <ng-container matColumnDef="Topic">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span [translate]="'name'" [translateParams]="{
                      ar: 'الموضوع',
                      en: 'Topic'
                    }"></span>
          </th>
          <td mat-cell *matCellDef="let element">
            {{ element.Topic }}
          </td>
        </ng-container>
        <ng-container matColumnDef="FileCount">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span [translate]="'name'" [translateParams]="{
                      ar: 'عدد الملفات',
                      en: 'Files Count'
                    }"></span>
          </th>
          <td mat-cell *matCellDef="let element">
            {{ element.FileCount }}
          </td>
        </ng-container>
        <ng-container matColumnDef="ProjectNumber">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span [translate]="'name'" [translateParams]="{
                      ar: 'رقم المشروع',
                      en: 'Project Number'
                    }"></span>
          </th>
          <td mat-cell *matCellDef="let element">
            {{ element.ProjectNumber }}
          </td>
        </ng-container>
        <ng-container matColumnDef="CustomerName">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span [translate]="'name'" [translateParams]="{
                      ar: 'الجنسية',
                      en: 'Customer '
                    }"></span>
          </th>
          <td mat-cell *matCellDef="let element">
            {{ element.CustomerName }}
          </td>
        </ng-container>
        <ng-container matColumnDef="ArchiveFilesName">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span [translate]="'name'" [translateParams]="{
                      ar: 'ملف الأرشيف',
                      en: 'Archive File '
                    }"></span>
          </th>
          <td mat-cell *matCellDef="let element">
            {{ element.ArchiveFilesName }}
          </td>
        </ng-container>
        <ng-container matColumnDef="SideFromName">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span [translate]="'name'" [translateParams]="{
                      ar: 'من  ',
                      en: 'From'
                    }"></span>
          </th>
          <td mat-cell *matCellDef="let element">
            {{ element.SideFromName }}
          </td>
        </ng-container>
        <ng-container matColumnDef="SideToName">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span [translate]="'name'" [translateParams]="{
                      ar: 'إلى',
                      en: 'To'
                    }"></span>
          </th>
          <td mat-cell *matCellDef="let element">
            {{ element.SideToName }}
          </td>
        </ng-container>


        <ng-container matColumnDef="operations">
          <th class="noPrint" mat-header-cell *matHeaderCellDef [translate]="'name'" [translateParams]="{
                    ar: 'خيارات',
                    en: 'Operations'
                  }"></th>
          <td class="noPrint" mat-cell *matCellDef="let element">
            <div class="flex gap-1 justify-center py-2">
              <button routerLink="/communications/InboxAdd"
                class="min-w-max p-2 bg-orange-100 hover:bg-orange-500 rounded-lg duration-300 hover:text-white aspect-square w-10">
                <i class="fa-regular fa-pen-to-square"></i>
              </button>

            </div>
          </td>
        </ng-container>

        <!-- Symbol Column -->

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>

        <tr mat-row *matRowDef="let row; columns: displayedColumns" class="duration-300 hover:bg-slate-100"></tr>
        <!-- Row shown when there is no matching data. -->
        <tr class="mat-row" *matNoDataRow>
          <td class="mat-cell" colspan="4">
            {{ "No result found for " }} "{{ input.value }}"
          </td>
        </tr>
      </table>
    </div>
    <mat-paginator [pageSizeOptions]="[10, 25]"> </mat-paginator>
  </div>
</div>
<ng-template #viewFile let-modal>
  <div style="background-color: var(--base-color)" class="modal-header text-white flex justify-between items-center">
    <h4 class="m-0">
      <span class="text-2xl" [translate]="'name'" [translateParams]="{
              ar: 'الملف ',
              en: 'Fiel'
            }">

      </span>
    </h4>
    <button type="button" class="text-2xl text-white m-0" (click)="modal.dismiss()">
      <i class="fa-solid fa-xmark"></i>
    </button>
  </div>
  <div class="modal-body">
    <div class="h-[60vh]">
      <img class="w-100 h-100 object-cover rounded-lg" src="https://tameercloud.com{{data.tempData}}" alt="">
    </div>
    <div class="flex gap-2 justify-end pt-3 border-t border-neutral-300 col-span-1 md:col-span-2 mt-2">
      <button class="btn btn-secondary" (click)="modal.dismiss()">
        {{ "Back" | translate }}
      </button>
    </div>
  </div>
</ng-template>