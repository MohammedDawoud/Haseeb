"use strict";(self.webpackChunkhaseeb_cloud=self.webpackChunkhaseeb_cloud||[]).push([[882],{9454:(Z,D,d)=>{d.d(D,{A:()=>l});class l{}},6028:(Z,D,d)=>{d.d(D,{U:()=>C});var l=d(2340),b=d(4650),M=d(529),S=d(9053);let C=(()=>{class g{constructor(r,t){this.http=r,this.exportationService=t,this.apiEndPoint="",this.apiEndPoint=l.N.apiEndPoint}GetAllContractsNotPaid(r){return this.http.get(`${l.N.apiEndPoint}Contract/GetAllContractsNotPaid?&FirstLoad=${r}`)}FillAllUsersSelectAll(){return this.http.get(this.apiEndPoint+"ControllingTask/FillAllUsersSelectAll")}GetAllContractsBySearch(r){return this.http.post(this.apiEndPoint+"Contract/GetAllContractsBySearch",r)}CancelContract(r){return this.http.post(this.apiEndPoint+"Contract/CancelContract",{},{params:{ContractId:r}})}DeleteDraft(r){return this.http.post(this.apiEndPoint+"Draft/DeleteDraft",{},{params:{DraftId:r}})}DeleteCustomerPayment(r){return this.http.post(this.apiEndPoint+"CustomerPayments/DeleteCustomerPayment",{},{params:{PaymentId:r}})}Connect_appendFile_Draft(r,t){return this.http.post(this.apiEndPoint+"Draft/Connect_appendFile_Draft",{},{params:{ProjectId:r,uploadedFile:t}})}DeleteDraft_Templates(r){return this.http.post(this.apiEndPoint+"Drafts_Templates/DeleteDraft_Templates",{},{params:{DraftId:r}})}Connect_appendFile_Draft2(r,t,m){return this.http.post(this.apiEndPoint+"Draft/Connect_appendFile_Draft2",{},{params:{ContractId:r,DraftId:t,uploadedFile:m}})}DownloadFile_Draft(r){return this.http.post(this.apiEndPoint+"Contract/DownloadFile_Draft",{},{params:{ContractId:r}})}SaveProjectContract(r){return this.http.post(this.apiEndPoint+"Contract/SaveProjectContract",r)}UploadProjectContractExtra(r){return this.http.post(this.apiEndPoint+"FileUpload/UploadProjectContractExtra",r)}GetAllServicesPrice(){return this.http.get(this.apiEndPoint+"Voucher/GetAllServicesPrice")}ConvertNumToString(r){return this.http.get(`${l.N.apiEndPoint}General/ConvertNumToString?Num=${r}`)}GetServicesPriceVouByParentId(r,t){return this.http.get(`${l.N.apiEndPoint}Voucher/GetServicesPriceVouByParentId?ParentId=${r}&offerid=${t}`)}GetServicesPriceByParentId(r){return this.http.get(`${l.N.apiEndPoint}Voucher/GetServicesPriceByParentId?ParentId=${r}`)}GetServicesPriceVouByParentIdAndContract(r,t){return this.http.get(`${l.N.apiEndPoint}Voucher/GetServicesPriceVouByParentIdAndContract?ParentId=${r}&ContractId=${t}`)}GetContractserviceBycontractid(r){return this.http.get(`${l.N.apiEndPoint}Contract/GetContractserviceBycontractid?Contractid=${r}`)}GetOfferservicenByid(r){return this.http.get(`${l.N.apiEndPoint}OffersPrice/GetOfferservicenByid?&OfferId=${r}`)}GetServicesPriceByServiceId(r){return this.http.get(`${l.N.apiEndPoint}Voucher/GetServicesPriceByServiceId?ServiceId=${r}`)}EditContractService(r){const m=JSON.stringify(r);return this.http.post(this.apiEndPoint+"Contract/EditContractService",m,{headers:{"content-type":"application/json"}})}GenerateCustomerPayments(r){const m=JSON.stringify(r);return this.http.post(this.apiEndPoint+"Contract/GenerateCustomerPayments",m,{headers:{"content-type":"application/json"}})}SaveDraftDetails(r){const m=JSON.stringify(r);return this.http.post(this.apiEndPoint+"Draft/SaveDraftDetails",m,{headers:{"content-type":"application/json"}})}SaveCustomerPayment(r){const m=JSON.stringify(r);return this.http.post(this.apiEndPoint+"CustomerPayments/SaveCustomerPayment",m,{headers:{"content-type":"application/json"}})}GetBranchOrganization(){return this.http.get(this.apiEndPoint+"Organizations/GetBranchOrganization")}GetEmployeeJob(r){return this.http.get(`${l.N.apiEndPoint}Employee/GetEmployeeJob?EmpId=${r}`)}GetTypeOfProjct(r){return this.http.get(`${l.N.apiEndPoint}Project/GetTypeOfProjct?ProjectId=${r}`)}FillCustomerSelectWProC(){return this.http.get(this.apiEndPoint+"Customer/FillCustomerSelect")}FillCustomerSelectWProC3(){return this.http.get(this.apiEndPoint+"Customer/FillCustomerSelect")}FillCustomerSelectWProC2(){return this.http.get(this.apiEndPoint+"Customer/FillCustomerSelect")}FillEmployeeSelect(){return this.http.get(this.apiEndPoint+"Employee/FillEmployeeSelect")}FillProjectSelectByCustomerId2(r){return this.http.get(`${l.N.apiEndPoint}Project/FillProjectSelectByCustomerId2?param=${r}`)}FillAllOfferTodropdownOld(r){return this.http.get(`${l.N.apiEndPoint}OffersPrice/FillAllOfferTodropdownOld?param=${r}`)}FillAllContractserviceByConId(r){return this.http.get(`${l.N.apiEndPoint}Contract/FillAllContractserviceByConId?param=${r}`)}GetAllCustomerPayments(r){return this.http.get(`${l.N.apiEndPoint}CustomerPayments/GetAllCustomerPayments?ContractId=${r}`)}GetInvoiceIDByProjectID(r){return this.http.get(`${l.N.apiEndPoint}Voucher/GetInvoiceIDByProjectID?ProjectId=${r}`)}GenerateContractNumber(){return this.http.get(this.apiEndPoint+"Contract/GenerateContractNumber")}GenerateContractNumber2(){return this.http.get(this.apiEndPoint+"Contract/GenerateContractNumber2")}GenerateContractNumber3(){return this.http.get(this.apiEndPoint+"Contract/GenerateContractNumber3")}GenerateContractNumber4(){return this.http.get(this.apiEndPoint+"Contract/GenerateContractNumber4")}GenerateContractNumber5(){return this.http.get(this.apiEndPoint+"Contract/GenerateContractNumber5")}GenerateCustPaymentNumber(r){return this.http.get(`${l.N.apiEndPoint}CustomerPayments/GenerateCustPaymentNumber?&ContractId=${r}`)}GetProjectById(r){return this.http.get(`${l.N.apiEndPoint}Project/GetProjectById?ProjectId=${r}`)}GetEmployeeById(r){return this.http.get(`${l.N.apiEndPoint}Employee/GetEmployeeById?EmpId=${r}`)}GetCustomersByCustomerId(r){return this.http.get(`${l.N.apiEndPoint}Customer/GetCustomersByCustomerId?CustomerId=${r}`)}GetProjectDurationStr(r,t){return this.http.get(`${l.N.apiEndPoint}General/GetProjectDurationStr?start=${r}&&end=${t}`)}SaveContract(r){const m=JSON.stringify(r);return this.http.post(this.apiEndPoint+"Contract/SaveContract",m,{headers:{"content-type":"application/json"}})}SaveContract_2(r){const m=JSON.stringify(r);return this.http.post(this.apiEndPoint+"Contract/SaveContract_2",m,{headers:{"content-type":"application/json"}})}PostInvoiceAndPayPayment(r){const m=JSON.stringify(r);return this.http.post(this.apiEndPoint+"Contract/PostInvoiceAndPayPayment",m,{headers:{"content-type":"application/json"}})}PostInvoiceAndPayPayment2(r){const m=JSON.stringify(r);return this.http.post(this.apiEndPoint+"Contract/PostInvoiceAndPayPayment2",m,{headers:{"content-type":"application/json"}})}UploadProjectContract(r){return this.http.post(`${this.apiEndPoint}FileUpload/UploadProjectContract`,r)}printnewcontract(r){return this.http.get(`${l.N.apiEndPoint}Contract/printnewcontract?ContractId=${r}`)}printaqsatdofaatContract(r){return this.http.get(`${l.N.apiEndPoint}Contract/printaqsatdofaatContract?ContractId=${r}`)}GetAllDraftsbyProjectsType_2(r){return this.http.get(`${l.N.apiEndPoint}Draft/GetAllDraftsbyProjectsType_2?ProjectTypeId=${r}`)}GetAllDraftsDetailsbyProjectId(r){return this.http.get(`${l.N.apiEndPoint}Draft/GetAllDraftsDetailsbyProjectId?ProjectId=${r}`)}FillProjectTypeSelect(){return this.http.get(this.apiEndPoint+"ProjectType/FillProjectTypeSelect")}FillAllDraft_Template(){return this.http.get(this.apiEndPoint+"Drafts_Templates/FillAllDraft_Template")}ConnectDraft_Templates_WithProject(r,t){return this.http.get(`${l.N.apiEndPoint}Drafts_Templates/ConnectDraft_Templates_WithProject?DraftId=${r}&ProjectTypeId=${t}`)}SaveDraft(r){return this.http.post(`${this.apiEndPoint}Drafts_Templates/SaveDraft`,r)}GetReportGrid(r){return this.http.post(`${this.apiEndPoint}Contract/GetReportGrid`,r)}}return g.\u0275fac=function(r){return new(r||g)(b.LFG(M.eN),b.LFG(S.t))},g.\u0275prov=b.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})()},7249:(Z,D,d)=>{d.d(D,{u:()=>C});var l=d(2340),b=d(4650),M=d(529),S=d(9053);let C=(()=>{class g{constructor(r,t){this.http=r,this.exportationService=t,this.apiEndPoint="",this.apiEndPoint=l.N.apiEndPoint}GetAllDebentures(r){return this.http.get(`${l.N.apiEndPoint}Debentures/GetAllDebentures?&Type=${r}`)}GetAllquantities(r){return this.http.post(this.apiEndPoint+"Account/GetAllQuantities",r)}GetAllItemMovement(r){return this.http.post(this.apiEndPoint+"Account/GetAllItemMovement",r)}SaveDebenture(r){return this.http.post(this.apiEndPoint+"Debentures/SaveDebenture",r)}DeleteDebenture(r){return this.http.post(this.apiEndPoint+"Debentures/DeleteDebenture",{},{params:{DebentureId:r}})}GenerateDebentureNumber(r){return this.http.get(`${l.N.apiEndPoint}Debentures/GenerateDebentureNumber?&Type=${r}`)}GetAllStorehouses(){return this.http.get(this.apiEndPoint+"Storehouse/GetAllStorehouses")}SaveStorehouse(r){return this.http.post(this.apiEndPoint+"Storehouse/SaveStorehouse",r)}DeleteStorehouse(r){return this.http.post(this.apiEndPoint+"Storehouse/DeleteStorehouse",{},{params:{StorehouseId:r}})}FillStorehouseSelect(){return this.http.get(this.apiEndPoint+"Storehouse/FillStorehouseSelect")}FillAllServicePrice(){return this.http.get(this.apiEndPoint+"Voucher/FillAllServicePrice")}}return g.\u0275fac=function(r){return new(r||g)(b.LFG(M.eN),b.LFG(S.t))},g.\u0275prov=b.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})()},3223:(Z,D,d)=>{d.d(D,{Z:()=>Nt});var l=d(671),b=d(1366),M=d(4045),S=d(1135),C=d(4006),g=d(8723),A=d(1206),t=(d(4604),d(4650)),m=d(1745),U=d(7536),q=d(7185),J=d(6028),V=d(6972),w=d(9383),F=d(6895),B=d(445),W=d(4859),E=d(8796),G=d(5612),O=d(9549),z=d(4144),j=d(1948),P=d(6257),R=d(2842);const $=["MergeInvoiceDataModal"];function H(s,c){1&s&&(t._uU(0),t.ALo(1,"translate")),2&s&&t.Oqu(t.lcZ(1,1,"Contract data"))}function K(s,c){if(1&s&&(t.TgZ(0,"ng-option",58),t._uU(1),t.qZA()),2&s){const e=c.$implicit;t.Q6J("value",e.id),t.xp6(1),t.Oqu(e.name)}}function Q(s,c){if(1&s&&(t.TgZ(0,"ng-option",58),t._uU(1),t.qZA()),2&s){const e=c.$implicit;t.Q6J("value",e.id),t.xp6(1),t.Oqu(e.name)}}function Y(s,c){if(1&s&&(t.TgZ(0,"ng-option",58),t._uU(1),t.qZA()),2&s){const e=c.$implicit;t.Q6J("value",e.id),t.xp6(1),t.Oqu(e.name)}}function X(s,c){if(1&s){const e=t.EpF();t.TgZ(0,"div",21)(1,"div",10)(2,"label",84),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"ng-select",85),t.NdJ("change",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.offerpriceChange())}),t.ALo(6,"translate"),t.YNc(7,Y,2,2,"ng-option",25),t.qZA()()()}if(2&s){const e=t.oxw();t.xp6(3),t.hij(" ",t.lcZ(4,3,"Offer Price"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(6,5,"Chose")),t.xp6(2),t.Q6J("ngForOf",e.LoadofferPrice)}}function tt(s,c){1&s&&(t._uU(0),t.ALo(1,"translate")),2&s&&t.Oqu(t.lcZ(1,1,"Financial details"))}function et(s,c){if(1&s&&(t.TgZ(0,"div",86)(1,"div",10)(2,"label",87),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._UZ(5,"input",88)(6,"input",89),t.qZA()()),2&s){const e=t.oxw();t.xp6(3),t.AsE(" ",t.lcZ(4,2,"invoiceRegistered")," ",e.ContractModalCustom.InvoiceNumber," ")}}function ot(s,c){1&s&&(t.TgZ(0,"span",101),t._uU(1,"\u0631.\u0633"),t.qZA())}function nt(s,c){1&s&&(t.TgZ(0,"span",101),t._uU(1,"\u0631.\u0633"),t.qZA())}function at(s,c){1&s&&(t.TgZ(0,"span",101),t._uU(1,"\u0631.\u0633"),t.qZA())}const _=function(){return{standalone:!0}};function rt(s,c){if(1&s){const e=t.EpF();t.TgZ(0,"tr",90)(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",91),t.NdJ("click",function(){const a=t.CHM(e).$implicit,i=t.oxw(),u=t.MAs(211);return t.KtG(i.open(u,null,"servicesList_Contract",a.idRow))}),t.TgZ(4,"input",92),t.NdJ("ngModelChange",function(n){const i=t.CHM(e).$implicit;return t.KtG(i.accountJournaltxt=n)}),t.qZA()(),t.TgZ(5,"td")(6,"input",92),t.NdJ("ngModelChange",function(n){const i=t.CHM(e).$implicit;return t.KtG(i.UnitConst=n)}),t.qZA()(),t.TgZ(7,"td")(8,"input",93),t.NdJ("ngModelChange",function(n){const i=t.CHM(e).$implicit;return t.KtG(i.QtyConst=n)})("keyup",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.CalculateTotal_ContractNew())}),t.qZA()(),t.TgZ(9,"td")(10,"div",94)(11,"input",95),t.NdJ("ngModelChange",function(n){const i=t.CHM(e).$implicit;return t.KtG(i.Amounttxt=n)})("keyup",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.CalculateTotal_ContractNew())}),t.qZA(),t.YNc(12,ot,2,0,"span",96),t.qZA()(),t.TgZ(13,"td")(14,"div",94)(15,"input",97),t.NdJ("ngModelChange",function(n){const i=t.CHM(e).$implicit;return t.KtG(i.taxAmounttxt=n)}),t.qZA(),t.YNc(16,nt,2,0,"span",96),t.qZA()(),t.TgZ(17,"td")(18,"div",94)(19,"input",97),t.NdJ("ngModelChange",function(n){const i=t.CHM(e).$implicit;return t.KtG(i.TotalAmounttxt=n)}),t.qZA(),t.YNc(20,at,2,0,"span",96),t.qZA()(),t.TgZ(21,"td",94)(22,"button",98),t.NdJ("click",function(){const a=t.CHM(e).$implicit,i=t.oxw(),u=t.MAs(209);return t.KtG(i.open(u,a,"serviceDetails"))}),t._UZ(23,"i",99),t.qZA(),t.TgZ(24,"button",100),t.NdJ("click",function(){const a=t.CHM(e).$implicit,i=t.oxw();return i.RemoveServicesparent(a),t.KtG(i.deleteServiceContractNew(a.idRow))}),t._UZ(25,"i",78),t.qZA()()()}if(2&s){const e=c.$implicit;t.xp6(2),t.Oqu(e.idRow),t.xp6(2),t.MGl("name","os-name",e.idRow,""),t.Q6J("ngModel",e.accountJournaltxt)("ngModelOptions",t.DdM(22,_)),t.xp6(2),t.MGl("name","os-unit",e.idRow,""),t.Q6J("ngModel",e.UnitConst)("ngModelOptions",t.DdM(23,_)),t.xp6(2),t.MGl("name","os-amount",e.idRow,""),t.Q6J("ngModel",e.QtyConst)("ngModelOptions",t.DdM(24,_)),t.xp6(3),t.MGl("name","os-price",e.idRow,""),t.Q6J("ngModel",e.Amounttxt)("ngModelOptions",t.DdM(25,_)),t.xp6(1),t.Q6J("ngIf",e.Amounttxt),t.xp6(3),t.MGl("name","os-vatTax",e.idRow,""),t.Q6J("ngModel",e.taxAmounttxt)("ngModelOptions",t.DdM(26,_)),t.xp6(1),t.Q6J("ngIf",e.taxAmounttxt),t.xp6(3),t.MGl("name","os-taxes",e.idRow,""),t.Q6J("ngModel",e.TotalAmounttxt)("ngModelOptions",t.DdM(27,_)),t.xp6(1),t.Q6J("ngIf",e.TotalAmounttxt)}}function it(s,c){if(1&s){const e=t.EpF();t.TgZ(0,"tr",90)(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td")(4,"input",102),t.NdJ("ngModelChange",function(n){const i=t.CHM(e).$implicit;return t.KtG(i.clause=n)}),t.qZA()(),t.TgZ(5,"td")(6,"button",100),t.NdJ("click",function(){const a=t.CHM(e).$implicit,i=t.oxw();return t.KtG(i.deleteBand(a.idRow))}),t._UZ(7,"i",78),t.qZA()()()}if(2&s){const e=c.$implicit;t.xp6(2),t.Oqu(e.idRow),t.xp6(2),t.MGl("name","op-clause",e.idRow,""),t.Q6J("ngModel",e.clause)("ngModelOptions",t.DdM(4,_))}}function st(s,c){if(1&s&&(t.TgZ(0,"tr",110)(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA()()),2&s){const e=c.$implicit;t.xp6(2),t.Oqu(e.paymentNo),t.xp6(2),t.Oqu(e.paymentDate),t.xp6(2),t.Oqu(e.paymentDateHijri),t.xp6(2),t.Oqu(e.amount),t.xp6(2),t.Oqu(e.taxAmount),t.xp6(2),t.Oqu(e.totalAmount)}}function lt(s,c){if(1&s){const e=t.EpF();t.TgZ(0,"div",42)(1,"h3",44),t._uU(2),t.ALo(3,"translate"),t.TgZ(4,"button",103),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(),a=t.MAs(213);return n.setWizardData(),t.KtG(n.open(a))}),t._UZ(5,"i",46),t.qZA()(),t.TgZ(6,"div",104)(7,"table",105)(8,"thead")(9,"tr",106)(10,"th",107),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"th",107),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"th",107),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.TgZ(19,"th",107),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"th",107),t._uU(23),t.ALo(24,"translate"),t.qZA(),t.TgZ(25,"th",107),t._uU(26),t.ALo(27,"translate"),t.qZA()()(),t.TgZ(28,"tbody",108),t.YNc(29,st,13,6,"tr",109),t.qZA()()()()}if(2&s){const e=t.oxw();t.xp6(2),t.hij(" ",t.lcZ(3,9,"Installments Details")," "),t.xp6(2),t.Q6J("disabled",0==e.ContractNewServices.length),t.xp6(7),t.hij(" ",t.lcZ(12,11,"batch number")," "),t.xp6(3),t.hij(" ",t.lcZ(15,13,"Batch date")," "),t.xp6(3),t.hij(" ",t.lcZ(18,15,"Batch Date (Hijri)")," "),t.xp6(3),t.hij(" ",t.lcZ(21,17,"the amount")," "),t.xp6(3),t.hij(" ",t.lcZ(24,19,"Tax")," "),t.xp6(3),t.hij(" ",t.lcZ(27,21,"Payment total")," "),t.xp6(3),t.Q6J("ngForOf",e.CustomerPaymentList)}}function ct(s,c){1&s&&(t._uU(0),t.ALo(1,"translate")),2&s&&t.Oqu(t.lcZ(1,1,"Contract draft"))}function dt(s,c){1&s&&t._UZ(0,"i",127)}function ut(s,c){1&s&&t._UZ(0,"i",128)}function pt(s,c){1&s&&t._UZ(0,"i",128)}function mt(s,c){if(1&s){const e=t.EpF();t.TgZ(0,"button",132),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit,a=t.oxw(2);return t.KtG(a.MarkServiceDetails(n))}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&s&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Insert")," "))}function ht(s,c){if(1&s){const e=t.EpF();t.TgZ(0,"button",133),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit,a=t.oxw(2);return t.KtG(a.UnMarkServiceDetails(n))}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&s&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"delete")," "))}function _t(s,c){if(1&s&&(t.TgZ(0,"div",129),t.YNc(1,mt,3,3,"button",130),t.YNc(2,ht,3,3,"button",131),t.qZA()),2&s){const e=t.oxw().$implicit;let o,n;t.xp6(1),t.Q6J("ngIf",1!=(null!==(o=null==e?null:e.SureService)&&void 0!==o?o:0)),t.xp6(1),t.Q6J("ngIf",1==(null!==(n=null==e?null:e.SureService)&&void 0!==n?n:0))}}function Ct(s,c){if(1&s&&(t.TgZ(0,"div",121)(1,"div",122),t.YNc(2,dt,1,0,"i",123),t.YNc(3,ut,1,0,"i",124),t.YNc(4,pt,1,0,"i",124),t.TgZ(5,"span",125),t._uU(6),t.qZA()(),t.YNc(7,_t,3,2,"div",126),t.qZA()),2&s){const e=c.$implicit,o=t.oxw(2);let n,a;t.xp6(2),t.Q6J("ngIf",1!=(null!==(n=null==e?null:e.SureService)&&void 0!==n?n:0)&&0==o.OfferPopupAddorEdit),t.xp6(1),t.Q6J("ngIf",1==(null!==(a=null==e?null:e.SureService)&&void 0!==a?a:0)&&0==o.OfferPopupAddorEdit),t.xp6(1),t.Q6J("ngIf",1==o.OfferPopupAddorEdit),t.xp6(2),t.Oqu(null==e?null:e.name),t.xp6(1),t.Q6J("ngIf",0==o.OfferPopupAddorEdit)}}function gt(s,c){if(1&s){const e=t.EpF();t.TgZ(0,"div",111)(1,"h4",112)(2,"span",113),t._uU(3),t.ALo(4,"translate"),t.qZA()(),t.TgZ(5,"button",114),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.KtG(a.dismiss())}),t._UZ(6,"i",115),t.qZA()(),t.TgZ(7,"div",116)(8,"div",117),t.NdJ("cdkDropListDropped",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.drop(n))}),t.YNc(9,Ct,8,5,"div",118),t.qZA(),t.TgZ(10,"div",119)(11,"button",120),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.KtG(null==a?null:a.dismiss())}),t._uU(12),t.ALo(13,"translate"),t.qZA()()()}if(2&s){const e=t.oxw();t.xp6(3),t.Oqu(t.lcZ(4,4,"servicesList")),t.xp6(5),t.Q6J("cdkDropListData",e.serviceDetails),t.xp6(1),t.Q6J("ngForOf",e.serviceDetails),t.xp6(3),t.hij(" ",t.lcZ(13,6,"Back")," ")}}function ft(s,c){1&s&&(t.TgZ(0,"th",148),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&s&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ServiceName")," "))}function vt(s,c){if(1&s&&(t.TgZ(0,"td",149),t._uU(1),t.qZA()),2&s){const e=c.$implicit;t.xp6(1),t.Oqu(e.servicesName)}}function xt(s,c){1&s&&(t.TgZ(0,"th",148),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&s&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"price")))}function bt(s,c){if(1&s&&(t.TgZ(0,"td",149),t._uU(1),t.qZA()),2&s){const e=c.$implicit;t.xp6(1),t.Oqu(e.amount)}}function yt(s,c){1&s&&t._UZ(0,"tr",150)}function At(s,c){if(1&s){const e=t.EpF();t.TgZ(0,"tr",151),t.NdJ("dblclick",function(){const a=t.CHM(e).$implicit,i=t.oxw().$implicit;return t.oxw().setServiceRowValue_ContractNew(a),t.KtG(i.dismiss())}),t.qZA()}}function Dt(s,c){if(1&s&&(t.TgZ(0,"tr",152)(1,"td",153),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&s){t.oxw();const e=t.MAs(13);t.xp6(2),t.AsE(" ",t.lcZ(3,2,"noResult"),' "',e.value,'" ')}}function Mt(s,c){if(1&s){const e=t.EpF();t.TgZ(0,"div",111)(1,"h4",112)(2,"span",113),t._uU(3),t.ALo(4,"translate"),t.qZA()(),t.TgZ(5,"button",114),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.KtG(a.dismiss())}),t._UZ(6,"i",115),t.qZA()(),t.TgZ(7,"div",134)(8,"mat-form-field",135)(9,"mat-label"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"input",136,137),t.NdJ("keyup",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.applyFilterServiceList_ContractNew(n))}),t.qZA()(),t.TgZ(14,"div",138)(15,"table",139),t.ynx(16,140),t.YNc(17,ft,3,3,"th",141),t.YNc(18,vt,2,1,"td",142),t.BQk(),t.ynx(19,143),t.YNc(20,xt,3,3,"th",141),t.YNc(21,bt,2,1,"td",142),t.BQk(),t.YNc(22,yt,1,0,"tr",144),t.YNc(23,At,1,0,"tr",145),t.YNc(24,Dt,4,4,"tr",146),t.qZA()(),t.TgZ(25,"div",147)(26,"button",120),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.KtG(null==a?null:a.dismiss())}),t._uU(27),t.ALo(28,"translate"),t.qZA()()()}if(2&s){const e=t.oxw();t.xp6(3),t.Oqu(t.lcZ(4,6,"servicesList")),t.xp6(7),t.Oqu(t.lcZ(11,8,"search")),t.xp6(5),t.Q6J("dataSource",e.serviceListDataSource_ContractNew),t.xp6(7),t.Q6J("matHeaderRowDef",e.servicesListdisplayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",e.servicesListdisplayedColumns),t.xp6(4),t.hij(" ",t.lcZ(28,10,"Back")," ")}}function St(s,c){if(1&s){const e=t.EpF();t.TgZ(0,"div",111)(1,"h4",112)(2,"span",113),t._uU(3),t.ALo(4,"translate"),t.qZA()(),t.TgZ(5,"button",114),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.KtG(a.dismiss())}),t._UZ(6,"i",115),t.qZA()(),t.TgZ(7,"div",116)(8,"form",null,154)(10,"div",53)(11,"div",155)(12,"div",10)(13,"label",156),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"input",157),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.WizardData.ContractValueinfo=n)}),t.qZA()()(),t.TgZ(17,"div",155)(18,"div",10)(19,"label",22),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"div",158)(23,"input",159),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.WizardData.PaymentStartDate=n)})("ngModelChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.ChangeDate(n))}),t.qZA()()()(),t.TgZ(24,"div",155)(25,"div",10)(26,"label",22),t._uU(27),t.ALo(28,"translate"),t.qZA(),t.TgZ(29,"div",158)(30,"input",160),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.WizardData.PaymentStartHijriDate=n)}),t.qZA()()()(),t.TgZ(31,"div",155)(32,"div",10)(33,"label",161),t._uU(34),t.ALo(35,"translate"),t.qZA(),t.TgZ(36,"input",162),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.WizardData.AdvancePayValue=n)})("keyup",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.AdvancePayValueChange())}),t.qZA()()(),t.TgZ(37,"div",163)(38,"label",161),t._uU(39),t.ALo(40,"translate"),t.qZA(),t.TgZ(41,"mat-radio-group",164),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.WizardData.georgianOrhigri=n)}),t.TgZ(42,"mat-radio-button",165),t._uU(43),t.ALo(44,"translate"),t.qZA(),t.TgZ(45,"mat-radio-button",166),t._uU(46),t.ALo(47,"translate"),t.qZA()()(),t.TgZ(48,"div",163)(49,"label",161),t._uU(50),t.ALo(51,"translate"),t.qZA(),t.TgZ(52,"mat-radio-group",167),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.WizardData.PeriodPay=n)}),t.TgZ(53,"mat-radio-button",165),t._uU(54),t.ALo(55,"translate"),t.qZA(),t.TgZ(56,"mat-radio-button",166),t._uU(57),t.ALo(58,"translate"),t.qZA(),t.TgZ(59,"mat-radio-button",168),t._uU(60),t.ALo(61,"translate"),t.qZA()()(),t.TgZ(62,"div",163)(63,"label",161),t._uU(64),t.ALo(65,"translate"),t.qZA(),t.TgZ(66,"mat-radio-group",169),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.WizardData.countwithPayment=n)}),t.TgZ(67,"mat-radio-button",165),t._uU(68),t.ALo(69,"translate"),t.qZA(),t.TgZ(70,"mat-radio-button",166),t._uU(71),t.ALo(72,"translate"),t.qZA()()(),t.TgZ(73,"div",170)(74,"div",10)(75,"label",171),t._uU(76),t.ALo(77,"translate"),t.qZA(),t.TgZ(78,"input",172),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.WizardData.MonthlyPayVal=n)})("keyup",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.MonthlyPayValChange())}),t.qZA()()(),t.TgZ(79,"div",170)(80,"div",10)(81,"label",173),t._uU(82),t.ALo(83,"translate"),t.qZA(),t.TgZ(84,"input",174),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.WizardData.PaymentCount=n)})("keyup",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.PaymentCountChange())}),t.qZA()()(),t.TgZ(85,"div",170)(86,"div",10)(87,"label",175),t._uU(88),t.ALo(89,"translate"),t.qZA(),t.TgZ(90,"input",176),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.WizardData.LastpayVal=n)}),t.qZA()()()()(),t.TgZ(91,"div",177)(92,"button",178),t.NdJ("click",function(){const a=t.CHM(e).$implicit,i=t.oxw();return t.KtG(i.GenerateCustomerPayments(a))}),t._uU(93),t.ALo(94,"translate"),t.qZA(),t.TgZ(95,"button",120),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.KtG(null==a?null:a.dismiss())}),t._uU(96),t.ALo(97,"translate"),t.qZA()()()}if(2&s){const e=t.oxw();t.xp6(3),t.Oqu(t.lcZ(4,42,"AddInstallments")),t.xp6(11),t.hij(" ",t.lcZ(15,44,"Contract amount")," "),t.xp6(2),t.Q6J("ngModel",e.WizardData.ContractValueinfo)("ngModelOptions",t.DdM(82,_)),t.xp6(4),t.hij(" ",t.lcZ(21,46,"The beginning of the installments")," "),t.xp6(3),t.Q6J("ngModel",e.WizardData.PaymentStartDate)("ngModelOptions",t.DdM(83,_)),t.xp6(4),t.hij(" ",t.lcZ(28,48,"Start of installments (Hijri)")," "),t.xp6(3),t.Q6J("ngModel",e.WizardData.PaymentStartHijriDate)("ngModelOptions",t.DdM(84,_)),t.xp6(4),t.hij(" ",t.lcZ(35,50,"Down payment value")," "),t.xp6(2),t.Q6J("ngModel",e.WizardData.AdvancePayValue)("ngModelOptions",t.DdM(85,_)),t.xp6(3),t.hij(" ",t.lcZ(40,52,"Basis for payment")," "),t.xp6(2),t.Q6J("ngModel",e.WizardData.georgianOrhigri)("ngModelOptions",t.DdM(86,_)),t.xp6(2),t.Oqu(t.lcZ(44,54,"Georgie")),t.xp6(3),t.Oqu(t.lcZ(47,56,"Hijri")),t.xp6(4),t.hij(" ",t.lcZ(51,58,"Method of Payment")," "),t.xp6(2),t.Q6J("ngModel",e.WizardData.PeriodPay)("ngModelOptions",t.DdM(87,_)),t.xp6(2),t.Oqu(t.lcZ(55,60,"Monthly")),t.xp6(3),t.Oqu(t.lcZ(58,62,"by duration")),t.xp6(3),t.Oqu(t.lcZ(61,64,"period with the month")),t.xp6(4),t.hij(" ",t.lcZ(65,66,"Installment calculation method")," "),t.xp6(2),t.Q6J("ngModel",e.WizardData.countwithPayment)("ngModelOptions",t.DdM(88,_)),t.xp6(2),t.Oqu(t.lcZ(69,68,"Depending on the number of installments")),t.xp6(3),t.Oqu(t.lcZ(72,70,"Depending on the premium value")),t.xp6(5),t.hij(" ",t.lcZ(77,72,"monthly installment")," "),t.xp6(2),t.Q6J("ngModel",e.WizardData.MonthlyPayVal)("ngModelOptions",t.DdM(89,_))("disabled","2"!=e.WizardData.countwithPayment),t.xp6(4),t.hij(" ",t.lcZ(83,74,"number of installments")," "),t.xp6(2),t.Q6J("ngModel",e.WizardData.PaymentCount)("ngModelOptions",t.DdM(90,_))("disabled","1"!=e.WizardData.countwithPayment),t.xp6(4),t.hij(" ",t.lcZ(89,76,"latest installment")," "),t.xp6(2),t.Q6J("ngModel",e.WizardData.LastpayVal)("ngModelOptions",t.DdM(91,_)),t.xp6(3),t.hij(" ",t.lcZ(94,78,"confirem")," "),t.xp6(3),t.hij(" ",t.lcZ(97,80,"Back")," ")}}const Zt=function(){return{ar:"\u0633\u064a\u062a\u0645 \u062f\u0645\u062c \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629 \u0627\u0644\u0635\u0627\u062f\u0631\u0629 \u0645\u0633\u0628\u0642\u0627 \u0639\u0644\u064a \u0627\u0644\u0645\u0634\u0631\u0648\u0639 \u0645\u0646 \u0636\u0645\u0646 \u0627\u0644\u0639\u0642\u062f \u0648 \u062a\u0631\u062d\u064a\u0644\u0647\u0627 \u0645\u0628\u0627\u0634\u0631\u0629",en:"The invoice previously issued for the project will be merged into the contract and posted directly"}};function wt(s,c){if(1&s){const e=t.EpF();t.TgZ(0,"div",0),t._UZ(1,"p",179),t.TgZ(2,"div",180)(3,"button",181),t.NdJ("click",function(){const a=t.CHM(e).$implicit,i=t.oxw(),u=t.MAs(3);return i.ConfirmMergeInvoice(2,u),t.KtG(a.dismiss())}),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"button",182),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.KtG(a.dismiss())}),t._uU(7),t.ALo(8,"translate"),t.qZA()()()}2&s&&(t.xp6(1),t.Q6J("translate","name")("translateParams",t.DdM(8,Zt)),t.xp6(3),t.hij(" ",t.lcZ(5,4,"Yes")," "),t.xp6(3),t.hij(" ",t.lcZ(8,6,"No")," "))}const It=function(){return{dateInputFormat:"DD/MM/YYYY"}},L=d(4545),I=L.default,T=L.toHijri;let Nt=(()=>{class s{constructor(e,o,n,a,i,u,h,x,p){this.modalService=e,this.authenticationService=o,this._sharedService=n,this._formBuilder=a,this.toast=i,this._contractService=u,this._followprojectService=h,this.dateFormatterSev=x,this.translate=p,this.userG={},this.Date1=new Date,this.closeResult="",this.contractWithInstallments=!1,this.offerServices=[],this.serviceListDataSource=new l.by,this.servicesListdisplayedColumns=["name","price"],this.serviceDetails=[],this.participants=[],this.ContractModalCustom={ContractType:null,OrgEmpJobId:null,Org_CompanyID:null,OfferSelectidFlag:!1,ContractTypeSelectId:null,InvoiceNumDiv:!1,InvoiceId:null,InvoiceNumber:null,ContSup1Div:null,ContSup2Div:null},this.ContractNewServices=[],this.modalDetailsContractNew={taxtype:2,total_amount:null,ContractAmountBefore:null,ContractTax:null,total_amount_text:null},this.serviceListDataSourceTemp_ContractNew=[],this.serviceListDataSource_ContractNew=new l.by,this.OfferPopupAddorEdit=0,this.ListDataServices=[],this.SureServiceList=[],this.bands=[],this.disableButtonSave_Contract=!1,this.selectedDateType=g.Uv.Hijri,this.installments=[{batchNumber:"asdasd",BatchDate:"asdasd",BatchDateHijri:"asdasd",amount:"asdasd",Tax:"asdasd",total:"asdasd"}],this.control=new M.LK({listVisible:!0,discardInvalid:!0,multiple:!1},[M.Fz.filesLimit(1)]),this.uploadedFiles=[],this.uploadedFile=new S.X(""),this.WizardData={ContractValueinfo:null,ContractValueinfo_H:null,PaymentStartDate:null,PaymentStartHijriDate:null,AdvancePayValue:null,georgianOrhigri:null,PeriodPay:null,countwithPayment:null,MonthlyPayVal:null,PaymentCount:null,LastpayVal:null},this.CalcData={FinalTable:{projectTime:null,projectValue:null,projectCost:null,projectStatusVal:null,projectStatusName:null}},this.employees=[],this.FollowProjData=[],this.FollowProjListData={FollowProj:null},this.FollowProjList=[],this.userG=this.authenticationService.userGlobalObj}ngOnInit(){this.SetContractDefData()}open(e,o,n,a){null!=a&&(this.selectedServiceRowContractNew=a),"serviceDetails"==n&&o?this.GetServicesPriceByParentId(o):"servicesList_Contract"==n&&this.GetAllServicesPrice_ContractNew(),this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:n?"contract"==n||"file"==n||"contracts"==n?"md":"xl":"lg",centered:!n||"contracts"==n,backdrop:"static",keyboard:!1}).result.then(i=>{this.closeResult=`Closed with: ${i}`},i=>{this.closeResult=`Dismissed ${this.getDismissReason(i)}`})}getDismissReason(e,o){return e===b.If.ESC?"by pressing ESC":e===b.If.BACKDROP_CLICK?"by clicking on a backdrop":`with: ${e}`}step1NextBtnClick_Des(){console.log({ContractNo:this.FormGroup01.controls.ContractNo.value,Date:this.FormGroup01.controls.ContractDate.value,HijriDate:this.FormGroup01.controls.ContractHijriDate.value,aaaaa:this.FormGroup01.controls.Org_CompanyName.value,bbbbb:this.FormGroup01.controls.OrgEmpId.value,eeeee:this.FormGroup01.controls.OrgEmpJob.value,Engineering_License:this.FormGroup01.controls.Engineering_License.value,Engineering_LicenseDate:this.FormGroup01.controls.Engineering_LicenseDate.value,CustomerId:this.FormGroup01.controls.ContractCustSelectId.value,ProjectId:this.FormGroup01.controls.ContractProjSelectId.value,ccccc:this.FormGroup01.controls.customerIdtxt.value,ddddd:this.FormGroup01.controls.OfferSelectid.value})}DisabledBtn(){this.FormGroup01.controls.ContractHijriDate.disable(),this.FormGroup01.controls.Org_CompanyName.disable(),this.FormGroup01.controls.OrgEmpJob.disable(),this.FormGroup01.controls.Engineering_License.disable(),this.FormGroup01.controls.Engineering_LicenseDate.disable(),this.FormGroup01.controls.customerIdtxt.disable(),this.FormGroup02.controls.InvoiceAmount.disable(),this.FormGroup02.controls.InvoiceAmountB.disable()}SetContractDefData(){this.ListDataServices=[],this.SureServiceList=[],this.ContractModalCustom.ContractType=this.contractAdd.ContractType,1==this.ContractModalCustom.ContractType||2==this.ContractModalCustom.ContractType||3==this.ContractModalCustom.ContractType?(this.ContractModalCustom.ContSup1Div=!1,this.ContractModalCustom.ContSup2Div=!1):4==this.ContractModalCustom.ContractType?(this.ContractModalCustom.ContSup1Div=!0,this.ContractModalCustom.ContSup2Div=!0):5==this.ContractModalCustom.ContractType?(this.ContractModalCustom.ContSup1Div=!1,this.ContractModalCustom.ContSup2Div=!1):(this.ContractModalCustom.ContSup1Div=!1,this.ContractModalCustom.ContSup2Div=!1,this.ContractModalCustom.ContractType=1),this.ContractModalCustom.Org_CompanyID=this.userG?.companyID,this.intialForms(this.contractAdd.CustomerId,this.contractAdd.ProjectId),null!=this.contractAdd.CustomerId&&(this.ChangeCustomerSelect_2(),this.FormGroup01.controls.ContractCustSelectId.disable()),null!=this.contractAdd.ProjectId&&(this.GetInvoiceIDByProjectID(),this.FormGroup01.controls.ContractProjSelectId.disable()),this.DisabledBtn(),this.GenerateContractNumberByType(),this.GetBranchOrganization(),this.resetContractDataList(),this.FillEmployeeSelect(),this.FillCustomerSelect()}resetContractDataList(){this.LoadEmployeeSelect=[],this.LoadCustomerSelectWProC=[],this.Loadprojects=[],this.LoadofferPrice=[],this.bands=[],this.CustomerPaymentList=[]}intialForms(e,o){const n=T(new Date);var a=new I(n._year,n._month,n._date);a._day=a._date,this.selectedHijriDate=a,this.FormGroup01=this._formBuilder.group({ContractNo:[null,[C.kI.required]],ContractDate:[new Date],ContractHijriDate:[null],Org_CompanyName:[this.userG?.companyName],OrgEmpId:[null,[C.kI.required]],OrgEmpJob:[null],Engineering_License:[null],Engineering_LicenseDate:[null],ContractCustSelectId:[e,[C.kI.required]],ContractProjSelectId:[null],customerIdtxt:[null],OfferSelectid:[null],check:[!1]}),this.FormGroup02=this._formBuilder.group({ContractTypeSelectId:[null],InvoiceAmount:[null],InvoiceAmountB:[null]}),this.FormGroup03=this._formBuilder.group({ContractId:[null,[C.kI.required]]}),this.FormGroup04=this._formBuilder.group({})}ChangeContractHijri(e){if(null!=e){const n=new I(e.year,e.month,e.day).toGregorian();this.FormGroup01.controls.ContractDate.setValue(n)}else this.FormGroup01.controls.ContractDate.setValue(null)}ChangeContractGre(e){if(null!=e){const n=T(this.FormGroup01.controls.ContractDate.value);var o=new I(n._year,n._month,n._date);o._day=o._date,this.selectedHijriDate=o}else this.selectedHijriDate=null}GetBranchOrganization(){this._contractService.GetBranchOrganization().subscribe(e=>{this.FormGroup01.controls.Engineering_License.setValue(e.result.engineering_License),this.FormGroup01.controls.Engineering_LicenseDate.setValue(null==e.result.engineering_LicenseDate||"null"==e.result.engineering_LicenseDate?null:this._sharedService.String_TO_date(e.result.engineering_LicenseDate))})}GetEmployeeJob(){var e=this.FormGroup01.controls.OrgEmpId.value;null!=e?this._contractService.GetEmployeeJob(e).subscribe(o=>{this.ContractModalCustom.OrgEmpJobId=o.jobId,this.FormGroup01.controls.OrgEmpJob.setValue(o.jobNameAr)}):(this.ContractModalCustom.OrgEmpJobId=null,this.FormGroup01.controls.OrgEmpJob.setValue(null))}GetCustomersByCustomerId(){var e=this.FormGroup01.controls.ContractCustSelectId.value;null!=e?this._contractService.GetCustomersByCustomerId(e).subscribe(o=>{this.FormGroup01.controls.customerIdtxt.setValue(1==o.result.customerTypeId?o.result.customerNationalId:2==o.result.customerTypeId?o.result.commercialRegister:null)}):this.FormGroup01.controls.customerIdtxt.setValue(null)}FillCustomerSelect(){(1==this.ContractModalCustom.ContractType||2==this.ContractModalCustom.ContractType)&&this.FillCustomerSelectWProC()}GenerateContractNumberByType(){1==this.ContractModalCustom.ContractType?this.GenerateContractNumber():2==this.ContractModalCustom.ContractType?this.GenerateContractNumber2():3==this.ContractModalCustom.ContractType?this.GenerateContractNumber3():4==this.ContractModalCustom.ContractType?this.GenerateContractNumber4():5==this.ContractModalCustom.ContractType?this.GenerateContractNumber5():this.GenerateContractNumber()}GenerateContractNumber(){this._contractService.GenerateContractNumber().subscribe(e=>{this.FormGroup01.controls.ContractNo.setValue(e.reasonPhrase)})}GenerateContractNumber2(){this._contractService.GenerateContractNumber2().subscribe(e=>{this.FormGroup01.controls.ContractNo.setValue(e.reasonPhrase)})}GenerateContractNumber3(){this._contractService.GenerateContractNumber3().subscribe(e=>{this.FormGroup01.controls.ContractNo.setValue(e.reasonPhrase)})}GenerateContractNumber4(){this._contractService.GenerateContractNumber4().subscribe(e=>{this.FormGroup01.controls.ContractNo.setValue(e.reasonPhrase)})}GenerateContractNumber5(){this._contractService.GenerateContractNumber5().subscribe(e=>{this.FormGroup01.controls.ContractNo.setValue(e.reasonPhrase)})}FillEmployeeSelect(){this._contractService.FillEmployeeSelect().subscribe(e=>{this.LoadEmployeeSelect=e})}FillCustomerSelectWProC(){this._contractService.FillCustomerSelectWProC().subscribe(e=>{this.LoadCustomerSelectWProC=e})}FillCustomerSelectWProC3(){this._contractService.FillCustomerSelectWProC3().subscribe(e=>{this.LoadCustomerSelectWProC=e})}FillCustomerSelectWProC2(){this._contractService.FillCustomerSelectWProC2().subscribe(e=>{this.LoadCustomerSelectWProC=e})}FillProjectSelectByCustomer(){var e=this.FormGroup01.controls.ContractCustSelectId.value;null!=e?this._contractService.FillProjectSelectByCustomerId2(e).subscribe(o=>{this.Loadprojects=o}):this.Loadprojects=[]}FillAllOfferTodropdownOld(){var e=this.FormGroup01.controls.ContractCustSelectId.value;null!=e?this._contractService.FillAllOfferTodropdownOld(e).subscribe(o=>{this.LoadofferPrice=o}):this.LoadofferPrice=[]}GetInvoiceIDByProjectID(){var e=this.FormGroup01.controls.ContractProjSelectId.value;null!=e?this._contractService.GetInvoiceIDByProjectID(e).subscribe(o=>{null!=o.result?(this.ContractModalCustom.InvoiceId=o.result?.invoiceId,this.ContractModalCustom.InvoiceNumDiv=!0,this.ContractModalCustom.InvoiceNumber=o.result?.invoiceNumber,this.FormGroup02.controls.InvoiceAmount.setValue(o.result?.totalAmount),this.FormGroup02.controls.InvoiceAmountB.setValue(o.result?.amount)):(this.ContractModalCustom.InvoiceId=null,this.ContractModalCustom.InvoiceNumDiv=!1,this.ContractModalCustom.InvoiceNumber=null,this.FormGroup02.controls.InvoiceAmount.setValue(null),this.FormGroup02.controls.InvoiceAmountB.setValue(null))}):(this.ContractModalCustom.InvoiceId=null,this.ContractModalCustom.InvoiceNumDiv=!1,this.ContractModalCustom.InvoiceNumber=null,this.FormGroup02.controls.InvoiceAmount.setValue(null),this.FormGroup02.controls.InvoiceAmountB.setValue(null))}ChangeCustomerSelect(){this.Loadprojects=[],this.FormGroup01.controls.ContractProjSelectId.setValue(null),this.GetCustomersByCustomerId(),this.FillProjectSelectByCustomer(),this.FillAllOfferTodropdownOld()}ChangeCustomerSelect_2(){this.Loadprojects=[],this.GetCustomersByCustomerId(),this.FillProjectSelectByCustomer(),this.FillAllOfferTodropdownOld()}GetProjectById(){var e=this.FormGroup01.controls.ContractProjSelectId.value;null!=e&&this._contractService.GetProjectById(e).subscribe(o=>{this.GetValueCalc({projectId:o.result.projectId,projectNo:o.result.projectNo,contractValue:this.modalDetailsContractNew.total_amount,timeStr:o.result.timeStr,noOfDays:o.result.noOfDays})})}addServiceContractNew(){var e;e=this.ContractNewServices.length>0?Math.max(...this.ContractNewServices.map(o=>o.idRow)):0,this.ContractNewServices?.push({idRow:e+1,AccJournalid:null,UnitConst:null,QtyConst:null,accountJournaltxt:null,Amounttxt:null,taxAmounttxt:null,TotalAmounttxt:null,MeterPrice1:null,MeterPrice2:null,MeterPrice3:null,PackageRatio1:null,PackageRatio2:null,PackageRatio3:null})}deleteServiceContractNew(e){let o=this.ContractNewServices.findIndex(n=>n.idRow==e);this.ContractNewServices.splice(o,1),this.CalculateTotal_ContractNew()}offerpriceChange(){var n=this.FormGroup01.controls.OfferSelectid.value;null!=n&&1==this.FormGroup01.controls.check.value?(this.ContractNewServices=[],this.GetOfferservicenByOfferIdNew(n)):(this.ContractNewServices=[],this.addServiceContractNew())}setServiceRowValue_ContractNew(e){this.ContractNewServices.filter(o=>o.idRow==this.selectedServiceRowContractNew)[0].AccJournalid=e.servicesId,this.ContractNewServices.filter(o=>o.idRow==this.selectedServiceRowContractNew)[0].UnitConst=e.serviceTypeName,this.ContractNewServices.filter(o=>o.idRow==this.selectedServiceRowContractNew)[0].QtyConst=1,this.ContractNewServices.filter(o=>o.idRow==this.selectedServiceRowContractNew)[0].accountJournaltxt=e.servicesName,this.ContractNewServices.filter(o=>o.idRow==this.selectedServiceRowContractNew)[0].Amounttxt=e.amount,this.CalculateTotal_ContractNew()}setServiceRowValueNew_ContractNew(e,o,n,a){this.addServiceContractNew(),this.ContractNewServices.filter(i=>i.idRow==e)[0].AccJournalid=o.servicesId,this.ContractNewServices.filter(i=>i.idRow==e)[0].UnitConst=o.serviceTypeName,this.ContractNewServices.filter(i=>i.idRow==e)[0].QtyConst=n,this.ContractNewServices.filter(i=>i.idRow==e)[0].accountJournaltxt=o.name,this.ContractNewServices.filter(i=>i.idRow==e)[0].Amounttxt=a,this.CalculateTotal_ContractNew()}GetOfferservicenByOfferIdNew(e){this._contractService.GetOfferservicenByid(e).subscribe(o=>{o.result.length>0&&o.result.forEach(n=>{this.modalDetailsContractNew.taxtype=n.taxType,this.GetServicesPriceByServiceId_ContractNew(n)})})}GetServicesPriceByServiceId_ContractNew(e){this._contractService.GetServicesPriceByServiceId(e.serviceId).subscribe(o=>{var n;n=this.ContractNewServices.length>0?Math.max(...this.ContractNewServices.map(a=>a.idRow)):0,this.setServiceRowValueNew_ContractNew(n+1,o.result,e.serviceQty,e.serviceamountval)})}resetmodalDetailsContractNew(){this.ContractNewServices=[],this.modalDetailsContractNew={taxtype:2,total_amount:null,ContractAmountBefore:null,ContractTax:null,total_amount_text:null}}CalculateTotal_ContractNew(){this.CustomerPaymentList=[];var i=parseFloat(this.userG.orgVAT??0);this.ContractNewServices.forEach(u=>{var h=parseFloat((u.Amounttxt??0).toString()).toFixed(2),f=0,v=0,y=parseFloat((+parseFloat((+h*i).toString()).toFixed(2)/100).toString()).toFixed(2),k=parseFloat((+h-+parseFloat((+h/(i/100+1)).toString()).toFixed(2)).toString()).toFixed(2);2==this.modalDetailsContractNew.taxtype?(f=+y*u.QtyConst,v=+parseFloat((+parseFloat(h)+ +parseFloat(y)).toString()).toFixed(2)):(f=+k*u.QtyConst,parseFloat((+parseFloat(h).toFixed(2)-+k).toString()).toFixed(2),v=+parseFloat(h).toFixed(2)),this.ContractNewServices.filter(N=>N.idRow==u.idRow)[0].taxAmounttxt=parseFloat(f.toString()).toFixed(2),this.ContractNewServices.filter(N=>N.idRow==u.idRow)[0].TotalAmounttxt=parseFloat((v*u.QtyConst).toString()).toFixed(2)}),this.CalcSumTotal_ContractNew()}CalcSumTotal_ContractNew(){let e=0,o=0,n=0;this.ContractNewServices.forEach(a=>{e=+e+ +parseFloat(a.TotalAmounttxt??0).toFixed(2),o=+o+ +parseFloat(a.Amounttxt??0).toFixed(2)*+parseFloat(a.QtyConst??0).toFixed(2),n=+n+ +parseFloat(a.taxAmounttxt??0).toFixed(2)}),this.modalDetailsContractNew.total_amount=parseFloat(e.toString()).toFixed(2),this.modalDetailsContractNew.ContractAmountBefore=parseFloat(o.toString()).toFixed(2),this.modalDetailsContractNew.ContractTax=parseFloat(n.toString()).toFixed(2),this.ConvertNumToString_Contract(this.modalDetailsContractNew.total_amount)}ConvertNumToString_Contract(e){this._contractService.ConvertNumToString(e).subscribe(o=>{this.modalDetailsContractNew.total_amount_text=o?.reasonPhrase})}applyFilterServiceList_ContractNew(e){this.serviceListDataSource_ContractNew.filter=e.target.value.trim().toLowerCase()}GetAllServicesPrice_ContractNew(){this._contractService.GetAllServicesPrice().subscribe(e=>{this.serviceListDataSource_ContractNew=new l.by(e.result),this.servicesList_ContractNew=e.result,this.serviceListDataSourceTemp_ContractNew=e.result})}GetServicesPriceByParentId_Old(e){this.serviceDetails=[],null!=e.AccJournalid&&this._contractService.GetServicesPriceVouByParentId(e.AccJournalid,e.offerId).subscribe(o=>{this.serviceDetails=o.result})}GetServicesPriceByParentId(e){this.serviceDetails=[],null!=e.AccJournalid&&0==this.OfferPopupAddorEdit&&this._contractService.GetServicesPriceByParentId(e.AccJournalid).subscribe(o=>{this.serviceDetails=o.result;var n=!0;if(this.ListDataServices.length>0)for(let i of this.ListDataServices){if(0!=i.filter(u=>u.parentId==e.AccJournalid).length){n=!0;break}n=!1}else n=!1;0==n&&this.ListDataServices.push(this.serviceDetails),this.SetDetailsCheck(this.serviceDetails)})}MarkServiceDetails(e){e.SureService=1==e?.SureService?0:1,this.SureServiceList.push(e)}UnMarkServiceDetails(e){if(e.SureService=1==e?.SureService?0:1,this.SureServiceList.length>0){let o=this.SureServiceList.findIndex(n=>n.servicesId==e.servicesId);-1!=o&&this.SureServiceList.splice(o,1)}}RemoveServicesparent(e){{var o=this.ListDataServices;this.ListDataServices=[];let n=this.SureServiceList.filter(a=>a.parentId!=e.AccJournalid);o.forEach(a=>{let i=a.filter(u=>u.parentId!=e.AccJournalid);i.length>0&&this.ListDataServices.push(i)}),this.SureServiceList=n}}SetDetailsCheck(e){e.forEach(o=>{this.SureServiceList.filter(a=>a.servicesId==o.servicesId).length>0&&(o.SureService=1)})}addBand(){var e;e=this.bands.length>0?Math.max(...this.bands.map(o=>o.idRow)):0,this.bands?.push({idRow:e+1,clause:null})}deleteBand(e){let o=this.bands.findIndex(n=>n.idRow==e);this.bands.splice(o,1)}saveContractbtn(e){var o=this.FormGroup02.controls.InvoiceAmount.value??0,n=this.modalDetailsContractNew.total_amount??0;if(0!=n&&0!=this.ContractNewServices.length)if(null==this.ContractModalCustom.InvoiceId)this.ConfirmMergeInvoice(1,e);else{if(!(o<=n))return void this.toast.error(this.translate.instant("\u0644\u0627 \u064a\u0645\u0643\u0646\u0643 \u062d\u0641\u0638 \u0628\u0642\u064a\u0645\u0629 \u0639\u0642\u062f \u0627\u0642\u0644 \u0645\u0646 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629 \u0627\u0644\u0645\u0628\u062f\u0623\u064a\u0629 \u0644\u0644\u0645\u0634\u0631\u0648\u0639 \u0627\u0644\u062a\u064a \u062a\u0642\u062f\u0631 \u0642\u064a\u0645\u062a\u0647\u0627 : "+o.toString()),this.translate.instant("Message"));this.open(this.MergeInvoiceDataModal,null,"MergeInvoiceDataModal")}else this.toast.error(this.translate.instant("\u0645\u0646 \u0641\u0636\u0644\u0643 \u0623\u062f\u062e\u0644 \u062e\u062f\u0645\u0629"),this.translate.instant("Message"))}ConfirmMergeInvoice(e,o){var n={ContractId:0};if(n.ContractNo=this.FormGroup01.controls.ContractNo.value,null!=this.FormGroup01.controls.ContractDate.value){n.Date=this._sharedService.date_TO_String(this.FormGroup01.controls.ContractDate.value);const p=T(this.FormGroup01.controls.ContractDate.value);n.HijriDate=this._sharedService.hijri_TO_String(p)}n.CustomerId=this.FormGroup01.controls.ContractCustSelectId.value,n.ProjectId=this.FormGroup01.controls.ContractProjSelectId.value,n.Type=this.ContractModalCustom.ContractType,n.Value=+parseFloat(this.modalDetailsContractNew.total_amount.toString()).toFixed(2)-+parseFloat(this.modalDetailsContractNew.ContractTax.toString()).toFixed(2),n.ValueText=this.modalDetailsContractNew.total_amount_text,n.TaxType=this.modalDetailsContractNew.taxtype,n.TaxesValue=null,n.TotalValue=this.modalDetailsContractNew.total_amount,n.Engineering_License=this.FormGroup01.controls.Engineering_License.value,null!=this.FormGroup01.controls.Engineering_LicenseDate.value&&(n.Engineering_LicenseDate=this._sharedService.date_TO_String(this.FormGroup01.controls.Engineering_LicenseDate.value)),n.Oper_expeValue=this.CalcData.FinalTable.projectCost;var a=[];this.bands.forEach((p,f)=>{var v={};v.SerialId=p.idRow,v.Clause=p.clause,a.push(v)}),n.OrgId=this.ContractModalCustom.Org_CompanyID,n.OrgEmpId=this.FormGroup01.controls.OrgEmpId.value,n.OrgEmpJobId=this.ContractModalCustom.OrgEmpJobId,n.ServiceId=this.ContractNewServices[0].AccJournalid;var i={valid:!0,message:""},u=[];if(this.ContractNewServices.forEach(p=>{if(null==p.AccJournalid)return i.valid=!1,void(i.message="\u0645\u0646 \u0641\u0636\u0644\u0643 \u0623\u062e\u062a\u0631 \u062e\u062f\u0645\u0629 \u0635\u062d\u064a\u062d\u0629");if(null==p.Amounttxt)return i.valid=!1,void(i.message="\u0645\u0646 \u0641\u0636\u0644\u0643 \u0623\u062e\u062a\u0631 \u0645\u0628\u0644\u063a \u0635\u062d\u064a\u062d");if(null==p.QtyConst)return i.valid=!1,void(i.message="\u0645\u0646 \u0641\u0636\u0644\u0643 \u0623\u062e\u062a\u0631 \u0643\u0645\u064a\u0629 \u0635\u062d\u064a\u062d\u0629");var f={};f.ServiceId=p.AccJournalid,f.ServiceQty=p.QtyConst,f.TaxType=this.modalDetailsContractNew.taxtype,f.Serviceamountval=p.Amounttxt,u.push(f)}),i.valid){n.ContractServices=u,n.CustomerPayments=this.CustomerPaymentList;var h=[],x=0;this.ListDataServices.forEach(p=>{p.filter(v=>1==v.SureService).forEach(v=>{var y={};x++,y.ServicesIdVou=0,y.ServicesId=v.servicesId,y.ParentId=v.parentId,y.SureService=v.SureService??0,y.LineNumber=x,h.push(y)})}),n.ServicesPriceOffer=h,this.disableButtonSave_Contract=!0,setTimeout(()=>{this.disableButtonSave_Contract=!1},15e3),this._contractService.SaveContract_2(n).subscribe(p=>{if(200==p.statusCode){if(console.log("result.returnedStrNeeded"),console.log(p.returnedStrNeeded),this.toast.success(this.translate.instant(p.reasonPhrase),this.translate.instant("Message")),2==e&&(this.PayPayment_F2(parseInt(this.ContractModalCustom.InvoiceId),parseInt(p.returnedStr)),this.PostInvoice_F2(parseInt(this.ContractModalCustom.InvoiceId))),this.control?.value.length>0){const f=new FormData;f.append("file",this.control?.value[0]),f.append("ContractId",p.returnedStr),f.append("ProjectId",this.FormGroup01.controls.ContractProjSelectId.value),this._contractService.UploadProjectContract(f).subscribe(v=>{})}this.FormGroup03.controls.ContractId.setValue(p.returnedStr),o.next(),this.modalService.dismissAll()}else console.log("result.returnedStrNeeded"),console.log(p.returnedStrNeeded),this.toast.error(this.translate.instant(p.reasonPhrase),this.translate.instant("Message"))})}else this.toast.error(i.message)}PayPayment_F2(e,o){var n={};n.PaymentId=e,n.ContractId=o,this._contractService.PostInvoiceAndPayPayment2(n).subscribe(a=>{})}PostInvoice_F2(e){var o={};o.InvoiceId=e;var n=[];n.push(o),this._contractService.PostInvoiceAndPayPayment(n).subscribe(a=>{})}addServiceContractNew2(){}goToDrafts(e){this.FormGroup03.controls.ContractId.setValue(1),e.next()}resetWizardData(){this.WizardData={ContractValueinfo:null,ContractValueinfo_H:null,PaymentStartDate:new Date,PaymentStartHijriDate:null,AdvancePayValue:null,georgianOrhigri:"1",PeriodPay:"1",countwithPayment:"1",MonthlyPayVal:null,PaymentCount:null,LastpayVal:null}}gethijriformat(e){}setWizardData(){this.resetWizardData();const o=T(new Date);this.WizardData.PaymentStartHijriDate=this._sharedService.hijri_TO_String(o),this.WizardData.ContractValueinfo=this.modalDetailsContractNew.total_amount,this.WizardData.ContractValueinfo_H=this.modalDetailsContractNew.ContractAmountBefore}ChangeDate(e){if(null!=e){const o=T(e);this.WizardData.PaymentStartHijriDate=this._sharedService.hijri_TO_String(o)}else this.WizardData.PaymentStartHijriDate=null}GenerateCustomerPayments(e){if(this.CustomerPaymentList=[],null!=this.WizardData.PaymentStartDate&&null!=this.WizardData.PaymentStartHijriDate&&null!=this.WizardData.MonthlyPayVal&&null!=this.WizardData.PaymentCount){var o={};o.Date=this._sharedService.date_TO_String(this.WizardData.PaymentStartDate),o.PaymentHijriDate=this.WizardData.PaymentStartHijriDate,o.TaxType=this.modalDetailsContractNew.taxtype,o.Value=this.WizardData.ContractValueinfo,o.AdvancePayValue=this.WizardData.AdvancePayValue??0,o.PaymentsCount=this.WizardData.PaymentCount,o.LastPayValue=this.WizardData.LastpayVal??0,o.MonthlyPayValue=this.WizardData.MonthlyPayVal??0,o.GregorianHijriPay=this.WizardData.georgianOrhigri,o.PayType=this.WizardData.PaymentType,this._contractService.GenerateCustomerPayments(o).subscribe(n=>{this.CustomerPaymentList=n,e?.dismiss()})}else this.toast.error(this.translate.instant("\u0645\u0646 \u0641\u0636\u0644\u0643 \u0627\u0643\u0645\u0644 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a"),this.translate.instant("Message"))}AdvancePayValueChange(){var e=this.WizardData.AdvancePayValue??0,n=this.WizardData.PaymentCount??0,a=this.WizardData.ContractValueinfo_H;if(+e<=+this.modalDetailsContractNew.total_amount)if(0!=n){var i=Math.floor((+a-+e)/+n);this.WizardData.MonthlyPayVal=parseFloat(i.toString()).toFixed(2),this.WizardData.LastpayVal=parseFloat((+a-+e-+i*+n).toString()).toFixed(2)}else this.WizardData.MonthlyPayVal=null,this.WizardData.LastpayVal=null;else this.WizardData.AdvancePayValue=null,this.WizardData.MonthlyPayVal=null,this.WizardData.LastpayVal=null}PaymentCountChange(){var e=this.FormGroup02.controls.InvoiceAmount.value??0,o=this.FormGroup02.controls.InvoiceAmountB.value??0,n=this.WizardData.AdvancePayValue??0,a=this.modalDetailsContractNew.total_amount;null!=e&&(a-=e);var i=this.WizardData.PaymentCount??0,u=this.WizardData.ContractValueinfo_H;null!=o&&(u-=o);var h=0;0!=i?(h=3==parseInt(this.modalDetailsContractNew.taxtype)?Math.floor((+a-+n)/+i):Math.floor((+u-+n)/+i),this.WizardData.MonthlyPayVal=parseFloat(h.toString()).toFixed(2),this.WizardData.LastpayVal=3==parseInt(this.modalDetailsContractNew.taxtype)?parseFloat((+a-+n-+h*+i).toString()).toFixed(2):parseFloat((+u-+n-+h*+i).toString()).toFixed(2)):(this.WizardData.MonthlyPayVal=null,this.WizardData.LastpayVal=null)}MonthlyPayValChange(){var e=this.FormGroup02.controls.InvoiceAmount.value??0,o=this.FormGroup02.controls.InvoiceAmountB.value??0,n=this.WizardData.AdvancePayValue??0,a=this.modalDetailsContractNew.total_amount;null!=e&&(a-=e);var i=this.WizardData.PaymentCount??0,u=this.WizardData.ContractValueinfo_H;null!=o&&(u-=o);var h=this.WizardData.MonthlyPayVal??0;if(+h<=+a){var x=parseFloat(h).toFixed(2);this.WizardData.PaymentCount=3==parseInt(this.modalDetailsContractNew.taxtype)?Math.floor((+a-+n)/+x):Math.floor((+u-+n)/+x),i=parseInt(this.WizardData.PaymentCount),this.WizardData.LastpayVal=3==parseInt(this.modalDetailsContractNew.taxtype)?parseFloat((+a-+n-+x*+i).toString()).toFixed(2):parseFloat((+u-+n-+x*+i).toString()).toFixed(2)}else this.WizardData.PaymentCount=null,this.WizardData.MonthlyPayVal=null,this.WizardData.LastpayVal=null}setOfferPriceChecked(e){this.offerPriceChecked=e.target.checked}addService(e){console.log(e),this.offerServices?.push({id:e+1,name:"",unit:"",amount:0,price:0,vatTax:0,taxes:0})}deleteService(e){this.offerServices?.splice(e,1)}addEmployee(){var e;e=this.employees.length>0?Math.max(...this.employees.map(n=>n.idRow)):0,this.employees.push({idRow:e+1,id:0,name:0,duration:null,durationType:4,ratio:null,salary:null,cost:null,accSalary:null}),this.FillSelectEmployee()}deleteRow(e){let o=this.employees.findIndex(n=>n.idRow==e);this.employees.splice(o,1)}GetValueCalc(e){this.RowValue=e,this.employees=[],this.CalcData.FinalTable.projectStatusName=null,this.CalcData.FinalTable.projectStatusVal=null,this.CalcData.FinalTable.projectCost=null,this.SetDistTable(),this.SetFinalTable(e.timeStr,e.contractValue)}FillSelectEmployee(){this._followprojectService.FillSelectEmployee().subscribe(e=>{this.load_Employee=e})}emp_Change(e){null==e.name?e.accSalary=null:this.GetEmployeeInfo(e)}GetEmployeeInfo(e){this._followprojectService.GetEmployeeInfo(e.name).subscribe(o=>{e.accSalary=o.salary})}CalcDist(e){var n=e.durationType,u=parseFloat((e.duration*(1==n?1:2==n?7:3==n?30:4==n?1/24:0)*e.accSalary/30).toString()).toFixed(2);e.salary=u;var x=parseFloat((e.ratio*this.RowValue.contractValue/100).toString()).toFixed(2),p=parseFloat((+parseFloat(x).toFixed(2)+ +parseFloat(u).toFixed(2)).toString()).toFixed(2);e.cost=p,this.FinalCalcDist()}FinalCalcDist(){if(0==this.employees.length)return this.CalcData.FinalTable.projectStatusName=null,this.CalcData.FinalTable.projectStatusVal=null,void(this.CalcData.FinalTable.projectCost=null);var e=0;this.employees.forEach(a=>{e=+parseFloat(e.toString()).toFixed(2)+ +parseFloat(a.cost??0).toFixed(2)}),this.CalcData.FinalTable.projectCost=parseFloat(e.toString()).toFixed(2),+parseFloat(e.toString()).toFixed(2)>+this.CalcData.FinalTable.projectValue?(this.CalcData.FinalTable.projectStatusName="\u0627\u0644\u0645\u0634\u0631\u0648\u0639 \u062e\u0627\u0633\u0631",this.CalcData.FinalTable.projectStatusVal=0):(this.CalcData.FinalTable.projectStatusName="\u0627\u0644\u0645\u0634\u0631\u0648\u0639 \u0646\u0627\u062c\u062d",this.CalcData.FinalTable.projectStatusVal=1)}SetFinalTable(e,o){this.CalcData.FinalTable.projectTime=e,this.CalcData.FinalTable.projectValue=o}SetDistTable(){this.GetAllFollowProj()}GetAllFollowProj(){this.FollowProjData=[],this._followprojectService.GetAllFollowProj(this.RowValue.projectId).subscribe(e=>{e.forEach(o=>{this.FillSelectEmployee();var n;n=this.employees.length>0?Math.max(...this.employees.map(i=>i.idRow)):0,this.employees.push({idRow:n+1,id:o.followProjId,name:o.empId,duration:o.timeNo,durationType:o.timeType,ratio:o.empRate,salary:o.amount,cost:o.expectedCost,accSalary:o.empSalary})}),this.FollowProjData=e,this.FinalCalcDist()})}SaveFollowProj(e){var o=1;this.employees.forEach(a=>{(null==a.name||null==a.duration||null==a.durationType)&&(o=0)}),0!=o?(this.FollowProjList=[],this.employees.forEach(a=>{var i={FollowProjId:0};i.EmpId=a.name,i.ProjectId=this.RowValue.projectId,i.TimeNo=String(a.duration),i.TimeType=String(a.durationType),i.EmpRate=String(a.ratio??"0"),i.Amount=parseFloat(a.salary),i.ExpectedCost=parseFloat(a.cost),i.ConfirmRate=!1,this.FollowProjList.push(i)}),console.log("this.FollowProjList"),console.log(this.FollowProjList),this.FollowProjListData.FollowProj=this.FollowProjList,this._followprojectService.SaveFollowProj(this.FollowProjListData).subscribe(a=>{200==a.statusCode?(this.toast.success(this.translate.instant(a.reasonPhrase),this.translate.instant("Message")),e?.hide()):this.toast.error(this.translate.instant(a.reasonPhrase),this.translate.instant("Message"))})):this.toast.error("\u0645\u0646 \u0641\u0636\u0644\u0643 \u0623\u0643\u0645\u0644 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a","\u0631\u0633\u0627\u0644\u0629")}drop(e){e.previousContainer===e.container?(0,A.bA)(e.container.data,e.previousIndex,e.currentIndex):(0,A.EA)(e.previousContainer.data,e.container.data,e.previousIndex,e.currentIndex);var o=this.ListDataServices;this.ListDataServices=[],o.forEach(n=>{let a=n.filter(i=>i.parentId!=this.serviceDetails[0].parentId);a.length>0&&this.ListDataServices.push(a)}),this.ListDataServices.push(this.serviceDetails)}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(b.FF),t.Y36(m.$),t.Y36(U.F1),t.Y36(C.qu),t.Y36(q._W),t.Y36(J.U),t.Y36(V.e),t.Y36(g.KN),t.Y36(w.sK))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-customer-contracts-add-main"]],viewQuery:function(e,o){if(1&e&&t.Gf($,5),2&e){let n;t.iGM(n=t.CRH())&&(o.MergeInvoiceDataModal=n.first)}},inputs:{contractAdd:"contractAdd"},decls:216,vars:151,consts:[[1,"modal-body","text-center"],[1,"content"],["linear",""],["stepper",""],[3,"stepControl"],["matStepLabel",""],[3,"formGroup"],[1,"step-content",2,"padding-bottom","11% !important"],[1,"row","align-items-end","mb-4"],[1,"col-sm-6","col-md-4","mb-0","mb-sm-3"],[1,"form-group"],["for","ContractNo",1,"text-right","col-form-label","block"],["type","text","id","ContractNo","name","ContractNo","formControlName","ContractNo","autocomplete","off"],["ContractNo",""],["for","ContractDate",1,"text-right","col-form-label","block"],["type","text","id","ContractDate","name","ContractDate","formControlName","ContractDate","bsDatepicker","","autocomplete","off",1,"form-control",3,"bsConfig","ngModelChange"],["for","ContractHijriDate",1,"text-right","col-form-label","block"],["autocomplete","off",3,"selectedDate","isRequired","hijriLabel","selectedDateType","dir","selectedDateChange"],[1,"col-sm-6","col-md-6","mb-0","mb-sm-3"],["for","Org_CompanyName",1,"text-right","col-form-label","block"],["type","text","id","Org_CompanyName","name","Org_CompanyName","formControlName","Org_CompanyName","autocomplete","off",1,"form-control"],[1,"col-sm-6","col-md-3","mb-0","mb-sm-3"],[1,"text-right","col-form-label","block"],["name","OrgEmpId","id","OrgEmpId","formControlName","OrgEmpId",1,"w-full","p-0",3,"placeholder","change"],["OrgEmpId",""],[3,"value",4,"ngFor","ngForOf"],["for","OrgEmpJob",1,"text-right","col-form-label","block"],["type","text","id","OrgEmpJob","name","OrgEmpJob","formControlName","OrgEmpJob",1,"form-control"],["for","ContractCustSelectId",1,"text-right","col-form-label","block"],["name","ContractCustSelectId","formControlName","ContractCustSelectId",1,"w-full","p-0",3,"placeholder","change"],["for","customerIdtxt",1,"text-right","col-form-label","block"],["type","text","id","customerIdtxt","name","customerIdtxt","formControlName","customerIdtxt",1,"form-control"],["for","iDNumber",1,"text-right","col-form-label","block"],[1,"form-types","checkbox","justify-start","mt-2"],[1,"checkbox-content","relative"],["type","checkbox","name","check","formControlName","check",3,"change"],[1,"absolute"],[1,"cycle"],["class","col-sm-6 col-md-3 mb-0 mb-sm-3",4,"ngIf"],[1,"d-flex","justify-end","w-100"],["mat-button","","matStepperNext","",1,"bg-base","text-white"],[1,"step-content"],[1,"row","mb-3"],["class","col-12 mb-0 mb-sm-3",4,"ngIf"],[1,"flex","items-center","justify-start","fw-bold"],["type","button ",1,"add-btn","mx-2",3,"click"],[1,"fa","fa-plus"],[1,"editable","shadow","mb-4"],[1,"table","table-responsive","table-striped","table-bordered","text-center",2,"vertical-align","middle","font-size","14px"],[1,"bg-base","text-white",2,"line-height","30px","font-size","13px"],[2,"width","30% !important"],["style","line-height: 5px",4,"ngFor","ngForOf"],[1,"boxContainer","w-80","py-3","px-3"],[1,"row"],[1,"col-md-2"],["for","tax type","for","tax type",1,""],[1,"col-md-10"],["name","include_tax",1,"w-100",3,"placeholder","ngModel","ngModelOptions","clearable","ngModelChange","change"],[3,"value"],[1,"col-md-12"],["for","Total amount","for","Total amount",1,"text-gren"],["id","Total amount","type","number","readonly","",1,"form-control","text-center",3,"ngModel","ngModelOptions","ngModelChange"],["for","total in writing","for","total in writing",1,"text-orange"],["id","total in writing","type","text","readonly","",1,"form-control","text-center",3,"ngModel","ngModelOptions","ngModelChange"],[1,"table","editable","shadow","d-block",2,"overflow","auto"],[1,"table","table-responsive","table-striped","table-bordered","text-center",2,"vertical-align","middle","font-size","14px","min-width","max-content"],["class","row mb-3",4,"ngIf"],[1,"flex","justify-between","items-center","flex-wrap"],["mat-button","","matStepperPrevious","",1,"btn","btn-outline-secondary"],["mat-button","",1,"btn","bg-base","text-white",3,"disabled","click"],[1,"periority","my-5"],["aria-label","Select an option","name","status"],[1,"flex","flex-wrap","gap-8","items-center","my-1"],["value","1",1,"text-base"],[1,"operations","flex","gap-2"],[1,"p-2","bg-orange-100","hover:bg-orange-500","rounded-lg","duration-300","hover:text-white","w-10"],[1,"fa","fa-download"],[1,"p-2","bg-red-100","hover:bg-red-500","rounded-lg","duration-300","hover:text-white","w-10"],[1,"fa-solid","fa-trash-can"],["value","2",1,"text-base"],["serviceDetailsModal",""],["servicesListModal_Contract",""],["addInstallmentModal",""],["MergeInvoiceDataModal",""],["for","OfferSelectid",1,"col-form-label","block"],["name","OfferSelectid","formControlName","OfferSelectid",1,"w-full","p-0",3,"placeholder","change"],[1,"col-12","mb-0","mb-sm-3"],["for","InvoiceAmount",1,"text-right","col-form-label","block"],["type","text","id","InvoiceAmount","name","InvoiceAmount","formControlName","InvoiceAmount","autocomplete","off",1,"form-control"],["type","text","id","InvoiceAmountB","name","InvoiceAmountB","formControlName","InvoiceAmountB","autocomplete","off",1,"form-control",2,"display","none"],[2,"line-height","5px"],[3,"click"],["type","text","readonly","",3,"name","ngModel","ngModelOptions","ngModelChange"],["type","text",3,"name","ngModel","ngModelOptions","ngModelChange","keyup"],[1,"flex"],["type","number",3,"name","ngModel","ngModelOptions","ngModelChange","keyup"],["style","align-self: center;",4,"ngIf"],["type","number","readonly","",3,"name","ngModel","ngModelOptions","ngModelChange"],["title","",1,"p-2","bg-orange-100","hover:bg-orange-500","rounded-lg","duration-300","hover:text-white","w-10",2,"margin-inline-end","6px",3,"click"],[1,"fa-solid","fa-info"],[1,"p-2","bg-red-100","hover:bg-red-500","rounded-lg","duration-300","hover:text-white","w-10",3,"click"],[2,"align-self","center"],["type","text","autocomplete","off",3,"name","ngModel","ngModelOptions","ngModelChange"],["type","button ",1,"add-btn","mx-2",3,"disabled","click"],[1,"overflow-auto","mt-3"],[1,"min-w-max","overflow-hidden","rounded-t-lg","table","table-bordered","table-striped"],[1,"bg-base","text-white"],[1,"uppercase","text-center"],["id","tabledetails"],["class","text-black text-center",4,"ngFor","ngForOf"],[1,"text-black","text-center"],[1,"modal-header","text-white","flex","justify-between","items-center",2,"background-color","var(--base-color)"],[1,"m-0"],[1,"text-2xl"],["type","button",1,"text-2xl","text-white","m-0",3,"click"],[1,"fa-solid","fa-xmark"],[1,"modal-body"],["cdkDropList","",1,"example-list",3,"cdkDropListData","cdkDropListDropped"],["class","example-box","cdkDrag","",4,"ngFor","ngForOf"],[1,"flex","gap-2","pt-3","border-t","border-neutral-300","col-span-1","md:col-span-2","mt-2"],[1,"btn","btn-secondary",3,"click"],["cdkDrag","",1,"example-box"],[1,"col-md-11",2,"font-size","20px"],["class","fa fa-xmark text-danger",4,"ngIf"],["class","fa fa-check text-success",4,"ngIf"],[1,"text-base","mx-2"],["class","serviceBtns",4,"ngIf"],[1,"fa","fa-xmark","text-danger"],[1,"fa","fa-check","text-success"],[1,"serviceBtns"],["type","button","class","btn btn-outline-success",3,"click",4,"ngIf"],["type","button","class","btn btn-outline-danger",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-success",3,"click"],["type","button",1,"btn","btn-outline-danger",3,"click"],[1,"modal-body",2,"overflow-y","scroll","max-height","600px"],[1,"w-full"],["matInput","",3,"keyup"],["input",""],[1,"table"],["mat-table","",1,"mat-elevation-z8","table","table-responsive","table-striped","table-bordered","text-center",2,"vertical-align","middle","font-size","14px",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","price"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"dblclick",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[1,"text-end","mt-2"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row","",3,"dblclick"],[1,"mat-row"],["colspan","4",1,"mat-cell"],["form","ngForm"],[1,"col-md-6","col-lg-3","mb-3"],["for","ContractAmount",1,"text-right","col-form-label","block"],["type","number","id","ContractValueinfo","name","ContractValueinfo","disabled","",1,"form-control",3,"ngModel","ngModelOptions","ngModelChange"],[1,"form-group","timeInput"],["name","PaymentStartDate","id","PaymentStartDate","type","text","bsDatepicker","","autocomplete","off",1,"form-control",3,"ngModel","ngModelOptions","ngModelChange"],["name","PaymentStartHijriDate","id","PaymentStartHijriDate","type","text","autocomplete","off","disabled","",1,"form-control",3,"ngModel","ngModelOptions","ngModelChange"],["for","payment",1,"text-right","col-form-label","block"],["type","number","id","AdvancePayValue","name","AdvancePayValue","autocomplete","off",1,"form-control",3,"ngModel","ngModelOptions","ngModelChange","keyup"],[1,"periority","mt-4","mb-2"],["aria-label","Select an option","name","georgianOrhigri",1,"flex","gap-4",3,"ngModel","ngModelOptions","ngModelChange"],["value","1",1,"text-warning"],["value","2",1,"text-success"],["aria-label","Select an option","name","PeriodPay",1,"flex","gap-4",3,"ngModel","ngModelOptions","ngModelChange"],["value","3",1,"text-danger"],["aria-label","Select an option","name","countwithPayment",1,"flex","gap-4",3,"ngModel","ngModelOptions","ngModelChange"],[1,"col-md-6","col-lg-4","mb-3"],["for","monthlyInstallment",1,"text-right","col-form-label","block"],["type","number","id","MonthlyPayVal","name","MonthlyPayVal","autocomplete","off",1,"form-control",3,"ngModel","ngModelOptions","disabled","ngModelChange","keyup"],["for","numberOfInstallments",1,"text-right","col-form-label","block"],["type","number","id","PaymentCount","name","PaymentCount","autocomplete","off",1,"form-control",3,"ngModel","ngModelOptions","disabled","ngModelChange","keyup"],["for","latestInstallment",1,"text-right","col-form-label","block"],["type","number","id","LastpayVal","name","LastpayVal","autocomplete","off","disabled","",1,"form-control",3,"ngModel","ngModelOptions","ngModelChange"],[1,"flex","gap-2","pt-3","border-t","border-neutral-300","justify-end"],[1,"btn","bg-base","text-white",3,"click"],[3,"translate","translateParams"],[1,"flex","gap-2","justify-center"],["type","button","mat-raised-button","","color","warn",3,"click"],["type","button","mat-raised-button","","color","basic",3,"click"]],template:function(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"div",0)(1,"div",1)(2,"mat-stepper",2,3)(4,"mat-step",4),t.YNc(5,H,2,3,"ng-template",5),t.TgZ(6,"form",6)(7,"div",7)(8,"div",8)(9,"div",9)(10,"div",10)(11,"label",11),t._uU(12),t.ALo(13,"translate"),t.qZA(),t._UZ(14,"input",12,13),t.qZA()(),t.TgZ(16,"div",9)(17,"div",10)(18,"label",14),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.TgZ(21,"input",15),t.NdJ("ngModelChange",function(i){return o.ChangeContractGre(i)}),t.qZA()()(),t.TgZ(22,"div",9)(23,"div",10)(24,"label",16),t._uU(25),t.ALo(26,"translate"),t.qZA(),t.TgZ(27,"hijri-gregorian-datepicker",17),t.NdJ("selectedDateChange",function(i){return o.selectedHijriDate=i})("selectedDateChange",function(i){return o.ChangeContractHijri(i)}),t.ALo(28,"translate"),t.qZA()()(),t.TgZ(29,"div",18)(30,"div",10)(31,"label",19),t._uU(32),t.ALo(33,"translate"),t.qZA(),t._UZ(34,"input",20),t.qZA()(),t.TgZ(35,"div",21)(36,"div",10)(37,"label",22),t._uU(38),t.ALo(39,"translate"),t.qZA(),t.TgZ(40,"ng-select",23,24),t.NdJ("change",function(){return o.GetEmployeeJob()}),t.ALo(42,"translate"),t.YNc(43,K,2,2,"ng-option",25),t.qZA()()(),t.TgZ(44,"div",21)(45,"div",10)(46,"label",26),t._uU(47),t.ALo(48,"translate"),t.qZA(),t._UZ(49,"input",27),t.qZA()(),t.TgZ(50,"div",18)(51,"div",10)(52,"label",28),t._uU(53),t.ALo(54,"translate"),t.qZA(),t.TgZ(55,"ng-select",29),t.NdJ("change",function(){return o.ChangeCustomerSelect()}),t.ALo(56,"translate"),t.YNc(57,Q,2,2,"ng-option",25),t.qZA()()(),t.TgZ(58,"div",21)(59,"div",10)(60,"label",30),t._uU(61),t.ALo(62,"translate"),t.qZA(),t._UZ(63,"input",31),t.qZA()(),t.TgZ(64,"div",21)(65,"label",32),t._uU(66),t.ALo(67,"translate"),t.qZA(),t.TgZ(68,"div",33)(69,"div",34)(70,"input",35),t.NdJ("change",function(i){return o.setOfferPriceChecked(i)}),t.qZA(),t.TgZ(71,"div")(72,"span",36),t._uU(73),t.ALo(74,"translate"),t.qZA(),t.TgZ(75,"span",36),t._uU(76),t.ALo(77,"translate"),t.qZA(),t._UZ(78,"div",37),t.qZA()()()(),t.YNc(79,X,8,7,"div",38),t.qZA()(),t.TgZ(80,"div",39)(81,"button",40),t._uU(82),t.ALo(83,"translate"),t.qZA()()()(),t.TgZ(84,"mat-step",4)(85,"form",6),t.YNc(86,tt,2,3,"ng-template",5),t.TgZ(87,"div",41)(88,"div",42),t.YNc(89,et,7,4,"div",43),t.TgZ(90,"h3",44),t._uU(91),t.ALo(92,"translate"),t.TgZ(93,"button",45),t.NdJ("click",function(){return o.addServiceContractNew()}),t._UZ(94,"i",46),t.qZA()(),t.TgZ(95,"div",47)(96,"table",48)(97,"thead",49)(98,"tr")(99,"th"),t._uU(100),t.ALo(101,"translate"),t.qZA(),t.TgZ(102,"th",50),t._uU(103),t.ALo(104,"translate"),t.qZA(),t.TgZ(105,"th"),t._uU(106),t.ALo(107,"translate"),t.qZA(),t.TgZ(108,"th"),t._uU(109),t.ALo(110,"translate"),t.qZA(),t.TgZ(111,"th"),t._uU(112),t.ALo(113,"translate"),t.qZA(),t.TgZ(114,"th"),t._uU(115),t.ALo(116,"translate"),t.qZA(),t.TgZ(117,"th"),t._uU(118),t.ALo(119,"translate"),t.qZA(),t.TgZ(120,"th"),t._uU(121),t.ALo(122,"translate"),t.qZA()()(),t.TgZ(123,"tbody"),t.YNc(124,rt,26,28,"tr",51),t.qZA()()(),t.TgZ(125,"div",52)(126,"div",53)(127,"div",54)(128,"label",55),t._uU(129),t.ALo(130,"translate"),t.qZA()(),t.TgZ(131,"div",56)(132,"ng-select",57),t.NdJ("ngModelChange",function(i){return o.modalDetailsContractNew.taxtype=i})("change",function(){return o.CalculateTotal_ContractNew()}),t.ALo(133,"translate"),t.TgZ(134,"ng-option",58),t._uU(135),t.ALo(136,"translate"),t.qZA(),t.TgZ(137,"ng-option",58),t._uU(138),t.ALo(139,"translate"),t.qZA()()()(),t.TgZ(140,"div",53)(141,"div",59)(142,"div",54)(143,"label",60),t._uU(144),t.ALo(145,"translate"),t.qZA()(),t.TgZ(146,"div",56)(147,"input",61),t.NdJ("ngModelChange",function(i){return o.modalDetailsContractNew.total_amount=i}),t.qZA()()()(),t.TgZ(148,"div",53)(149,"div",59)(150,"div",54)(151,"label",62),t._uU(152),t.ALo(153,"translate"),t.qZA()(),t.TgZ(154,"div",56)(155,"input",63),t.NdJ("ngModelChange",function(i){return o.modalDetailsContractNew.total_amount_text=i}),t.qZA()()()()()(),t.TgZ(156,"div",42)(157,"h3",44),t._uU(158),t.ALo(159,"translate"),t.TgZ(160,"button",45),t.NdJ("click",function(){return o.addBand()}),t._UZ(161,"i",46),t.qZA()(),t.TgZ(162,"div",64)(163,"table",65)(164,"thead",49)(165,"tr")(166,"th"),t._uU(167),t.ALo(168,"translate"),t.qZA(),t.TgZ(169,"th"),t._uU(170),t.ALo(171,"translate"),t.qZA(),t.TgZ(172,"th"),t._uU(173),t.ALo(174,"translate"),t.qZA()()(),t.TgZ(175,"tbody"),t.YNc(176,it,8,5,"tr",51),t.qZA()()()(),t.YNc(177,lt,30,23,"div",66),t.qZA(),t.TgZ(178,"div",67)(179,"button",68),t._uU(180),t.ALo(181,"translate"),t.qZA(),t.TgZ(182,"button",69),t.NdJ("click",function(){t.CHM(n);const i=t.MAs(3);return t.KtG(o.saveContractbtn(i))}),t._uU(183),t.ALo(184,"translate"),t.qZA()()()(),t.TgZ(185,"mat-step",4),t.YNc(186,ct,2,3,"ng-template",5),t.TgZ(187,"div",41)(188,"div",70)(189,"mat-radio-group",71)(190,"div",72)(191,"mat-radio-button",73),t._uU(192),t.ALo(193,"translate"),t.qZA(),t.TgZ(194,"div",74)(195,"button",75),t._UZ(196,"i",76),t.qZA(),t.TgZ(197,"button",77),t._UZ(198,"i",78),t.qZA()()(),t.TgZ(199,"div",72)(200,"mat-radio-button",79),t._uU(201),t.ALo(202,"translate"),t.qZA(),t.TgZ(203,"div",74)(204,"button",75),t._UZ(205,"i",76),t.qZA(),t.TgZ(206,"button",77),t._UZ(207,"i",78),t.qZA()()()()()()()()()(),t.YNc(208,gt,14,8,"ng-template",null,80,t.W1O),t.YNc(210,Mt,29,12,"ng-template",null,81,t.W1O),t.YNc(212,St,98,92,"ng-template",null,82,t.W1O),t.YNc(214,wt,9,9,"ng-template",null,83,t.W1O)}if(2&e){const n=t.MAs(15);t.xp6(4),t.Q6J("stepControl",o.FormGroup01),t.xp6(2),t.Q6J("formGroup",o.FormGroup01),t.xp6(6),t.hij(" ",t.lcZ(13,71,"contract number")," "),t.xp6(2),t.Gre("form-control ",null==n.value?"errorInput":"",""),t.xp6(5),t.hij(" ",t.lcZ(20,73,"Date of contract")," "),t.xp6(2),t.Q6J("bsConfig",t.DdM(147,It)),t.xp6(4),t.hij(" ",t.lcZ(26,75,"Contract date (Hijri) *")," "),t.xp6(2),t.Q6J("selectedDate",o.selectedHijriDate)("isRequired",!0)("hijriLabel","Hijri")("selectedDateType",o.selectedDateType)("dir",t.lcZ(28,77,"dir")),t.xp6(5),t.hij(" ",t.lcZ(33,79,"The first party / the name of the office")," "),t.xp6(6),t.hij(" ",t.lcZ(39,81,"and represents it"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(42,83,"Chose")),t.xp6(3),t.Q6J("ngForOf",o.LoadEmployeeSelect),t.xp6(4),t.hij(" ",t.lcZ(48,85,"as")," "),t.xp6(6),t.hij(" ",t.lcZ(54,87,"The second party / customer")," "),t.xp6(2),t.s9C("placeholder",t.lcZ(56,89,"Chose")),t.xp6(2),t.Q6J("ngForOf",o.LoadCustomerSelectWProC),t.xp6(4),t.hij(" ",t.lcZ(62,91,"ID Number")," "),t.xp6(5),t.hij(" ",t.lcZ(67,93,"Activate bid services")," "),t.xp6(5),t.Gre("box ",o.offerPriceChecked?"checked":"blur",""),t.xp6(2),t.Oqu(t.lcZ(74,95,"Yes")),t.xp6(3),t.Oqu(t.lcZ(77,97,"No")),t.xp6(3),t.Q6J("ngIf",o.offerPriceChecked),t.xp6(3),t.hij(" ",t.lcZ(83,99,"Next")," "),t.xp6(2),t.Q6J("stepControl",o.FormGroup02),t.xp6(1),t.Q6J("formGroup",o.FormGroup02),t.xp6(4),t.Q6J("ngIf",o.ContractModalCustom.InvoiceNumDiv),t.xp6(2),t.hij(" ",t.lcZ(92,101,"services")," "),t.xp6(9),t.Oqu(t.lcZ(101,103,"ServiceNo")),t.xp6(3),t.Oqu(t.lcZ(104,105,"ServiceName")),t.xp6(3),t.Oqu(t.lcZ(107,107,"Unit")),t.xp6(3),t.Oqu(t.lcZ(110,109,"Quantity")),t.xp6(3),t.Oqu(t.lcZ(113,111,"price")),t.xp6(3),t.Oqu(t.lcZ(116,113,"VATTax")),t.xp6(3),t.Oqu(t.lcZ(119,115,"netTax")),t.xp6(3),t.Oqu(t.lcZ(122,117,"action")),t.xp6(3),t.Q6J("ngForOf",o.ContractNewServices),t.xp6(5),t.hij(" ",t.lcZ(130,119,"tax type")," "),t.xp6(3),t.s9C("placeholder",t.lcZ(133,121,"Chose")),t.Q6J("ngModel",o.modalDetailsContractNew.taxtype)("ngModelOptions",t.DdM(148,_))("clearable",!1),t.xp6(2),t.Q6J("value",2),t.xp6(1),t.Oqu(t.lcZ(136,123,"Excluding tax")),t.xp6(2),t.Q6J("value",3),t.xp6(1),t.Oqu(t.lcZ(139,125,"Taxes included")),t.xp6(6),t.hij(" ",t.lcZ(145,127,"Total amount")," "),t.xp6(3),t.Q6J("ngModel",o.modalDetailsContractNew.total_amount)("ngModelOptions",t.DdM(149,_)),t.xp6(5),t.hij(" ",t.lcZ(153,129,"total in writing")," "),t.xp6(3),t.Q6J("ngModel",o.modalDetailsContractNew.total_amount_text)("ngModelOptions",t.DdM(150,_)),t.xp6(3),t.hij(" ",t.lcZ(159,131,"Add a new item")," "),t.xp6(9),t.Oqu(t.lcZ(168,133,"no")),t.xp6(3),t.Oqu(t.lcZ(171,135,"clause")),t.xp6(3),t.Oqu(t.lcZ(174,137,"action")),t.xp6(3),t.Q6J("ngForOf",o.bands),t.xp6(1),t.Q6J("ngIf",2==(null==o.ContractModalCustom?null:o.ContractModalCustom.ContractType)),t.xp6(3),t.hij(" ",t.lcZ(181,139,"Previous")," "),t.xp6(2),t.Q6J("disabled",o.disableButtonSave_Contract),t.xp6(1),t.hij(" ",t.lcZ(184,141,"confirem")," "),t.xp6(2),t.Q6J("stepControl",o.FormGroup04),t.xp6(7),t.Oqu(t.lcZ(193,143,"File Name")),t.xp6(9),t.Oqu(t.lcZ(202,145,"File Name"))}},dependencies:[F.sg,F.O5,C._Y,C.Fj,C.wV,C.Wl,C.JJ,C.JL,C.On,C.F,C.sg,C.u,w.Pi,B.Lv,W.lW,E.w9,E.jq,G.Np,G.Y5,l.BZ,l.fO,l.as,l.w1,l.Dz,l.nj,l.ge,l.ev,l.XQ,l.Gk,l.Ee,O.KE,O.hX,z.Nt,g.g4,j.VQ,j.U0,P.C0,P.VY,P.Vq,P.Ic,P.fd,A.Wj,A.Zt,R.F,w.X$],styles:['.customer-contracts{padding-bottom:30px}.customer-contracts .inputType:focus{border:1 px solid grey!important;outline:none!important;border-radius:5px}.customer-contracts .inputType{border:1px solid rgb(206,212,218)!important;border-radius:5px}.customer-contracts .form-group input{color:var(--gray-color)}.customer-contracts .form-group input::placeholder{color:var(--gray-color);font-size:14px}.customer-contracts .form-group i{inset-inline-start:14px;top:50%;transform:translateY(-50%);color:var(--gray-color)}.customer-contracts .btns{margin-top:15px}.customer-contracts .btns button{padding:0 10px!important;min-width:max-content;min-height:max-content;margin:0 3px;border-radius:5px;font-size:14px;letter-spacing:.5px;height:40px;width:auto}::ng-deep .mat-paginator{width:100%}.stats{margin-bottom:0!important}.stats .stat{display:flex;align-items:center;justify-content:center;flex-direction:column;text-align:center;line-height:1.7em;margin-bottom:25px}.stats .stat i{font-size:40px;margin-bottom:10px;color:var(--base-color)}.stats .stat span.num{font-size:20px;font-weight:500;margin-bottom:5px}.stats .stat span.status{font-size:20px;font-weight:700;margin-bottom:0;color:var(--base-color)}.table .statusCell{min-width:250px;height:50px}.table .statusCell .from,.table .statusCell .to{display:flex;flex-direction:column;height:100%;align-items:start;justify-content:space-between}.table .statusCell .status{min-width:150px;height:25px;background-color:#b40000;border-radius:25px;display:flex;align-items:center;justify-content:center;color:#fff;padding:5px 0;font-size:13px}.endProject label{display:block;margin-bottom:20px}.endProject ::ng-deep .mat-radio-button{margin-inline-end:15px}.add-btn{width:32px;height:24px;border-radius:50%;background:var(--base-color);color:#fff;display:flex;align-items:center;justify-content:center;font-size:13px;margin-inline-start:20px}.bg-red-100{background-color:rgb(254 226 226/var(--tw-bg-opacity))!important}.bg-red-100:hover{background-color:rgb(239 68 68/var(--tw-bg-opacity))!important;color:#fff!important}.mat-progress-bar{height:15px}::ng-deep .mat-progress-bar-fill :after{background-color:var(--base-color)!important}.checkbox .checkbox-content input.inputType{border:1px solid red!important}.checkbox .checkbox-content .box span{color:#444;font-size:9px;font-weight:700;letter-spacing:unset;word-wrap:break-word;top:50%;transform:translateY(-50%);max-width:50%}textarea{border:1px solid #ccc;padding:15px}textarea:focus-visible{outline:none}::ng-deep .datatable-row-wrapper{padding:7px 0}::ng-deep .datatable-header-cell,::ng-deep .datatable-body-cell{display:flex!important;align-items:center;justify-content:center;text-align:center}::ng-deep .actions{width:100px;display:flex;justify-content:space-evenly}::ng-deep .actions i{font-size:18px;cursor:pointer}.statusCell{min-width:250px;height:50px}.statusCell .from,.statusCell .to{display:flex;flex-direction:column;height:100%;align-items:start;justify-content:space-between}.statusCell .status{min-width:150px;height:25px;background-color:#b40000;border-radius:25px;display:flex;align-items:center;justify-content:center;color:#fff;padding:5px 0;font-size:13px}.child{display:none}.child.show{position:absolute;width:max-content;inset:unset!important;transform:unset!important;right:unset!important;left:unset!important;inset-inline-end:25px!important;background:#fff;padding:10px;border-radius:5px;box-shadow:0 0 1px 1px #ccc;z-index:50;display:flex}.child button{margin:0 3px}.btnSuccess,.marginTop{margin-top:36px!important}.offers-price{padding-bottom:30px}.offers-price .form-group input{color:var(--gray-color)}.offers-price .form-group input::placeholder{color:var(--gray-color);font-size:14px}.offers-price .form-group i{inset-inline-start:14px;top:50%;transform:translateY(-50%);color:var(--gray-color)}.offers-price .btns{margin-top:15px}.offers-price .btns button{padding:0 10px!important;min-width:max-content;min-height:max-content;margin:0 3px;border-radius:5px;font-size:14px;letter-spacing:.5px;height:40px}.offers-price .timeLine{margin-block:50px 25px}.offers-price .timeLine ul{width:100%;margin:0;display:flex;align-items:center;justify-content:space-between;position:relative;flex-wrap:wrap}@media (max-width: 575px){.offers-price .timeLine ul{flex-direction:column;justify-content:center;align-items:center}}.offers-price .timeLine ul:after{content:"";position:absolute;width:94%;height:5px;background-color:var(--base-color);inset-inline-end:3%;top:14px;z-index:1}@media (max-width: 575px){.offers-price .timeLine ul:after{display:none}}.offers-price .timeLine ul li{position:relative;z-index:2;display:flex;flex-direction:column;align-items:center;justify-content:center;margin-bottom:25px}.offers-price .timeLine ul li span:first-of-type{display:flex;align-items:center;justify-content:center;width:30px;height:30px;border-radius:50%;background-color:var(--gray-bg-color);color:#000;margin-bottom:10px;font-size:13px;box-shadow:0 0 1px 1px #afafaf}.offers-price .timeLine ul li span:last-of-type{color:var(--base-color);font-size:14px;font-weight:700}::ng-deep .mat-paginator-container{justify-content:space-between!important;padding:15px 10px 0!important}::ng-deep .mat-paginator-range-actions{direction:inherit!important}::ng-deep .mat-paginator-range-label{direction:initial}.modal-form{max-height:65vh;overflow:auto;padding:.5rem}.modal-form>div{display:grid;gap:1rem}@media (min-width: 768px){.modal-form>div{grid-template-columns:repeat(3,minmax(0,1fr))}}@media (min-width: 1024px){.modal-form>div{grid-template-columns:repeat(4,minmax(0,1fr))}}.modal-form hr{margin-top:.75rem;margin-bottom:.75rem}.checkbox{display:flex;align-items:center;justify-content:center;margin:0}.checkbox .checkbox-content{width:60px;height:30px;border-radius:50px}.checkbox .checkbox-content input{position:absolute;width:100%;height:100%;top:50%;transform:translateY(-50%);opacity:0;z-index:2;cursor:pointer;inset-inline-start:0}.checkbox .checkbox-content .box{display:flex;align-items:center;width:100%;height:100%;border-radius:50px;background-color:var(--gray-bg-color);cursor:pointer;position:absolute;z-index:1;transition:all .4s ease-in-out;box-shadow:0 0 1px 1px #e3e3e3;filter:none!important}.checkbox .checkbox-content .box span{color:#444;font-size:9px;font-weight:700;letter-spacing:unset;top:50%;transform:translateY(-50%)}.checkbox .checkbox-content .box span:first-of-type{left:4px}.checkbox .checkbox-content .box span:last-of-type{right:4px}.checkbox .checkbox-content .box .cycle{width:26px;height:26px;margin:0 2px;border-radius:50%;transition:all .4s ease-in-out;background:var(--base-color)}.checkbox .checkbox-content .box .cycle:after{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-size:14px;font-weight:700;letter-spacing:1px}.checkbox .checkbox-content .box.checked .cycle{transform:translate(-110%)!important}.checkbox .checkbox-content .box.blur .cycle{transform:translate(-10%)!important}.checkbox p{margin-bottom:10px;letter-spacing:1px}.area-btn{font-size:14px!important;letter-spacing:.5px}.editable input:not([type=checkbox]){width:100%;height:100%;background:transparent;text-align:center;appearance:none;-webkit-appearance:none}.editable input:not([type=checkbox]):focus-visible{outline:none}.add-btn{width:30px;height:30px;border-radius:50%;background:var(--base-color);color:#fff;display:flex;align-items:center;justify-content:center;font-size:18px}.percent{top:50%;transform:translateY(-50%);inset-inline-end:30px;font-weight:600;font-size:16px}.service_item_details li{display:flex;align-items:center;font-size:20px;padding:10px 15px}.service_item_details li:nth-of-type(odd){background:#f3f3f3}.service_item_details li span{font-size:21px;text-transform:capitalize}.box{background-color:var(--base-color);color:#fff;border-radius:5px;width:80%;margin:0 auto 30px}.box div{display:flex;align-items:center;justify-content:space-between;margin-bottom:15px}.box div label{min-width:160px;text-align:start;padding:5px 16px}.box div input{width:100%;text-align:center}.box div input:focus-visible{outline:none}.priceOffer{margin-bottom:43px!important}.priceOfferInput{bottom:10px!important}.boxContainer{background-color:var(--base-color);color:#fff;border-radius:5px;width:80%;margin:0 auto 20px}.boxContainer div{display:flex;margin-bottom:5px}.boxContainer div input:focus-visible{outline:none}::ng-deep .ng-select.ng-select-single .ng-select-container .ng-value-container,::ng-deep .ng-select.ng-select-single .ng-select-container .ng-value-container .ng-value{overflow:visible!important}::ng-deep .ngb-dp-header{direction:initial}::ng-deep .track-projects .dropdown-menu{min-width:274px;width:max-content;direction:initial}::ng-deep .requiredInput{display:none!important}::ng-deep .input-group .btn{display:none!important}::ng-deep ngb-dp-header{direction:initial}::ng-deep .ngb-dp-week{min-width:280px}::ng-deep .ngb-dp-day,::ng-deep .ngb-dp-weekday,::ng-deep .ngb-dp-week-number{flex:1;color:var(--base-color)!important}.box-info{background-color:var(--base-color);color:#fff;border-radius:5px;width:80%;margin:0 auto 30px;padding-top:20px}.box-info div{display:flex;align-items:center;justify-content:space-between;margin-bottom:15px;gap:8px}.box-info div .ng-select{text-align:center}.box-info div label{min-width:140px;text-align:center}.box-info div input{width:100%;text-align:center}.box-info div input:focus-visible{outline:none}.ng-select,.form-control{width:100%}.errorInput{border-color:red}.errorInput::placeholder{color:red}.errorInput .ng-placeholder{color:red}.offerPrice-service_item_details li{display:flex;align-items:center;font-size:20px;padding:10px 15px}.offerPrice-service_item_details li:nth-of-type(odd){background:#f3f3f3}.offerPrice-service_item_details li span{font-size:21px;text-transform:capitalize}.example-list{max-width:100%;border:solid 1px #ccc;min-height:60px;display:block;background:white;border-radius:4px;overflow:hidden}.example-box{padding:6px 4px;border-bottom:solid 1px #ccc;color:#000000de;display:flex;flex-direction:row;align-items:center;justify-content:space-between;box-sizing:border-box;cursor:move;background:white;font-size:14px}.example-box.cdk-drag-disabled{background:#ccc;cursor:not-allowed;-webkit-user-select:none;user-select:none}.cdk-drag-preview{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f}.cdk-drag-animating{transition:transform .25s cubic-bezier(0,0,.2,1)}.example-box:last-child{border:none}.example-list.cdk-drop-list-dragging .example-box:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}input::-webkit-outer-spin-button,input::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}input[type=number]{-moz-appearance:textfield}\n'],encapsulation:2}),s})()}}]);